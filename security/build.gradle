apply plugin:'java'
apply from: "$rootProject.projectDir/gradle/packaging.gradle"

evaluationDependsOn(':data-fabric')

dependencies {
    compile elastic([group: 'com.continuuity', name: 'common', version: "${version}", changing: true], "common")
    compile elastic([group: 'com.continuuity', name: 'common', classifier: 'api', version: "${version}", changing: true], "common")

    compile libraries.slf4j_api
    compile libraries.google_guice
    compile libraries.google_guice_assistedinject
    compile libraries.google_guava

    testCompile libraries.junit
}

test {
    jvmArgs '-Xmx3048m'
}

checkstyleMain {
    source = sourceSets.main.allJava.matching {
        exclude '**/stubs/**/*'
        exclude '**/thrift/**'
    }
}

/**
 * Use io.netty instead of org.jboss.netty
 */
configurations {
    all*.exclude group: 'org.jboss.netty', module: 'netty'
    all*.exclude group: 'asm', module: 'asm'
}
