<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="robots" content="noindex, nofollow">

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Cask Data Application Platform Administration and Operations Guide &mdash; Cask Data Application Platform 2.5.1 Documentation</title>
    
    <link rel="stylesheet" href="_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 2.5.1 Documentation" href="index.html" />
    <link rel="next" title="Cask Data Application Platform Licenses and Dependencies" href="licenses/index.html" />
    <link rel="prev" title="Cask Data Application Platform - Available Tools" href="tools.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="licenses/index.html" title="Cask Data Application Platform Licenses and Dependencies"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="tools.html" title="Cask Data Application Platform - Available Tools"
             accesskey="P">Previous</a> |</li>
        <li><a href="index.html">Cask Data Application Platform 2.5.1 Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cask-data-application-platform-administration-and-operations-guide">
<span id="admin"></span><h1>Cask Data Application Platform Administration and Operations Guide<a class="headerlink" href="#cask-data-application-platform-administration-and-operations-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation-and-configuration">
<span id="install"></span><h2>Installation and Configuration<a class="headerlink" href="#installation-and-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>This guide is to help you install and configure Cask Data Application Platform (CDAP). It provides the
<a class="reference external" href="#system-requirements">system</a>,
<a class="reference external" href="#network-requirements">network</a>, and
<a class="reference external" href="#software-prerequisites">software requirements</a>,
<a class="reference external" href="#packaging">packaging options</a>, and
instructions for
<a class="reference external" href="#installation">installation</a> and
<a class="reference external" href="#verification">verification</a> of
the CDAP components so they work with your existing Hadoop cluster.</p>
<p>These are the CDAP components:</p>
<ul>
<li><p class="first"><strong>CDAP Web-App:</strong> User interface—the <em>Console</em>—for managing
CDAP applications;</p>
</li>
<li><p class="first"><strong>CDAP Gateway:</strong> Service supporting REST endpoints for CDAP;</p>
</li>
<li><p class="first"><strong>CDAP-Master:</strong> Service for managing runtime, lifecycle and resources of
CDAP applications;</p>
</li>
<li><p class="first"><strong>CDAP Kafka:</strong> Metrics and logging transport service,
using an embedded version of <em>Kafka</em>; and</p>
</li>
<li><p class="first"><strong>CDAP Authentication Server:</strong> Performs client authentication for CDAP when security
is enabled.</p>
<p><tt class="docutils literal"><span class="pre">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></tt></p>
</li>
</ul>
<p>Before installing the CDAP components, you must first install a Hadoop cluster
with <em>HDFS</em>, <em>YARN</em>, <em>HBase</em>, and <em>Zookeeper</em>. In order to use the ad-hoc querying capabilities
of CDAP, you will also need <em>Hive</em>. All CDAP components can be installed on the
same boxes as your Hadoop cluster, or on separate boxes that can connect to the Hadoop services.</p>
<p>Our recommended installation is to use two boxes for the CDAP components; the
<a class="reference external" href="#hardware-requirements">hardware requirements</a> are relatively modest,
as most of the work is done by the Hadoop cluster. These two
boxes provide high availability; at any one time, one of them is the leader
providing services while the other is a follower providing failover support.</p>
<p>Some CDAP components run on YARN, while others orchestrate the Hadoop cluster.
The CDAP Gateway service starts a router instance on each of the local boxes and instantiates
one or more gateway instances on YARN as determined by the gateway service configuration.</p>
<p>We have specific
<a class="reference external" href="#hardware-requirements">hardware</a>,
<a class="reference external" href="#network-requirements">network</a> and
<a class="reference external" href="#software-prerequisites">prerequisite software</a> requirements detailed
<a class="reference external" href="#system-requirements">below</a>
that need to be met and completed before installation of the CDAP components.</p>
<div class="section" id="conventions">
<h4>Conventions<a class="headerlink" href="#conventions" title="Permalink to this headline">¶</a></h4>
<p>In this document, <em>client</em> refers to an external application that is calling the
CDAP using the HTTP interface.</p>
<p><em>Application</em> refers to a user Application that has been deployed into the CDAP.</p>
<p>Text that are variables that you are to replace is indicated by a series of angle brackets (<tt class="docutils literal"><span class="pre">&lt;</span> <span class="pre">&gt;</span></tt>). For example:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nl">https:</span><span class="c1">//&lt;username&gt;:&lt;password&gt;@repository.cask.co</span>
</pre></div>
</div>
<p>indicates that the texts <tt class="docutils literal"><span class="pre">&lt;username&gt;</span></tt> and  <tt class="docutils literal"><span class="pre">&lt;password&gt;</span></tt> are variables
and that you are to replace them with your values,
perhaps username <tt class="docutils literal"><span class="pre">john_doe</span></tt> and password <tt class="docutils literal"><span class="pre">BigData11</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nl">https:</span><span class="c1">//john_doe:BigData11@repository.cask.co</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="system-requirements">
<h3>System Requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="hardware-requirements">
<h4>Hardware Requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this headline">¶</a></h4>
<p>Systems hosting the CDAP components must meet these hardware specifications,
in addition to having CPUs with a minimum speed of 2 GHz:</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="19%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CDAP Component</th>
<th class="head">Hardware Component</th>
<th class="head">Specifications</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>CDAP Web-App</strong></td>
<td>RAM</td>
<td>1 GB minimum, 2 GB recommended</td>
</tr>
<tr class="row-odd"><td><strong>CDAP Gateway</strong></td>
<td>RAM</td>
<td>2 GB minimum, 4 GB recommended</td>
</tr>
<tr class="row-even"><td><strong>CDAP-Master</strong></td>
<td>RAM</td>
<td>2 GB minimum, 4 GB recommended</td>
</tr>
<tr class="row-odd"><td rowspan="2"><strong>CDAP Kafka</strong></td>
<td>RAM</td>
<td>1 GB minimum, 2 GB recommended</td>
</tr>
<tr class="row-even"><td>Disk Space</td>
<td><em>CDAP Kafka</em> maintains a data cache in
a configurable data directory.
Required space depends on the number of
CDAP applications deployed and running
in the CDAP and the quantity
of logs and metrics that they generate.</td>
</tr>
<tr class="row-odd"><td><strong>CDAP Authentication Server</strong></td>
<td>RAM</td>
<td>1 GB minimum, 2 GB recommended</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="network-requirements">
<h4>Network Requirements<a class="headerlink" href="#network-requirements" title="Permalink to this headline">¶</a></h4>
<p>CDAP components communicate over your network with <em>HBase</em>, <em>HDFS</em>, and <em>YARN</em>.
For the best performance, CDAP components should be located on the same LAN,
ideally running at 1 Gbps or faster. A good rule of thumb is to treat CDAP
components as you would <em>Hadoop DataNodes</em>.</p>
</div>
<div class="section" id="software-prerequisites">
<h4>Software Prerequisites<a class="headerlink" href="#software-prerequisites" title="Permalink to this headline">¶</a></h4>
<p>You&#8217;ll need this software installed:</p>
<ul class="simple">
<li>Java runtime (on CDAP and Hadoop nodes)</li>
<li>Node.js runtime (on CDAP nodes)</li>
<li>Hadoop, HBase (and possibly Hive) environment to run against</li>
</ul>
<div class="section" id="java-runtime">
<h5>Java Runtime<a class="headerlink" href="#java-runtime" title="Permalink to this headline">¶</a></h5>
<p>The latest <a class="reference external" href="http://www.java.com/en/download/manual.jsp">JDK or JRE version 1.6.xx</a>
for Linux and Solaris must be installed in your environment.</p>
<p>Once you have installed the JDK, you&#8217;ll need to set the JAVA_HOME environment variable.</p>
</div>
<div class="section" id="node-js-runtime">
<h5>Node.js Runtime<a class="headerlink" href="#node-js-runtime" title="Permalink to this headline">¶</a></h5>
<p>You can download the latest version of Node.js from <a class="reference external" href="http://nodejs.org">nodejs.org</a>:</p>
<ol class="arabic simple">
<li>Download the appropriate Linux or Solaris binary <tt class="docutils literal"><span class="pre">.tar.gz</span></tt> from
<a class="reference external" href="http://nodejs.org/download/">nodejs.org/download/</a>.</li>
<li>Extract somewhere such as <tt class="docutils literal"><span class="pre">/opt/node-[version]/</span></tt></li>
<li>Build node.js; instructions that may assist are available at
<a class="reference external" href="https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager">github</a></li>
<li>Ensure that <tt class="docutils literal"><span class="pre">nodejs</span></tt> is in the <tt class="docutils literal"><span class="pre">$PATH</span></tt>. One method is to use a symlink from the installation:
<tt class="docutils literal"><span class="pre">ln</span> <span class="pre">-s</span> <span class="pre">/opt/node-[version]/bin/node</span> <span class="pre">/usr/bin/node</span></tt></li>
</ol>
</div>
<div class="section" id="hadoop-hbase-environment">
<h5>Hadoop/HBase Environment<a class="headerlink" href="#hadoop-hbase-environment" title="Permalink to this headline">¶</a></h5>
<p>For a distributed enterprise, you must install these Hadoop components:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="24%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Component</th>
<th class="head">Distribution</th>
<th class="head">Required Version</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><strong>HDFS</strong></td>
<td>Apache Hadoop DFS</td>
<td>2.0.2-alpha or later</td>
</tr>
<tr class="row-odd"><td>CDH or HDP</td>
<td>(CDH) 4.2.x or later or (HDP) 2.0 or later</td>
</tr>
<tr class="row-even"><td rowspan="2"><strong>YARN</strong></td>
<td>Apache Hadoop DFS</td>
<td>2.0.2-alpha or later</td>
</tr>
<tr class="row-odd"><td>CDH or HDP</td>
<td>(CDH) 4.2.x or later or (HDP) 2.0 or later</td>
</tr>
<tr class="row-even"><td><strong>HBase</strong></td>
<td>&nbsp;</td>
<td>0.94.2+, 0.96.0+, 0.98.0+</td>
</tr>
<tr class="row-odd"><td><strong>Zookeeper</strong></td>
<td>&nbsp;</td>
<td>Version 3.4.3 or later</td>
</tr>
<tr class="row-even"><td rowspan="2"><strong>Hive</strong></td>
<td>&nbsp;</td>
<td>Version 12.0 or later</td>
</tr>
<tr class="row-odd"><td>CDH or HDP</td>
<td>(CDH) 4.3.x or later or (HDP) 2.0 or later</td>
</tr>
</tbody>
</table>
<p>CDAP nodes require Hadoop and HBase client installation and configuration. No Hadoop
services need to be running.</p>
<p>Certain CDAP components need to reference your <em>Hadoop</em>, <em>HBase</em>, <em>YARN</em> (and possibly <em>Hive</em>)
cluster configurations by adding your configuration to their class paths.</p>
</div>
</div>
<div class="section" id="prepare-the-cluster">
<h4>Prepare the Cluster<a class="headerlink" href="#prepare-the-cluster" title="Permalink to this headline">¶</a></h4>
<p>To prepare your cluster so that CDAP can write to its default namespace,
create a top-level <tt class="docutils literal"><span class="pre">/cdap</span></tt> directory in HDFS, owned by an HDFS user <tt class="docutils literal"><span class="pre">yarn</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">hadoop</span> <span class="n">fs</span> <span class="o">-</span><span class="n">mkdir</span> <span class="o">/</span><span class="n">cdap</span> <span class="o">&amp;&amp;</span> <span class="n">hadoop</span> <span class="n">fs</span> <span class="o">-</span><span class="n">chown</span> <span class="n">yarn</span> <span class="o">/</span><span class="n">cdap</span>
</pre></div>
</div>
<p>In the CDAP packages, the default HDFS namespace is <tt class="docutils literal"><span class="pre">/cdap</span></tt>
and the default HDFS user is <tt class="docutils literal"><span class="pre">yarn</span></tt>. If you set up your cluster as above, no further changes are
required.</p>
<p>To make alterations to your setup, create an <cite>.xml</cite> file <tt class="docutils literal"><span class="pre">conf/cdap-site.xml</span></tt>
(see the <a class="reference external" href="#appendix">Appendix</a>) and set appropriate properties.</p>
<ul>
<li><p class="first">If you want to use an HDFS directory with a name other than <tt class="docutils literal"><span class="pre">/cdap</span></tt>:</p>
<ol class="arabic">
<li><p class="first">Create the HDFS directory you want to use, such as <tt class="docutils literal"><span class="pre">/myhadoop/myspace</span></tt>.</p>
</li>
<li><p class="first">Create an <tt class="docutils literal"><span class="pre">hdfs.namespace</span></tt> property for the HDFS directory in <tt class="docutils literal"><span class="pre">conf/cdap-site.xml</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">hdfs</span><span class="o">.</span><span class="na">namespace</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;/</span><span class="n">myhadoop</span><span class="o">/</span><span class="n">myspace</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">Default</span> <span class="n">HDFS</span> <span class="n">namespace</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Ensure that the default HDFS user <tt class="docutils literal"><span class="pre">yarn</span></tt> owns that HDFS directory.</p>
</li>
</ol>
</li>
<li><p class="first">If you want to use a different HDFS user than <tt class="docutils literal"><span class="pre">yarn</span></tt>:</p>
<ol class="arabic">
<li><p class="first">Check that there is—and create if necessary—a corresponding user on all machines
in the cluster on which YARN is running (typically, all of the machines).</p>
</li>
<li><p class="first">Create an <tt class="docutils literal"><span class="pre">hdfs.user</span></tt> property for that user in <tt class="docutils literal"><span class="pre">conf/cdap-site.xml</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">hdfs</span><span class="o">.</span><span class="na">user</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">my_username</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">User</span> <span class="k">for</span> <span class="n">accessing</span> <span class="n">HDFS</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Check that the HDFS user owns the HDFS directory described by <tt class="docutils literal"><span class="pre">hdfs.namespace</span></tt> on all machines.</p>
</li>
</ol>
</li>
<li><p class="first">Set the <tt class="docutils literal"><span class="pre">router.server.address</span></tt> property in <tt class="docutils literal"><span class="pre">conf/cdap-site.xml</span></tt> to the hostname of the CDAP Router.
The CDAP Console uses this property to connect to the Router:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">router</span><span class="o">.</span><span class="na">server</span><span class="o">.</span><span class="na">address</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;{</span><span class="n">router</span><span class="o">-</span><span class="n">host</span><span class="o">-</span><span class="n">name</span><span class="o">}&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">To use the ad-hoc querying capabilities of CDAP, enable the CDAP Explore Service in
<tt class="docutils literal"><span class="pre">conf/cdap-site.xml</span></tt> (by default, it is disabled):</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">cdap</span><span class="o">.</span><span class="na">explore</span><span class="o">.</span><span class="na">enabled</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="kc">true</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">Enable</span> <span class="n">Explore</span> <span class="n">functionality</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Note:</strong> This feature cannot be used unless the cluster has a correct version of Hive installed.
See <em>Hadoop/HBase Environment</em> above. This feature is currently not supported on secure Hadoop clusters.</p>
</li>
</ul>
<div class="section" id="secure-hadoop">
<h5>Secure Hadoop<a class="headerlink" href="#secure-hadoop" title="Permalink to this headline">¶</a></h5>
<p>When running CDAP on top of Secure Hadoop and HBase (using Kerberos
authentication), the CDAP Master process will need to obtain Kerberos credentials in order to
authenticate with Hadoop and HBase.  In this case, the setting for <tt class="docutils literal"><span class="pre">hdfs.user</span></tt> in
<tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> will be ignored and the CDAP Master process will be identified as the
Kerberos principal it is authenticated as.</p>
<p>In order to configure CDAP Master for Kerberos authentication:</p>
<ul>
<li><p class="first">Create a Kerberos principal for the user running CDAP Master.</p>
</li>
<li><p class="first">Install the <tt class="docutils literal"><span class="pre">k5start</span></tt> package on the servers where CDAP Master is installed.  This is used
to obtain Kerberos credentials for CDAP Master on startup.</p>
</li>
<li><p class="first">Generate a keytab file for the CDAP Master Kerberos principal and place the file in
<tt class="docutils literal"><span class="pre">/etc/security/keytabs/cdap.keytab</span></tt> on all the CDAP Master hosts.  The file should
be readable only by the user running the CDAP Master process.</p>
</li>
<li><p class="first">Edit <tt class="docutils literal"><span class="pre">/etc/default/cdap-master</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">CDAP_KEYTAB</span><span class="o">=</span><span class="s">&quot;/etc/security/keytabs/cdap.keytab&quot;</span>
<span class="n">CDAP_PRINCIPAL</span><span class="o">=</span><span class="s">&quot;&lt;cdap principal&gt;@EXAMPLE.REALM.COM&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">When CDAP Master is started via the init script, it will now start using <tt class="docutils literal"><span class="pre">k5start</span></tt>, which will
first login using the configured keytab file and principal.</p>
</li>
</ul>
</div>
<div class="section" id="ulimit-configuration">
<h5>ULIMIT Configuration<a class="headerlink" href="#ulimit-configuration" title="Permalink to this headline">¶</a></h5>
<p>When you install the CDAP packages, the <tt class="docutils literal"><span class="pre">ulimit</span></tt> settings for the
CDAP user are specified in the <tt class="docutils literal"><span class="pre">/etc/security/limits.d/cdap.conf</span></tt> file.
On Ubuntu, they won&#8217;t take effect unless you make changes to the <tt class="docutils literal"><span class="pre">/etc/pam.d/common-session</span> <span class="pre">file</span></tt>.
For more information, refer to the <tt class="docutils literal"><span class="pre">ulimit</span></tt> discussion in the
<a class="reference external" href="https://hbase.apache.org/book.html#os">Apache HBase Reference Guide</a>.</p>
</div>
</div>
</div>
<div class="section" id="packaging">
<h3>Packaging<a class="headerlink" href="#packaging" title="Permalink to this headline">¶</a></h3>
<p>CDAP components are available as either Yum <tt class="docutils literal"><span class="pre">.rpm</span></tt> or APT <tt class="docutils literal"><span class="pre">.deb</span></tt> packages.
There is one package for each CDAP component, and each component may have multiple
services. Additionally, there is a base CDAP package with two utility packages
installed which creates the base configuration and the <tt class="docutils literal"><span class="pre">cdap</span></tt> user.
We provide packages for <em>Ubuntu 12</em> and <em>CentOS 6</em>.</p>
<p>Available packaging types:</p>
<ul class="simple">
<li>RPM: YUM repo</li>
<li>Debian: APT repo</li>
<li>Tar: For specialized installations only</li>
</ul>
<p>CDAP packages utilize a central configuration, stored by default in <tt class="docutils literal"><span class="pre">/etc/cdap</span></tt>.</p>
<p>When you install the CDAP base package, a default configuration is placed in
<tt class="docutils literal"><span class="pre">/etc/cdap/conf.dist</span></tt>. The <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> file is a placeholder
where you can define your specific configuration for all CDAP components.</p>
<p>Similar to Hadoop, CDAP utilizes the <tt class="docutils literal"><span class="pre">alternatives</span></tt> framework to allow you to
easily switch between multiple configurations. The <tt class="docutils literal"><span class="pre">alternatives</span></tt> system is used for ease of
management and allows you to to choose between different directories to fulfill the
same purpose.</p>
<p>Simply copy the contents of <tt class="docutils literal"><span class="pre">/etc/cdap/conf.dist</span></tt> into a directory of your choice
(such as <tt class="docutils literal"><span class="pre">/etc/cdap/conf.mycdap</span></tt>) and make all of your customizations there.
Then run the <tt class="docutils literal"><span class="pre">alternatives</span></tt> command to point the <tt class="docutils literal"><span class="pre">/etc/cdap/conf</span></tt> symlink
to your custom directory.</p>
<div class="section" id="rpm-using-yum">
<h4>RPM using Yum<a class="headerlink" href="#rpm-using-yum" title="Permalink to this headline">¶</a></h4>
<p>Download the Cask Yum repo definition file:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">sudo</span> <span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="o">.</span><span class="na">repos</span><span class="o">.</span><span class="na">d</span><span class="o">/</span><span class="n">cask</span><span class="o">.</span><span class="na">repo</span> <span class="nl">http:</span><span class="c1">//repository.cask.co/downloads/centos/6/x86_64/cask.repo</span>
</pre></div>
</div>
<p>This will create the file <tt class="docutils literal"><span class="pre">/etc/yum.repos.d/cask.repo</span></tt> with:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">[</span><span class="n">cask</span><span class="o">]</span>
<span class="n">name</span><span class="o">=</span><span class="n">Cask</span> <span class="n">Packages</span>
<span class="n">baseurl</span><span class="o">=</span><span class="nl">http:</span><span class="c1">//repository.cask.co/centos/6/x86_64/releases</span>
<span class="n">enabled</span><span class="o">=</span><span class="mi">1</span>
<span class="n">gpgcheck</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>Add the Cask Public GPG Key to your repository:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">sudo</span> <span class="n">rpm</span> <span class="o">--</span><span class="kn">import</span> <span class="nn">http</span><span class="o">:</span><span class="c1">//repository.cask.co/centos/6/x86_64/releases/pubkey.gpg</span>
</pre></div>
</div>
</div>
<div class="section" id="debian-using-apt">
<h4>Debian using APT<a class="headerlink" href="#debian-using-apt" title="Permalink to this headline">¶</a></h4>
<p>Download the Cask Apt repo definition file:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">sudo</span> <span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="na">list</span><span class="o">.</span><span class="na">d</span><span class="o">/</span><span class="n">cask</span><span class="o">.</span><span class="na">list</span> <span class="nl">http:</span><span class="c1">//repository.cask.co/downloads/ubuntu/precise/amd64/cask.list</span>
</pre></div>
</div>
<p>This will create the file <tt class="docutils literal"><span class="pre">/etc/apt/sources.list.d/cask.list</span></tt> with:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">deb</span> <span class="o">[</span> <span class="n">arch</span><span class="o">=</span><span class="n">amd64</span> <span class="o">]</span> <span class="nl">http:</span><span class="c1">//repository.cask.co/ubuntu/precise/amd64/releases precise releases</span>
</pre></div>
</div>
<p>Add the Cask Public GPG Key to your repository:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="nl">http:</span><span class="c1">//repository.cask.co/ubuntu/precise/amd64/releases/pubkey.gpg | sudo apt-key add -</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="installation">
<span id="id1"></span><h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>Install the CDAP packages by using either of these methods:</p>
<p>Using Yum:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">cdap</span><span class="o">-</span><span class="n">gateway</span> <span class="n">cdap</span><span class="o">-</span><span class="n">kafka</span> <span class="n">cdap</span><span class="o">-</span><span class="n">master</span> <span class="n">cdap</span><span class="o">-</span><span class="n">security</span> <span class="n">cdap</span><span class="o">-</span><span class="n">web</span><span class="o">-</span><span class="n">app</span>
</pre></div>
</div>
<p>Using APT:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">cdap</span><span class="o">-</span><span class="n">gateway</span> <span class="n">cdap</span><span class="o">-</span><span class="n">kafka</span> <span class="n">cdap</span><span class="o">-</span><span class="n">master</span> <span class="n">cdap</span><span class="o">-</span><span class="n">security</span> <span class="n">cdap</span><span class="o">-</span><span class="n">web</span><span class="o">-</span><span class="n">app</span>
</pre></div>
</div>
<p>Do this on each of the boxes that are being used for the CDAP components; our
recommended installation is a minimum of two boxes.</p>
<p>This will download and install the latest version of CDAP
with all of its dependencies. When all the packages and dependencies have been installed,
you can start the services on each of the CDAP boxes by running this command:</p>
<div class="highlight-java"><div class="highlight"><pre>for i in `ls /etc/init.d/ | grep cdap` ; do sudo service $i restart ; done
</pre></div>
</div>
<p>When all the services have completed starting, the CDAP Console should then be
accessible through a browser at port 9999. The URL will be <tt class="docutils literal"><span class="pre">http://&lt;console-ip&gt;:9999</span></tt> where
<tt class="docutils literal"><span class="pre">&lt;console-ip&gt;</span></tt> is the IP address of one of the machine where you installed the packages
and started the services.</p>
</div>
<div class="section" id="upgrading-from-a-previous-version">
<h3>Upgrading From a Previous Version<a class="headerlink" href="#upgrading-from-a-previous-version" title="Permalink to this headline">¶</a></h3>
<p>When upgrade an existing CDAP installation from a previous version, you will need
to make sure the CDAP table definitions in HBase are up-to-date.</p>
<p>These steps will stop CDAP, update the installation, run an upgrade tool for the table definitions,
and then restart CDAP.</p>
<ol class="arabic">
<li><p class="first">Stop all CDAP processes:</p>
<div class="highlight-java"><div class="highlight"><pre>for i in `ls /etc/init.d/ | grep cdap` ; do sudo service $i stop ; done
</pre></div>
</div>
</li>
<li><p class="first">Update the CDAP packages by running either of these methods:</p>
<ul>
<li><p class="first">Using Yum (on one line):</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">cdap</span> <span class="n">cdap</span><span class="o">-</span><span class="n">gateway</span>
                       <span class="n">cdap</span><span class="o">-</span><span class="n">hbase</span><span class="o">-</span><span class="n">compat</span><span class="o">-</span><span class="mf">0.94</span> <span class="n">cdap</span><span class="o">-</span><span class="n">hbase</span><span class="o">-</span><span class="n">compat</span><span class="o">-</span><span class="mf">0.96</span>
                       <span class="n">cdap</span><span class="o">-</span><span class="n">kafka</span> <span class="n">cdap</span><span class="o">-</span><span class="n">master</span>
                       <span class="n">cdap</span><span class="o">-</span><span class="n">security</span> <span class="n">cdap</span><span class="o">-</span><span class="n">web</span><span class="o">-</span><span class="n">app</span>
</pre></div>
</div>
</li>
<li><p class="first">Using APT (on one line):</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">cdap</span> <span class="n">cdap</span><span class="o">-</span><span class="n">gateway</span>
                       <span class="n">cdap</span><span class="o">-</span><span class="n">hbase</span><span class="o">-</span><span class="n">compat</span><span class="o">-</span><span class="mf">0.94</span> <span class="n">cdap</span><span class="o">-</span><span class="n">hbase</span><span class="o">-</span><span class="n">compat</span><span class="o">-</span><span class="mf">0.96</span>
                       <span class="n">cdap</span><span class="o">-</span><span class="n">kafka</span> <span class="n">cdap</span><span class="o">-</span><span class="n">master</span>
                       <span class="n">cdap</span><span class="o">-</span><span class="n">security</span> <span class="n">cdap</span><span class="o">-</span><span class="n">web</span><span class="o">-</span><span class="n">app</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Run the upgrade tool (on one line):</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">cdap</span><span class="o">/</span><span class="n">cdap</span><span class="o">-</span><span class="n">master</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">svc</span><span class="o">-</span><span class="n">master</span> <span class="n">run</span>
  <span class="n">com</span><span class="o">.</span><span class="na">cdap</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">tools</span><span class="o">.</span><span class="na">Main</span> <span class="n">upgrade</span>
</pre></div>
</div>
</li>
<li><p class="first">Restart the CDAP processes:</p>
<div class="highlight-java"><div class="highlight"><pre>for i in `ls /etc/init.d/ | grep cdap` ; do sudo service $i start ; done
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="verification">
<h3>Verification<a class="headerlink" href="#verification" title="Permalink to this headline">¶</a></h3>
<p>To verify that the CDAP software is successfully installed and you are able to use your
Hadoop cluster, run an example application.
We provide in our SDK pre-built <tt class="docutils literal"><span class="pre">.JAR</span></tt> files for convenience:</p>
<ol class="arabic simple">
<li>Download and install the latest CDAP Developer Suite from
<a class="reference external" href="http://cask.co/download">http://cask.co/download</a></li>
<li>Extract to a folder (<tt class="docutils literal"><span class="pre">CDAP_HOME</span></tt>).</li>
<li>Open a command prompt and navigate to <tt class="docutils literal"><span class="pre">CDAP_HOME/examples</span></tt>.</li>
<li>Each example folder has a <tt class="docutils literal"><span class="pre">.jar</span></tt> file in its <tt class="docutils literal"><span class="pre">target</span></tt> directory.
For verification, we will use the <tt class="docutils literal"><span class="pre">WordCount</span></tt> example.</li>
<li>Open a web browser to the CDAP Console.
It is located on port <tt class="docutils literal"><span class="pre">9999</span></tt> of the box where you installed CDAP.</li>
<li>On the Console, click the button <em>Load an App</em>.</li>
<li>Find the pre-built <tt class="docutils literal"><span class="pre">WordCount-2.5.1.jar</span></tt> using the dialog box to navigate to
<tt class="docutils literal"><span class="pre">CDAP_HOME/examples/WordCount/target/</span></tt>.</li>
<li>Once the application is deployed, instructions on running the example can be found at the
<a class="reference internal" href="getstarted.html#word-count"><em>WordCount example</em></a>.</li>
<li>You should be able to start the application, inject sentences,
run the Flow and the Procedure, and see results.</li>
<li>When finished, stop and remove the application as described in the
<a class="reference internal" href="getstarted.html#examples"><em>examples</em></a>.</li>
</ol>
</div>
</div>
<div class="section" id="security">
<span id="id2"></span><h2>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h2>
<p>Cask Data Application Platform (CDAP) supports securing clusters using a perimeter security model.  With perimeter
security, access to cluster nodes is restricted through a firewall.  Cluster nodes can communicate
with each other, but outside clients can only communicate with the cluster through a secured
host.  Using CDAP security, the CDAP authentication server issues credentials (access
tokens) to authenticated clients.  Clients then send these credentials on requests to CDAP.
Calls that lack valid access tokens will be rejected, limiting access to only authenticated
clients.</p>
<p>Authentication in CDAP consists of two components:</p>
<ul class="simple">
<li><strong>Authentication Server</strong> - the authentication server integrates with different authentication
backends (LDAP, JASPI plugins) using a plugin API.  Clients must first authenticate with the
authentication server through this configured backend.  Once authenticated, clients are issued
an access token representing their identity.</li>
<li><strong>CDAP Router</strong> - the CDAP router serves as the secured host in the perimeter security
model.  All client calls to the cluster go through the router, and must present a valid access
token when security is enabled.</li>
</ul>
<p>For more details on the authentication process, see <a class="reference internal" href="#client-authentication">Client Authentication</a>.</p>
<p>By enabling perimeter security for CDAP, you can prevent access by any clients without valid
credentials.  In addition, access logging can be enabled in CDAP to provide an audit log of all
operations.</p>
<p>We recommend that in order for CDAP to be secure, CDAP security should always be used in conjunction with
<a class="reference external" href="http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SecureMode.html">secure Hadoop clusters</a>.
In cases where secure Hadoop is not or cannot be used, it is inherently insecure and any applications
running on the cluster are effectively &#8220;trusted”. Though there is still value in having the perimeter access
be authenticated in that situation, whenever possible a secure Hadoop cluster should be employed with CDAP security.</p>
<div class="section" id="enabling-security">
<h3>Enabling Security<a class="headerlink" href="#enabling-security" title="Permalink to this headline">¶</a></h3>
<p>To enable security in CDAP, add these properties to <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="75%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>security.enabled</td>
<td>true</td>
</tr>
<tr class="row-odd"><td>security.auth.server.address</td>
<td>&lt;hostname&gt;</td>
</tr>
</tbody>
</table>
<div class="section" id="running-servers-with-ssl">
<h4>Running Servers with SSL<a class="headerlink" href="#running-servers-with-ssl" title="Permalink to this headline">¶</a></h4>
<p>To enable running servers with SSL in CDAP, add this property to <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="75%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ssl.enabled</td>
<td>true</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="default-ports">
<h4>Default Ports<a class="headerlink" href="#default-ports" title="Permalink to this headline">¶</a></h4>
<p>Without SSL:</p>
<table border="1" class="docutils">
<colgroup>
<col width="70%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>router.bind.port</td>
<td>10000</td>
</tr>
<tr class="row-odd"><td>security.auth.server.bind.port</td>
<td>10009</td>
</tr>
<tr class="row-even"><td>dashboard.bind.port</td>
<td>9999</td>
</tr>
</tbody>
</table>
<p>With SSL:</p>
<table border="1" class="docutils">
<colgroup>
<col width="71%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>router.ssl.bind.port</td>
<td>10443</td>
</tr>
<tr class="row-odd"><td>security.auth.server.ssl.bind.port</td>
<td>10010</td>
</tr>
<tr class="row-even"><td>dashboard.ssl.bind.port</td>
<td>9443</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuring-ssl-for-the-authentication-server">
<h4>Configuring SSL for the Authentication Server<a class="headerlink" href="#configuring-ssl-for-the-authentication-server" title="Permalink to this headline">¶</a></h4>
<p>To configure the granting of <tt class="docutils literal"><span class="pre">AccessToken</span></tt>s via SSL, add these properties to <tt class="docutils literal"><span class="pre">cdap-security.xml</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="20%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>security.auth.server.ssl.keystore.path</td>
<td>None</td>
<td>Keystore file location. The file should
be owned and readable only by the
CDAP user</td>
</tr>
<tr class="row-odd"><td>security.auth.server.ssl.keystore.password</td>
<td>None</td>
<td>Keystore password</td>
</tr>
<tr class="row-even"><td>security.auth.server.ssl.keystore.keypassword</td>
<td>None</td>
<td>Keystore key password</td>
</tr>
<tr class="row-odd"><td>security.auth.server.ssl.keystore.type</td>
<td>JKS</td>
<td>Keystore file type</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuring-ssl-for-the-router">
<h4>Configuring SSL for the Router<a class="headerlink" href="#configuring-ssl-for-the-router" title="Permalink to this headline">¶</a></h4>
<p>To configure SSL for the Router, add these properties to <tt class="docutils literal"><span class="pre">cdap-security.xml</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="22%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>router.ssl.keystore.path</td>
<td>None</td>
<td>Keystore file location. The file should
be owned and readable only by the
CDAP user</td>
</tr>
<tr class="row-odd"><td>router.ssl.keystore.password</td>
<td>None</td>
<td>Keystore password</td>
</tr>
<tr class="row-even"><td>router.ssl.keystore.keypassword</td>
<td>None</td>
<td>Keystore key password</td>
</tr>
<tr class="row-odd"><td>router.ssl.keystore.type</td>
<td>JKS</td>
<td>Keystore file type</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuring-ssl-for-ui">
<h4>Configuring SSL for UI<a class="headerlink" href="#configuring-ssl-for-ui" title="Permalink to this headline">¶</a></h4>
<p>To enable SSL for the Web-UI, add these properties to <tt class="docutils literal"><span class="pre">cdap-security.xml</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dashboard.ssl.cert</td>
<td>SSL cert file location. The file should
be owned and readable only by the CDAP
user</td>
</tr>
<tr class="row-odd"><td>dashboard.ssl.key</td>
<td>SSL key file location. The file should
be owned and readable only by the CDAP
user</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> To allow self signed certificates, set dashboard.ssl.disable.cert.check field to true in cdap-site.xml</p>
</div>
<div class="section" id="configuring-kerberos-required">
<h4>Configuring Kerberos (required)<a class="headerlink" href="#configuring-kerberos-required" title="Permalink to this headline">¶</a></h4>
<p>To configure Kerberos authentication for various CDAP services, add these properties to <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="22%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>kerberos.auth.enabled</td>
<td><tt class="docutils literal"><span class="pre">security.enabled</span></tt></td>
<td>true to enable Kerberos authentication</td>
</tr>
<tr class="row-odd"><td>cdap.master.kerberos.keytab</td>
<td>None</td>
<td>Kerberos keytab file location</td>
</tr>
<tr class="row-even"><td>cdap.master.kerberos.principal</td>
<td>None</td>
<td>Kerberos principal associated with
the keytab</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuring-zookeeper-required">
<h4>Configuring Zookeeper (required)<a class="headerlink" href="#configuring-zookeeper-required" title="Permalink to this headline">¶</a></h4>
<p>To configure Zookeeper to enable SASL authentication, add the following to your <tt class="docutils literal"><span class="pre">zoo.cfg</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">authProvider</span><span class="o">.</span><span class="mi">1</span><span class="o">=</span><span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">zookeeper</span><span class="o">.</span><span class="na">server</span><span class="o">.</span><span class="na">auth</span><span class="o">.</span><span class="na">SASLAuthenticationProvider</span>
<span class="n">jaasLoginRenew</span><span class="o">=</span><span class="mi">3600000</span>
<span class="n">kerberos</span><span class="o">.</span><span class="na">removeHostFromPrincipal</span><span class="o">=</span><span class="kc">true</span>
<span class="n">kerberos</span><span class="o">.</span><span class="na">removeRealmFromPrincipal</span><span class="o">=</span><span class="kc">true</span>
</pre></div>
</div>
<p>This will let Zookeeper use the <tt class="docutils literal"><span class="pre">SASLAuthenticationProvider</span></tt> as an auth provider, and the <tt class="docutils literal"><span class="pre">jaasLoginRenew</span></tt> line
will cause the Zookeeper server to renew its Kerberos ticket once an hour.</p>
<p>Then, create a <tt class="docutils literal"><span class="pre">jaas.conf</span></tt> file for your Zookeeper server:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">Server</span> <span class="o">{</span>
     <span class="n">com</span><span class="o">.</span><span class="na">sun</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">auth</span><span class="o">.</span><span class="na">module</span><span class="o">.</span><span class="na">Krb5LoginModule</span> <span class="n">required</span>
     <span class="n">useKeyTab</span><span class="o">=</span><span class="kc">true</span>
     <span class="n">keyTab</span><span class="o">=</span><span class="s">&quot;/path/to/zookeeper.keytab&quot;</span>
     <span class="n">storeKey</span><span class="o">=</span><span class="kc">true</span>
     <span class="n">useTicketCache</span><span class="o">=</span><span class="kc">false</span>
     <span class="n">principal</span><span class="o">=</span><span class="s">&quot;&lt;your-zookeeper-principal&gt;&quot;</span><span class="o">;</span>
<span class="o">};</span>
</pre></div>
</div>
<p>The keytab file must be readable by the Zookeeper server, and <tt class="docutils literal"><span class="pre">&lt;your-zookeeper-principal&gt;</span></tt> must correspond
to the keytab file.</p>
<p>Finally, start Zookeeper server with the following JVM option:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">-</span><span class="n">Djava</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">auth</span><span class="o">.</span><span class="na">login</span><span class="o">.</span><span class="na">config</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">jaas</span><span class="o">.</span><span class="na">conf</span>
</pre></div>
</div>
</div>
<div class="section" id="enabling-access-logging">
<h4>Enabling Access Logging<a class="headerlink" href="#enabling-access-logging" title="Permalink to this headline">¶</a></h4>
<p>To enable access logging, add the following to <tt class="docutils literal"><span class="pre">logback.xml</span></tt> (typically under <tt class="docutils literal"><span class="pre">/etc/cdap/conf/</span></tt>)</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;appender name=&quot;AUDIT&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;</span>
<span class="go">  &lt;file&gt;access.log&lt;/file&gt;</span>
<span class="go">  &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;</span>
<span class="go">    &lt;fileNamePattern&gt;access.log.%d{yyyy-MM-dd}&lt;/fileNamePattern&gt;</span>
<span class="go">    &lt;maxHistory&gt;30&lt;/maxHistory&gt;</span>
<span class="go">  &lt;/rollingPolicy&gt;</span>
<span class="go">  &lt;encoder&gt;</span>
<span class="go">    &lt;pattern&gt;%msg%n&lt;/pattern&gt;</span>
<span class="go">  &lt;/encoder&gt;</span>
<span class="go">&lt;/appender&gt;</span>
<span class="go">&lt;logger name=&quot;http-access&quot; level=&quot;TRACE&quot; additivity=&quot;false&quot;&gt;</span>
<span class="go">  &lt;appender-ref ref=&quot;AUDIT&quot; /&gt;</span>
<span class="go">&lt;/logger&gt;</span>

<span class="go">&lt;appender name=&quot;EXTERNAL_AUTH_AUDIT&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;</span>
<span class="go">  &lt;file&gt;external_auth_access.log&lt;/file&gt;</span>
<span class="go">  &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;</span>
<span class="go">    &lt;fileNamePattern&gt;external_auth_access.log.%d{yyyy-MM-dd}&lt;/fileNamePattern&gt;</span>
<span class="go">    &lt;maxHistory&gt;30&lt;/maxHistory&gt;</span>
<span class="go">  &lt;/rollingPolicy&gt;</span>
<span class="go">  &lt;encoder&gt;</span>
<span class="go">    &lt;pattern&gt;%msg%n&lt;/pattern&gt;</span>
<span class="go">  &lt;/encoder&gt;</span>
<span class="go">&lt;/appender&gt;</span>
<span class="go">&lt;logger name=&quot;external-auth-access&quot; level=&quot;TRACE&quot; additivity=&quot;false&quot;&gt;</span>
<span class="go">  &lt;appender-ref ref=&quot;EXTERNAL_AUTH_AUDIT&quot; /&gt;</span>
<span class="go">&lt;/logger&gt;</span>
</pre></div>
</div>
<p>You may also configure the file being logged to by changing the path under <tt class="docutils literal"><span class="pre">&lt;file&gt;...&lt;/file&gt;</span></tt>.</p>
</div>
</div>
<div class="section" id="configuring-authentication-mechanisms">
<h3>Configuring Authentication Mechanisms<a class="headerlink" href="#configuring-authentication-mechanisms" title="Permalink to this headline">¶</a></h3>
<p>CDAP provides several ways to authenticate a user&#8217;s identity.</p>
</div>
<div class="section" id="basic-authentication">
<h3>Basic Authentication<a class="headerlink" href="#basic-authentication" title="Permalink to this headline">¶</a></h3>
<p>The simplest way to identity a user is to authenticate against a realm file.
To configure basic authentication add the following properties to <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>security.authentication.handlerClassName</td>
<td>co.cask.cdap.security.server.BasicAuthenticationHandler</td>
</tr>
<tr class="row-odd"><td>security.authentication.basic.realmfile</td>
<td>&lt;path&gt;</td>
</tr>
</tbody>
</table>
<p>The realm file is of the following format:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">username: password[,rolename ...]</span>
</pre></div>
</div>
<p>Note that it is not advisable to use this method of authentication. In production, we recommend using any of the
other methods described below.</p>
<div class="section" id="ldap-authentication">
<h4>LDAP Authentication<a class="headerlink" href="#ldap-authentication" title="Permalink to this headline">¶</a></h4>
<p>You can configure CDAP to authenticate against an LDAP instance by adding these
properties to <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>security.authentication.handlerClassName</td>
<td>co.cask.cdap.security.server.LDAPAuthenticationHandler</td>
</tr>
<tr class="row-odd"><td>security.authentication.loginmodule.className</td>
<td>org.eclipse.jetty.plus.jaas.spi.LdapLoginModule</td>
</tr>
<tr class="row-even"><td>security.authentication.handler.debug</td>
<td>true/false</td>
</tr>
<tr class="row-odd"><td>security.authentication.handler.hostname</td>
<td>&lt;hostname&gt;</td>
</tr>
<tr class="row-even"><td>security.authentication.handler.port</td>
<td>&lt;port&gt;</td>
</tr>
<tr class="row-odd"><td>security.authentication.handler.userBaseDn</td>
<td>&lt;userBaseDn&gt;</td>
</tr>
<tr class="row-even"><td>security.authentication.handler.userRdnAttribute</td>
<td>&lt;userRdnAttribute&gt;</td>
</tr>
<tr class="row-odd"><td>security.authentication.handler.userObjectClass</td>
<td>&lt;userObjectClass&gt;</td>
</tr>
</tbody>
</table>
<p>In addition, you may also configure these optional properties:</p>
<table border="1" class="docutils">
<colgroup>
<col width="69%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>security.authentication.handler.bindDn</td>
<td>&lt;bindDn&gt;</td>
</tr>
<tr class="row-odd"><td>security.authentication.handler.bindPassword</td>
<td>&lt;bindPassword&gt;</td>
</tr>
<tr class="row-even"><td>security.authentication.handler.userIdAttribute</td>
<td>&lt;userIdAttribute&gt;</td>
</tr>
<tr class="row-odd"><td>security.authentication.handler.userPasswordAttribute</td>
<td>&lt;userPasswordAttribute&gt;</td>
</tr>
<tr class="row-even"><td>security.authentication.handler.roleBaseDn</td>
<td>&lt;roleBaseDn&gt;</td>
</tr>
<tr class="row-odd"><td>security.authentication.handler.roleNameAttribute</td>
<td>&lt;roleNameAttribute&gt;</td>
</tr>
<tr class="row-even"><td>security.authentication.handler.roleMemberAttribute</td>
<td>&lt;roleMemberAttribute&gt;</td>
</tr>
<tr class="row-odd"><td>security.authentication.handler.roleObjectClass</td>
<td>&lt;roleObjectClass&gt;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="java-authentication-service-provider-interface-jaspi-authentication">
<h4>Java Authentication Service Provider Interface (JASPI) Authentication<a class="headerlink" href="#java-authentication-service-provider-interface-jaspi-authentication" title="Permalink to this headline">¶</a></h4>
<p>To authenticate a user using JASPI add the following properties to <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>security.authentication.handlerClassName</td>
<td>co.cask.cdap.security.server.JASPIAuthenticationHandler</td>
</tr>
<tr class="row-odd"><td>security.authentication.loginmodule.className</td>
<td>&lt;custom-login-module&gt;</td>
</tr>
</tbody>
</table>
<p>In addition, any properties with the prefix <tt class="docutils literal"><span class="pre">security.authentication.handler.</span></tt>,
such as <tt class="docutils literal"><span class="pre">security.authentication.handler.hostname</span></tt>, will also be used by the handler.
These properties, without the prefix, will be used to instantiate the <tt class="docutils literal"><span class="pre">javax.security.auth.login.Configuration</span></tt> used
by the <tt class="docutils literal"><span class="pre">LoginModule</span></tt>.</p>
</div>
<div class="section" id="custom-authentication">
<h4>Custom Authentication<a class="headerlink" href="#custom-authentication" title="Permalink to this headline">¶</a></h4>
<p>To provide a custom authentication mechanism you may create your own <tt class="docutils literal"><span class="pre">AuthenticationHandler</span></tt> by overriding
<tt class="docutils literal"><span class="pre">AbstractAuthenticationHandler</span></tt> and implementing the abstract methods.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomAuthenticationHandler</span> <span class="kd">extends</span> <span class="n">AbstractAuthenticationHandler</span> <span class="o">{</span>

  <span class="nd">@Inject</span>
  <span class="kd">public</span> <span class="nf">CustomAuthenticationHandler</span><span class="o">(</span><span class="n">CConfiguration</span> <span class="n">configuration</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">configuration</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="n">LoginService</span> <span class="nf">getHandlerLoginService</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="n">IdentityService</span> <span class="nf">getHandlerIdentityService</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="n">Configuration</span> <span class="nf">getLoginModuleConfiguration</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To make your custom handler class available to the authentication service, copy your packaged jar file (and any
additional dependency jars) to the <tt class="docutils literal"><span class="pre">security/lib/</span></tt> directory within your CDAP installation
(typically under <tt class="docutils literal"><span class="pre">/opt/cdap</span></tt>).</p>
</div>
</div>
<div class="section" id="example-configuration">
<h3>Example Configuration<a class="headerlink" href="#example-configuration" title="Permalink to this headline">¶</a></h3>
<p>This is what your <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> could include when configured to enable security, SSL, and
authentication using LDAP:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.enabled<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="c">&lt;!-- SSL configuration --&gt;</span>
<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.server.ssl.enabled<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.server.ssl.keystore.path<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>/home/john/keystore.jks<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;description&gt;</span>Path to the SSL keystore.<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.server.ssl.keystore.password<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>password<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;description&gt;</span>Password for the SSL keystore.<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="c">&lt;!-- LDAP configuration --&gt;</span>
<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.authentication.handlerClassName<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>co.cask.cdap.security.server.LDAPAuthenticationHandler<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.authentication.loginmodule.className<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>org.eclipse.jetty.plus.jaas.spi.LdapLoginModule<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.authentication.handler.debug<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="c">&lt;!--</span>
<span class="c">  Override the following properties to use your LDAP server.</span>
<span class="c">  Any optional parameters, as described above, may also be included.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.authentication.handler.hostname<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>example.com<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;description&gt;</span>Hostname of the LDAP server.<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.authentication.handler.port<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>389<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;description&gt;</span>Port number of the LDAP server.<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.authentication.handler.userBaseDn<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>ou=people,dc=example<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.authentication.handler.userRdnAttribute<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>cn<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>security.authentication.handler.userObjectClass<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>inetorgperson<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-security">
<h3>Testing Security<a class="headerlink" href="#testing-security" title="Permalink to this headline">¶</a></h3>
<p>From here on out we will use:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;base-url&gt;</span>
</pre></div>
</div>
<p>to represent the base URL that clients can use for the HTTP REST API:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">http://&lt;host&gt;:&lt;port&gt;</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;base-auth-url&gt;</span>
</pre></div>
</div>
<p>to represent the base URL that clients can use for obtaining access tokens:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">http://&lt;host&gt;:&lt;auth-port&gt;</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">&lt;host&gt;</span></tt> is the host name of the CDAP server, <tt class="docutils literal"><span class="pre">&lt;port&gt;</span></tt> is the port that is set as the <tt class="docutils literal"><span class="pre">router.bind.port</span></tt>
in <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> (default: <tt class="docutils literal"><span class="pre">10000</span></tt>), and <tt class="docutils literal"><span class="pre">&lt;auth-port&gt;</span></tt> is the port that is set as the
<tt class="docutils literal"><span class="pre">security.auth.server.bind.port</span></tt> (default: <tt class="docutils literal"><span class="pre">10009</span></tt>).</p>
<p>Note that if SSL is enabled for CDAP, then the base URL uses <tt class="docutils literal"><span class="pre">https</span></tt>, <tt class="docutils literal"><span class="pre">&lt;port&gt;</span></tt> becomes the port that is set
as the <tt class="docutils literal"><span class="pre">router.ssl.bind.port</span></tt> in <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> (default: <tt class="docutils literal"><span class="pre">10443</span></tt>), and <tt class="docutils literal"><span class="pre">&lt;auth-port&gt;</span></tt> becomes the port that
is set as the <tt class="docutils literal"><span class="pre">security.auth.server.ssl.bind.port</span></tt> (default: <tt class="docutils literal"><span class="pre">10010</span></tt>).</p>
<p>To ensure that you&#8217;ve configured security correctly, run these simple tests to verify that the
security components are working as expected:</p>
<ul>
<li><p class="first">After configuring CDAP as described above, restart CDAP and attempt to use a service:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v &lt;base-url&gt;/apps</span>
</pre></div>
</div>
</li>
<li><p class="first">This should return a 401 Unauthorized response. Submit a username and password to obtain an <tt class="docutils literal"><span class="pre">AccessToken</span></tt>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v -u username:password &lt;base-auth-url&gt;/token</span>
</pre></div>
</div>
</li>
<li><p class="first">This should return a 200 OK response with the <tt class="docutils literal"><span class="pre">AccessToken</span></tt> string in the response body.
Reattempt the first command, but this time include the <tt class="docutils literal"><span class="pre">AccessToken</span></tt> as a header in the command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v -H &quot;Authorization: Bearer &lt;AccessToken&gt;&quot; &lt;base-url&gt;/apps</span>
</pre></div>
</div>
</li>
<li><p class="first">This should return a 200 OK response.</p>
</li>
<li><p class="first">Visiting the CDAP Console should redirect you to a login page that prompts for credentials.
Entering the credentials should let you work with the CDAP Console as normal.</p>
</li>
</ul>
</div>
<div class="section" id="client-authentication">
<h3>Client Authentication<a class="headerlink" href="#client-authentication" title="Permalink to this headline">¶</a></h3>
<p>CDAP provides support for authenticating clients using OAuth 2 Bearer tokens, which are issued
by the CDAP authentication server.  The authentication server provides the integration point
for all external authentication systems.  Clients authenticate with the authentication server as
follows:</p>
<a class="reference internal image-reference" href="_images/auth_flow_simple.png"><img alt="_images/auth_flow_simple.png" class="align-center" src="_images/auth_flow_simple.png" style="width: 7in;" /></a>
<ol class="arabic simple">
<li>Client initiates authentication, supplying credentials.</li>
<li>Authentication server validates supplied credentials against an external identity service,
according to configuration (LDAP, Active Directory, custom).<ol class="loweralpha">
<li>If validation succeeds, the authentication server returns an Access Token to the client.</li>
<li>If validation fails, the authentication server returns a failure message, at which point
the client can retry.</li>
</ol>
</li>
<li>The client stores the resulting Access Token and supplies it in subsequent requests.</li>
<li>CDAP processes validate the supplied Access Token on each request.<ol class="loweralpha">
<li>If validation succeeds, processing continues to authorization.</li>
<li>If the submitted token is invalid, an &#8220;invalid token&#8221; error is returned.</li>
<li>If the submitted token is expired, an &#8220;expired token&#8221; error is returned.  In this case, the
client should restart authorization from step #1.</li>
</ol>
</li>
</ol>
<div class="section" id="obtaining-an-access-token">
<h4>Obtaining an Access Token<a class="headerlink" href="#obtaining-an-access-token" title="Permalink to this headline">¶</a></h4>
<p>Obtain a new access token by calling:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-auth-url&gt;/token</span>
</pre></div>
</div>
<p>The required header and request parameters may vary according to the
external authentication mechanism that has been configured.  For username and password based mechanisms, the
<tt class="docutils literal"><span class="pre">Authorization</span></tt> header may be used:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span>
</pre></div>
</div>
<div class="section" id="http-responses">
<h5>HTTP Responses<a class="headerlink" href="#http-responses" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>Authentication was successful and an access token will be returned</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">401</span> <span class="pre">Unauthorized</span></tt></td>
<td>Authentication failed</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="success-response-fields">
<h5>Success Response Fields<a class="headerlink" href="#success-response-fields" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Response Fields</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">access_token</span></tt></td>
<td>The Access Token issued for the client.  The serialized token contents are base-64 encoded
for safe transport over HTTP.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">token_type</span></tt></td>
<td>In order to conform with the OAuth 2.0 Bearer Token Usage specification (<a class="reference external" href="http://tools.ietf.org/html/rfc6750">RFC 6750</a>), this
value must be &#8220;Bearer&#8221;.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">expires_in</span></tt></td>
<td>Token validity lifetime in seconds.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h5>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<p>Sample request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-auth-url&gt;/token HTTP/1.1</span>
<span class="go">Host: server.example.com</span>
<span class="go">Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span>
</pre></div>
</div>
<p>Sample response:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">HTTP/1.1 200 OK</span>
<span class="go">Content-Type: application/json;charset=UTF-8</span>
<span class="go">Cache-Control: no-store</span>
<span class="go">Pragma: no-cache</span>

<span class="go">{</span>
<span class="go">  &quot;access_token&quot;:&quot;2YotnFZFEjr1zCsicMWpAA&quot;,</span>
<span class="go">  &quot;token_type&quot;:&quot;Bearer&quot;,</span>
<span class="go">  &quot;expires_in&quot;:3600,</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="comments">
<h5>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>Only <tt class="docutils literal"><span class="pre">Bearer</span></tt> tokens (<a class="reference external" href="http://tools.ietf.org/html/rfc6750">RFC 6750</a>) are currently supported</li>
</ul>
</div>
</div>
<div class="section" id="authentication-with-restful-endpoints">
<h4>Authentication with RESTful Endpoints<a class="headerlink" href="#authentication-with-restful-endpoints" title="Permalink to this headline">¶</a></h4>
<p>When security is enabled on a CDAP cluster, only requests with a valid access token will be
allowed by CDAP.  Clients accessing CDAP RESTful endpoints will first need to obtain an access token
from the authentication server, as described above, which will be passed to the Router daemon on
subsequent HTTP requests.</p>
<p>The following request and response descriptions apply to all CDAP RESTful endpoints:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/&lt;resource&gt; HTTP/1.1</span>
</pre></div>
</div>
<p>In order to authenticate, all client requests must supply the <tt class="docutils literal"><span class="pre">Authorization</span></tt> header:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">Authorization: Bearer wohng8Xae7thahfohshahphaeNeeM5ie</span>
</pre></div>
</div>
<p>For CDAP issued access tokens, the authentication scheme must always be <tt class="docutils literal"><span class="pre">Bearer</span></tt>.</p>
<div class="section" id="id5">
<h5>HTTP Responses<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>Authentication was successful and an access token will be returned</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">401</span> <span class="pre">Unauthorized</span></tt></td>
<td>Authentication failed</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">403</span> <span class="pre">Forbidden</span></tt></td>
<td>Authentication succeeded, but access to the requested resource was denied</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="error-response-fields">
<h5>Error Response Fields<a class="headerlink" href="#error-response-fields" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Response Fields</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">error</span></tt></td>
<td>An error code describing the type of failure (see <a class="reference internal" href="#error-code-values">Error Code Values</a>)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">error_description</span></tt></td>
<td>A human readable description of the error that occurred</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">auth_uri</span></tt></td>
<td>List of URIs for running authentication servers.  If a client receives a <tt class="docutils literal"><span class="pre">401</span>
<span class="pre">Unauthorized</span></tt> response, it can use one of the values from this list to request a new
access token.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="error-code-values">
<h5>Error Code Values<a class="headerlink" href="#error-code-values" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Response Fields</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">invalid_request</span></tt></td>
<td>The request is missing a required parameter or is otherwise malformed</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">invalid_token</span></tt></td>
<td>The supplied access token is expired, malformed, or otherwise invalid.  The client may
request a new access token from the authorization server and try the call again.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">insufficient_scope</span></tt></td>
<td>The supplied access token was valid, but the authenticated identity failed authorization
for the requested resource</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id6">
<h5>Example<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<p>A sample request and responses for different error conditions are shown below.  Header values are
wrapped for display purposes.</p>
<p>Request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/resource HTTP/1.1</span>
<span class="go">Host: server.example.com</span>
<span class="go">Authorization: Bearer wohng8Xae7thahfohshahphaeNeeM5ie</span>
</pre></div>
</div>
<p>Missing token:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">HTTP/1.1 401 Unauthorized</span>
<span class="go">WWW-Authenticate: Bearer realm=&quot;example&quot;</span>

<span class="go">{</span>
<span class="go">  &quot;auth_uri&quot;: [&quot;https://server.example.com:10010/token&quot;]</span>
<span class="go">}</span>
</pre></div>
</div>
<p>Invalid or expired token:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">HTTP/1.1 401 Unauthorized</span>
<span class="go">WWW-Authenticate: Bearer realm=&quot;example&quot;,</span>
<span class="go">                    error=&quot;invalid_token&quot;,</span>
<span class="go">                    error_description=&quot;The access token expired&quot;</span>

<span class="go">{</span>
<span class="go">  &quot;error&quot;: &quot;invalid_token&quot;,</span>
<span class="go">  &quot;error_description&quot;: &quot;The access token expired&quot;,</span>
<span class="go">  &quot;auth_uri&quot;: [&quot;https://server.example.com:10010/token&quot;]</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h5>Comments<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">auth_uri</span></tt> value in the error responses indicates where the authentication server(s) are
running, allowing clients to discover instances from which they can obtain access tokens.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="monitoring">
<h2>Monitoring<a class="headerlink" href="#monitoring" title="Permalink to this headline">¶</a></h2>
<p>CDAP collects logs and metrics for all of its internal services. Being able to view these details can be really
helpful in debugging CDAP Applications as well as analyzing their performance. CDAP gives access to its logs, metrics,
and other monitoring information through REST APIs as well as a Java Client.</p>
<p>See the <a class="reference internal" href="api.html#logginghttp"><em>Logging</em></a>, <a class="reference internal" href="api.html#metricshttp"><em>Metrics</em></a>,
and <a class="reference internal" href="api.html#monitorhttp"><em>Monitoring</em></a> HTTP APIs for more information.</p>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>Here are some selected examples of potential problems and possible resolutions.</p>
<div class="section" id="application-won-t-start">
<h3>Application Won&#8217;t Start<a class="headerlink" href="#application-won-t-start" title="Permalink to this headline">¶</a></h3>
<p>Check HDFS write permissions. It should show an obvious exception in the YARN logs.</p>
</div>
<div class="section" id="no-metrics-logs">
<h3>No Metrics/logs<a class="headerlink" href="#no-metrics-logs" title="Permalink to this headline">¶</a></h3>
<p>Make sure the <em>Kafka</em> server is running, and make sure local the logs directory is created and accessible.
On the initial startup, the number of available seed brokers must be greater than or equal to the
<em>Kafka</em> default replication factor.</p>
<p>In a two-box setup with a replication factor of two, if one box fails to startup,
metrics will not show up though the application will still run:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">[2013-10-10 20:48:46,160] ERROR [KafkaApi-1511941310]</span>
<span class="go">      Error while retrieving topic metadata (kafka.server.KafkaApis)</span>
<span class="go">      kafka.admin.AdministrationException:</span>
<span class="go">             replication factor: 2 larger than available brokers: 1</span>
</pre></div>
</div>
</div>
<div class="section" id="only-the-first-flowlet-showing-activity">
<h3>Only the First Flowlet Showing Activity<a class="headerlink" href="#only-the-first-flowlet-showing-activity" title="Permalink to this headline">¶</a></h3>
<p>Check that YARN has the capacity to start any of the remaining containers.</p>
</div>
<div class="section" id="yarn-application-shows-accepted-for-some-time-but-then-fails">
<h3>YARN Application Shows ACCEPTED For Some Time But Then Fails<a class="headerlink" href="#yarn-application-shows-accepted-for-some-time-but-then-fails" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s possible that YARN can&#8217;t extract the .JARs to the <tt class="docutils literal"><span class="pre">/tmp</span></tt>,
either due to a lack of disk space or permissions.</p>
</div>
<div class="section" id="log-saver-process-throws-an-out-of-memory-error-cdap-console-shows-service-not-ok">
<h3>Log Saver Process Throws an Out-of-Memory Error, CDAP Console Shows Service Not OK<a class="headerlink" href="#log-saver-process-throws-an-out-of-memory-error-cdap-console-shows-service-not-ok" title="Permalink to this headline">¶</a></h3>
<p>The CDAP Log Saver uses an internal buffer that may overflow and result in Out-of-Memory
Errors when applications create excessive amounts of logs. One symptom of this is that the CDAP
Console <em>Services Explorer</em> shows the <tt class="docutils literal"><span class="pre">log.saver</span></tt> Service as not OK, in addition to seeing error
messages in the logs.</p>
<p>By default, the buffer keeps 8 seconds of logs in memory and the Log Saver process is limited to 1GB of
memory. When it&#8217;s expected that logs exceeding these settings will be produced, increase the memory
allocated to the Log Saver or increase the number of Log Saver instances. If the cluster has limited
memory or containers available, you can choose instead to decrease the duration of logs buffered in
memory. However, decreasing the buffer duration may lead to out-of-order log events.</p>
<p>In the <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt>, you can:</p>
<ul class="simple">
<li>Increase the memory by adjusting <tt class="docutils literal"><span class="pre">log.saver.run.memory.megs</span></tt>;</li>
<li>Increase the number of Log Saver instances using <tt class="docutils literal"><span class="pre">log.saver.num.instances</span></tt>; and</li>
<li>Adjust the duration of logs with <tt class="docutils literal"><span class="pre">log.saver.event.processing.delay.ms</span></tt>.</li>
</ul>
<p>Note that it is recommended that <tt class="docutils literal"><span class="pre">log.saver.event.processing.delay.ms</span></tt> always be kept greater than
<tt class="docutils literal"><span class="pre">log.saver.event.bucket.interval.ms</span></tt> by at least a few hundred (300-500) milliseconds.</p>
<p>See the <tt class="docutils literal"><span class="pre">log.saver</span></tt> parameter section of the <a class="reference external" href="#appendix">Appendix</a> for a list of these
configuration parameters and their values that can be adjusted.</p>
<p><strong>Introduction to Running Applications and Operating the Cask Data Application Platform (CDAP)</strong></p>
</div>
</div>
<div class="section" id="putting-cdap-into-production">
<h2>Putting CDAP into Production<a class="headerlink" href="#putting-cdap-into-production" title="Permalink to this headline">¶</a></h2>
<p>The Cask Data Application Platform (CDAP) can be run in different modes: in-memory mode for unit testing,
Standalone CDAP for testing on a developer&#8217;s laptop, and Distributed CDAP for staging and production.</p>
<p>Regardless of the runtime edition, CDAP is fully functional and the code you develop never changes.
However, performance and scale are limited when using in-memory or standalone CDAPs.</p>
<div class="section" id="in-memory-cdap">
<h3>In-memory CDAP<a class="headerlink" href="#in-memory-cdap" title="Permalink to this headline">¶</a></h3>
<p>The in-memory CDAP allows you to easily run CDAP for use in unit tests. In this mode, the underlying Big Data infrastructure is emulated using in-memory data structures and there is no persistence. The CDAP Console is not available in this mode.</p>
</div>
<div class="section" id="standalone-cdap">
<h3>Standalone CDAP<a class="headerlink" href="#standalone-cdap" title="Permalink to this headline">¶</a></h3>
<p>The Standalone CDAP allows you to run the entire CDAP stack in a single Java Virtual Machine on your local machine and includes a local version of the CDAP Console. The underlying Big Data infrastructure is emulated on top of your local file system. All data is persisted.</p>
<p>The Standalone CDAP by default binds to the localhost address, and is not available for remote access by any outside process or application outside of the local machine.</p>
<p>See the <a class="reference internal" href="getstarted.html#get-started"><em>Getting Started Guide</em></a> and
the <em>Cask Data Application Platform SDK</em> for information on how to start and manage your Standalone CDAP.</p>
</div>
<div class="section" id="distributed-data-application-platform">
<h3>Distributed Data Application Platform<a class="headerlink" href="#distributed-data-application-platform" title="Permalink to this headline">¶</a></h3>
<p>The Distributed CDAP runs in fully distributed mode. In addition to the system components of the CDAP, distributed and highly available deployments of the underlying Hadoop infrastructure are included. Production applications should always be run on a Distributed CDAP.</p>
<p>To learn more about getting your own Distributed CDAP, see <a class="reference external" href="http://cask.co/products">Cask Products</a>.</p>
</div>
</div>
<div class="section" id="cdap-console">
<span id="console"></span><h2>CDAP Console<a class="headerlink" href="#cdap-console" title="Permalink to this headline">¶</a></h2>
<div class="section" id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>The <strong>CDAP Console</strong> is available for deploying, querying and managing the Cask Data Application Platform in all modes of CDAP except an
<a class="reference external" href="#in-memory-data-application-platform">In-memory CDAP</a>.</p>
<a class="reference internal image-reference" href="_images/console_01_overview.png"><img alt="_images/console_01_overview.png" src="_images/console_01_overview.png" style="width: 600px;" /></a>
<p>Here is a screen-capture of the CDAP Console running on a Distributed CDAP.</p>
<p>Down the left sidebar, underneath the <strong>Cask</strong> logo, is the CDAP mode identifier (in this case, <em>Distributed CDAP</em>), followed by four buttons:
<em>Application</em>, <a class="reference internal" href="#process">Process</a>, <a class="reference internal" href="#store">Store</a> and <a class="reference internal" href="#query">Query</a>. These buttons gives you access to CDAP Console facilities for managing each of these CDAP elements.</p>
<p>In the far upper-right are two buttons: the <a class="reference external" href="#metrics-explorer">Metrics</a> and
<a class="reference external" href="#services-explorer">Services</a> buttons, which take you to their respective explorers.</p>
<p id="sampling-menu">In the upper right portion of the display is a menu and, in the Distributed version of
CDAP, two buttons (<em>CDAP</em> and <em>Resources</em>).
The menu is the <strong>Sampling Menu</strong>, which appears on almost every pane of the
CDAP Console.</p>
<p>The menu determines how much data is sampled in the presentation shown on the CDAP Console in
realtime:</p>
<a class="reference internal image-reference" href="_images/console_10_app_crawler_detail_menu.png"><img alt="_images/console_10_app_crawler_detail_menu.png" src="_images/console_10_app_crawler_detail_menu.png" style="width: 200px;" /></a>
<p>By default, the sampling menu is set at &#8220;Last 1 Minute&#8221;, indicating that the graphs are showing
the last one minute of activity. Be aware that changing the menu to a longer period (such as &#8220;Last
1 Hour&#8221;) can adversely affect the performance of the CDAP Instance and should only be used for short sessions before returning the setting to the default &#8220;Last 1 Minute&#8221;.</p>
<p>This starting overview, showing which Applications (<em>Apps</em>) are currently
installed, and realtime graphs of <em>Collect</em>, <em>Process</em>, <em>Store</em>, and <em>Query</em>.
Each statistic is per unit of time—events per second, bytes (or larger) per second, queries per second—and
are sampled and reported based on the sampling menu in the upper right. (In Distributed CDAP, this starting overview can be reached by the <strong>CDAP</strong> button.)</p>
<p>The lower portion of the screen shows all the Apps along with their name, description, and what is happening with each:</p>
<ul class="simple">
<li><em>Collect</em>, the number of Streams consumed by the Application;</li>
<li><em>Process</em>, the number of Flows created by the Application;</li>
<li><em>Store</em>, the number of DataStores used by the Application;</li>
<li><em>Query</em>, the number of Procedures in the Application; and</li>
<li><em>Busyness</em>, the percentage of time spent processing events by the Application.</li>
</ul>
<p id="busyness">Busyness—the percentage of time spent processing events—is a concept that is used extensively in the CDAP Console.</p>
<p>Clicking on the name of an Application will take you to the <a class="reference external" href="#application">App&#8217;s pane</a>, with details about the application.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">Because of the interconnections in the CDAP Console, you can arrive at the same pane by different paths.
Remember that the left pane buttons will always take you back to the initial summary panes.</td>
</tr>
</tbody>
</table>
<p>The <strong>Resources</strong> button (available in Distributed CDAP) gives a look at what is being used by the CDAP:</p>
<a class="reference internal image-reference" href="_images/console_02_overview_resources.png"><img alt="_images/console_02_overview_resources.png" src="_images/console_02_overview_resources.png" style="width: 600px;" /></a>
<p>Once again, the top half shows four different elements, all in realtime:
<em>AppFabric</em> consumption (in Yarn containers),
<em>Processors</em> used (in the number of cores),
<em>Memory</em> consumption (total bytes available and used memory), and
<em>DataFabric</em> storage (total bytes available and used disk space).</p>
<p><em>Containers</em> refers to the number of Yarn containers; for example, each Flowlet instance uses a single container.</p>
<p>Statistics and graphs are sampled based on the setting of the sampling menu in the upper-right.</p>
<p>The lower half shows the list of deployed applications, their descriptions, along with each app&#8217;s container, core and memory use in realtime.</p>
<p>The triangles to the left of each application turn to reveal the hierarchy of resources being used by each application&#8217;s Flows and Flowlets. You can use this tree to drill down into any part of the CDAP.</p>
<p>The footer of each pane gives—below the <em>Cask Data, Inc.</em> copyright—five buttons
and the version of the CDAP that you are using.</p>
<p id="reset">The five buttons provide access to the <a class="reference external" href="http://cask.co/terms">terms of use</a>,
the <a class="reference external" href="http://cask.co/privacy">privacy policy</a>,
contacting <a class="reference external" href="http://cask.co/company/#company-contact">Cask</a>,
contacting Cask support, and <em>Reset</em>, for resetting the CDAP.</p>
<p><em>Reset</em> deletes all data and applications from the
CDAP, is irreversible, and returns the CDAP to an original state. The button is only visible and
available if the CDAP has been started with the system property <tt class="docutils literal"><span class="pre">enable.unrecoverable.reset</span></tt> as <tt class="docutils literal"><span class="pre">true</span></tt>.</p>
</div>
<div class="section" id="metrics-explorer">
<h3>Metrics Explorer<a class="headerlink" href="#metrics-explorer" title="Permalink to this headline">¶</a></h3>
<p>In the top portion of the <a class="reference external" href="#console">Overview image</a> you can see the <strong>Metrics</strong> button, which takes you to the <em>Metrics Explorer:</em></p>
<a class="reference internal image-reference" href="_images/console_18_metrics_explorer1.png"><img alt="_images/console_18_metrics_explorer1.png" src="_images/console_18_metrics_explorer1.png" style="width: 600px;" /></a>
<p>Here you can monitor a variety of different statistics for elements of the CDAP.
You add a metric by clicking the <em>Add</em> button; it will give you a dialog
where you can specify an element and then pick from a list of appropriate metrics.</p>
<a class="reference internal image-reference" href="_images/console_20_metrics_explorer3.png"><img alt="_images/console_20_metrics_explorer3.png" src="_images/console_20_metrics_explorer3.png" style="width: 200px;" /></a>
<p>As with other CDAP Console realtime graphs, you specify the sampling rate through a pop-down menu in the
upper-right. You can <em>Pause</em> the sampling to prevent excessive load on the CDAP.</p>
<p>If you move your mouse over the graph, you will get detailed information about the statistics presented:</p>
<a class="reference internal image-reference" href="_images/console_19_metrics_explorer2.png"><img alt="_images/console_19_metrics_explorer2.png" src="_images/console_19_metrics_explorer2.png" style="width: 600px;" /></a>
</div>
<div class="section" id="system-services-explorer">
<h3>System Services Explorer<a class="headerlink" href="#system-services-explorer" title="Permalink to this headline">¶</a></h3>
<p>In the top portion of the <a class="reference external" href="#console">Overview image</a>, to the right of the <strong>Metrics</strong> button is the
<strong>Services</strong> button, which takes you to the <em>Services Explorer:</em></p>
<a class="reference internal image-reference" href="_images/console_31_services_explorer.png"><img alt="_images/console_31_services_explorer.png" src="_images/console_31_services_explorer.png" style="width: 600px;" /></a>
<p>Here you can monitor a variety of different System Services of the CDAP. For each service name, status
is given, if logs are available (and link to them if so), the number of instances requested and
provisioned.</p>
</div>
<div class="section" id="collect">
<span id="id8"></span><h3>Collect<a class="headerlink" href="#collect" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="_images/console_03_collect.png"><img alt="_images/console_03_collect.png" src="_images/console_03_collect.png" style="width: 600px;" /></a>
<p>The <strong>Collect</strong> pane shows all the Streams collecting data and their details: name, storage, number of events and the arrival rate, with a graph showing arrivals based on the sampling rate menu setting.</p>
<p id="stream">Clicking on a Stream&#8217;s name will take you to the Stream&#8217;s pane:</p>
<a class="reference internal image-reference" href="_images/console_21_stream.png"><img alt="_images/console_21_stream.png" src="_images/console_21_stream.png" style="width: 600px;" /></a>
<p>The Stream pane shows the details of the number of events per second currently in the Stream,
the storage and a graph of events over the last sampling period, and a list of all the Flows
that are attached to the Stream, with processing rate and <a class="reference internal" href="#busyness">busyness</a> for each Flow.
Clicking on a Flow name will take you to that <a class="reference external" href="#flow">Flow&#8217;s pane</a>.</p>
</div>
<div class="section" id="process">
<span id="id9"></span><h3>Process<a class="headerlink" href="#process" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="_images/console_04_process.png"><img alt="_images/console_04_process.png" src="_images/console_04_process.png" style="width: 600px;" /></a>
<p>The <strong>Process</strong> pane shows all the
<a class="reference external" href="#flow">Flows</a>,
<a class="reference external" href="#mapreduce">MapReduce</a> and
<a class="reference external" href="#workflow">Workflows</a> in the CDAP
with their name and status (either <em>Running</em> or <em>Stopped</em>).
Each name links to the individual elements detail pane.
Graphs show statistics based on the sampling rate menu setting.</p>
<p>In the case of Flows, it shows the processing rate in events per second and <a class="reference internal" href="#busyness">busyness</a>. For MapReduce, it shows the mapping status and the reducing status.</p>
</div>
<div class="section" id="store">
<span id="id10"></span><h3>Store<a class="headerlink" href="#store" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="_images/console_05_store.png"><img alt="_images/console_05_store.png" src="_images/console_05_store.png" style="width: 600px;" /></a>
<p>The <strong>Store</strong> pane shows all the Datasets currently specified in the CDAP, along with their name
(a link to the detail pane for the Dataset), type (the Java class), storage in use,
a realtime write-rate graph and the current write rate (bytes per second). It has button that accesses the
<a class="reference internal" href="#dataset-explorer">Dataset Explorer</a>.</p>
<div class="section" id="dataset-explorer">
<h4>Dataset Explorer<a class="headerlink" href="#dataset-explorer" title="Permalink to this headline">¶</a></h4>
<p>From within the <a class="reference internal" href="#store">Store</a> pane you can access the Dataset Explorer, which allows for SQL-like
queries of the datasets&#8217; underlying Hive tables. Details on the requirements for formulating and
performing these queries can be found in the Developer Guide <a class="reference internal" href="dev-guide.html#data-explore"><em>Data Exploration</em></a>.</p>
<p>Using the information supplied for each Hive table (schema, keys, properties) you can generate a
SQL-like query and then execute it.</p>
<a class="reference internal image-reference" href="_images/console_33_query_explorer.png"><img alt="_images/console_33_query_explorer.png" src="_images/console_33_query_explorer.png" style="width: 600px;" /></a>
<p>When the query has completed, it will be listed on the <em>Results</em> pane of the Explorer. The results
can either be viewed directly or downloaded to your computer.</p>
<a class="reference internal image-reference" href="_images/console_35_query_explorer.png"><img alt="_images/console_35_query_explorer.png" src="_images/console_35_query_explorer.png" style="width: 600px;" /></a>
<p>Double-clicking on the results will reveal them in the browser:</p>
<a class="reference internal image-reference" href="_images/console_37_query_explorer.png"><img alt="_images/console_37_query_explorer.png" src="_images/console_37_query_explorer.png" style="width: 600px;" /></a>
<p>If no results are available, the &#8220;Download&#8221; icon will be greyed-out and hovering over it will display a
message &#8220;Results Not Available&#8221;.</p>
<a class="reference internal image-reference" href="_images/console_36_query_explorer.png"><img alt="_images/console_36_query_explorer.png" src="_images/console_36_query_explorer.png" style="width: 600px;" /></a>
</div>
</div>
<div class="section" id="query">
<span id="id11"></span><h3>Query<a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="_images/console_06_query.png"><img alt="_images/console_06_query.png" src="_images/console_06_query.png" style="width: 600px;" /></a>
<p>The <strong>Query</strong> pane shows all the Procedures currently specified in the CDAP, along with their name
(a link to the detail pane for the Procedure), status and realtime graphs
of their request and error rates.</p>
</div>
<div class="section" id="application">
<span id="id12"></span><h3>Application<a class="headerlink" href="#application" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="_images/console_14_app_crawler.png"><img alt="_images/console_14_app_crawler.png" src="_images/console_14_app_crawler.png" style="width: 600px;" /></a>
<p>The Application pane shows details for an individual application deployed in the CDAP:</p>
<ul class="simple">
<li><strong>Summary graphs:</strong> across the top, left to right, a summary of events per second processed,
<a class="reference internal" href="#busyness">busyness</a> and storage;</li>
<li><strong>Collect:</strong> Streams, with name (a link to details) and summary statistics;</li>
<li><strong>Process:</strong> Flows, with name (a link to details), summary statistics,
and a management button to start and stop all the Flows associated with this app;</li>
<li><strong>Store:</strong> Datasets defined by this Application, with name (a link to details)
and summary statistics; and</li>
<li><strong>Query:</strong> Procedures, with name (a link to details) and summary statistics,
and a management button to start and stop all the Procedures associated with this app;</li>
<li><strong>Service:</strong> Services, with name (a link to details) and number of components,
and a management button to start and stop all the Services associated with this app.</li>
</ul>
<div class="section" id="deleting-an-application">
<h4>Deleting an Application<a class="headerlink" href="#deleting-an-application" title="Permalink to this headline">¶</a></h4>
<p>The button in the upper right of the pane allows you to delete the current Application:</p>
<a class="reference internal image-reference" href="_images/console_22_app_crawler_detail_delete.png"><img alt="_images/console_22_app_crawler_detail_delete.png" src="_images/console_22_app_crawler_detail_delete.png" style="width: 200px;" /></a>
<p>However, before an Application can be deleted, all Process—Flows and MapReduce Jobs—and Queries (Procedures), must be stopped.
An error message will be given if you attempt to delete an Application with running components.</p>
<p>Note that Streams and Datasets, even though they are specified and created at the time of deployment of the Application,
are persistent and are not deleted when an Application is deleted.</p>
<p>To delete these, the CDAP needs to be reset using the <a class="reference external" href="#reset">Reset button</a> located at the bottom of each pane.</p>
</div>
</div>
<div class="section" id="flow">
<span id="id13"></span><h3>Flow<a class="headerlink" href="#flow" title="Permalink to this headline">¶</a></h3>
<p>Each Flow has a management pane, which shows the status, log and history of a Flow.</p>
<div class="section" id="flow-status">
<h4>Flow Status<a class="headerlink" href="#flow-status" title="Permalink to this headline">¶</a></h4>
<p>Start by looking at the status of a Flow:</p>
<a class="reference internal image-reference" href="_images/console_07_app_crawler_flow_rss.png"><img alt="_images/console_07_app_crawler_flow_rss.png" src="_images/console_07_app_crawler_flow_rss.png" style="width: 600px;" /></a>
<p>It shows all of the Streams and Flowlets of the Flow with their connections and icons arranged in a
directed acyclic graph or DAG.</p>
<p>Across the top are two realtime graphs of processing rate and <a class="reference internal" href="#busyness">busyness</a> with
current Flow status and management controls.</p>
<a class="reference internal image-reference" href="_images/console_11_app_crawler_detail.png"><img alt="_images/console_11_app_crawler_detail.png" src="_images/console_11_app_crawler_detail.png" style="width: 200px;" /></a>
<p>The upper-right portion has a cluster of buttons:</p>
<ul class="simple">
<li>Status, Log and History buttons that switch you between the panes of the Flow presentation;</li>
<li><a class="reference external" href="#sampling-menu">Sampling menu</a>;</li>
<li>Current status (<em>Running</em> or <em>Paused</em>);</li>
<li>Gear icon for runtime configuration settings; and</li>
<li>Start and stop buttons for the Flow.</li>
</ul>
<p>The gear icon brings up a dialog for setting the runtime configuration parameters
that have been built into the Flow:</p>
<a class="reference internal image-reference" href="_images/console_23_app_crawler_detail_config.png"><img alt="_images/console_23_app_crawler_detail_config.png" src="_images/console_23_app_crawler_detail_config.png" style="width: 400px;" /></a>
<p>The directed acyclic graph (DAG) shows all the Streams and Flowlets:</p>
<a class="reference internal image-reference" href="_images/console_24_app_crawler_detail_dag.png"><img alt="_images/console_24_app_crawler_detail_dag.png" src="_images/console_24_app_crawler_detail_dag.png" style="width: 600px;" /></a>
<p>A Stream icon shows the name of the Stream and the number of events processed in the current sampling period:</p>
<a class="reference internal image-reference" href="_images/console_12_stream_icon.png"><img alt="_images/console_12_stream_icon.png" src="_images/console_12_stream_icon.png" style="width: 200px;" /></a>
<p>A Flowlet icon shows the name of the Flowlet, the number of events processed
in the current sampling period,
and—in a small circle in the upper right of the icon—the number of instances of that Flowlet:</p>
<a class="reference internal image-reference" href="_images/console_13_flowlet_icon.png"><img alt="_images/console_13_flowlet_icon.png" src="_images/console_13_flowlet_icon.png" style="width: 200px;" /></a>
</div>
<div class="section" id="dag-icon-dialogs">
<h4>DAG Icon Dialogs<a class="headerlink" href="#dag-icon-dialogs" title="Permalink to this headline">¶</a></h4>
<p>Clicking on an icon in the DAG brings up the icon&#8217;s dialog. This dialog contains numerous buttons and panes,
and allows you to traverse the DAG completely by selecting appropriate inputs and outputs.</p>
<a class="reference internal image-reference" href="_images/console_27_dag1.png"><img alt="_images/console_27_dag1.png" src="_images/console_27_dag1.png" style="width: 400px;" /></a>
<p>Here we have clicked on a Flowlet named <em>counter</em>, and are seeing the first
(<em>Inputs</em>) of three panes in this dialog. On the left is a list of inputs to the Flowlet,
in this case a single input Stream named <em>parser</em>, and realtime statistics for the flowlet.</p>
<p>Clicking the name <em>parser</em> would take you—without leaving the dialog—backwards on the path
of the DAG, and allow you to traverse towards the start of the path.</p>
<p>If you go all the way to the beginning of the path, you will reach a Stream, and the dialog will change:</p>
<a class="reference internal image-reference" href="_images/console_30_dag4.png"><img alt="_images/console_30_dag4.png" src="_images/console_30_dag4.png" style="width: 400px;" /></a>
<p>Here, you can inject an Event into the Stream simply by typing and pressing the <em>Inject</em> button.
(Notice that once you have reached a Stream, there is no way to leave on the DAG. There
is no list of consumers of the Stream.)</p>
<p>Returning to the <a class="reference external" href="#dag-icon-dialogs">original dialog</a>, clicking the &#8220;Processed&#8221; button in the center takes you to the second pane of the dialog.</p>
<a class="reference internal image-reference" href="_images/console_28_dag2.png"><img alt="_images/console_28_dag2.png" src="_images/console_28_dag2.png" style="width: 400px;" /></a>
<p>Here are realtime statistics for the processing rate, <a class="reference internal" href="#busyness">busyness</a>, data operations and errors.</p>
<p>Clicking the &#8220;Outputs&#8221; button on the right takes you to the third pane of the dialog.</p>
<a class="reference internal image-reference" href="_images/console_29_dag3.png"><img alt="_images/console_29_dag3.png" src="_images/console_29_dag3.png" style="width: 400px;" /></a>
<p>On the right are all the output connections of the Flowlet, if any, and clicking any of
the names would take you to that Flowlet’s input pane, allowing you to traverse the graph
in the direction of data flow. The realtime statistics for the outbound events are shown.</p>
<p>In the upper right portion of this dialog you can set the requested number of instances.
The current number of instances is shown for reference.</p>
</div>
<div class="section" id="flow-log-explorer">
<span id="log-explorer"></span><h4>Flow Log Explorer<a class="headerlink" href="#flow-log-explorer" title="Permalink to this headline">¶</a></h4>
<p>The Flow Log Explorer pane shows a sample from the logs, with filters for a standard set of filters: <em>Info</em>, <em>Warning</em>, <em>Error</em>, <em>Debug</em>, and <em>Other:</em></p>
<a class="reference internal image-reference" href="_images/console_08_app_crawler_flow_rss_log.png"><img alt="_images/console_08_app_crawler_flow_rss_log.png" src="_images/console_08_app_crawler_flow_rss_log.png" style="width: 600px;" /></a>
</div>
<div class="section" id="flow-history">
<h4>Flow History<a class="headerlink" href="#flow-history" title="Permalink to this headline">¶</a></h4>
<p>The Flow History pane shows started and ended events for the Flow and the results:</p>
<a class="reference internal image-reference" href="_images/console_09b_app_crawler_flow_rss_history.png"><img alt="_images/console_09b_app_crawler_flow_rss_history.png" src="_images/console_09b_app_crawler_flow_rss_history.png" style="width: 600px;" /></a>
</div>
</div>
<div class="section" id="mapreduce">
<h3>MapReduce<a class="headerlink" href="#mapreduce" title="Permalink to this headline">¶</a></h3>
<p>For a MapReduce, the Mapping and Reducing activity is shown, along with status and management controls for starting,
stopping and configuration. Buttons for logs and history, similar to those for
<a class="reference external" href="#flow-history">Flows</a> and <a class="reference external" href="#workflow">Workflows</a>, are also available:</p>
<a class="reference internal image-reference" href="_images/console_26_mapreduce.png"><img alt="_images/console_26_mapreduce.png" src="_images/console_26_mapreduce.png" style="width: 600px;" /></a>
</div>
<div class="section" id="spark">
<h3>Spark<a class="headerlink" href="#spark" title="Permalink to this headline">¶</a></h3>
<p>For a Spark program, the status is shown along with the management controls for starting,
stopping and configuration. Buttons for logs and history, similar to those for
<a class="reference external" href="#flow-history">Flows</a> and <a class="reference external" href="#workflow">Workflows</a>, are also available:</p>
<a class="reference internal image-reference" href="_images/console_26a_spark.png"><img alt="_images/console_26a_spark.png" src="_images/console_26a_spark.png" style="width: 600px;" /></a>
</div>
<div class="section" id="workflow">
<h3>Workflow<a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h3>
<p>For a Workflow, the time until the next scheduled run is shown, along with status and management controls for starting, stopping and configuration.</p>
<a class="reference internal image-reference" href="_images/console_25_workflow.png"><img alt="_images/console_25_workflow.png" src="_images/console_25_workflow.png" style="width: 600px;" /></a>
<div class="section" id="workflow-history">
<h4>Workflow History<a class="headerlink" href="#workflow-history" title="Permalink to this headline">¶</a></h4>
<p>The Workflow History pane shows started and ended events for the Workflow and the results:</p>
<a class="reference internal image-reference" href="_images/console_09_app_crawler_flow_rss_history.png"><img alt="_images/console_09_app_crawler_flow_rss_history.png" src="_images/console_09_app_crawler_flow_rss_history.png" style="width: 600px;" /></a>
</div>
</div>
<div class="section" id="dataset">
<h3>Dataset<a class="headerlink" href="#dataset" title="Permalink to this headline">¶</a></h3>
<p>For a Dataset, write rate (in both bytes and operations per second), read rate and total storage is shown
along with a list of Flows attached to the Dataset, their processing rate, and <a class="reference internal" href="#busyness">busyness</a>.</p>
<a class="reference internal image-reference" href="_images/console_15_dataset.png"><img alt="_images/console_15_dataset.png" src="_images/console_15_dataset.png" style="width: 600px;" /></a>
</div>
<div class="section" id="procedure">
<h3>Procedure<a class="headerlink" href="#procedure" title="Permalink to this headline">¶</a></h3>
<p>For a Procedure, request statistics are shown, along with status and management controls for starting, stopping and configuration. The dialog box shown allows for the sending of requests to Procedures, where
JSON string parameters are passed to the Procedure when calling its methods.</p>
<p>For details of making requests and using Procedures, including configuring the parameters and calling
methods, see the <a class="reference internal" href="api.html#restful-api"><em>HTTP RESTful API</em></a>.</p>
<p>In a fashion similar to the <a class="reference internal" href="#flow-log-explorer">Flow Log Explorer</a>, you can examine the logs associated with each Procedure.</p>
<a class="reference internal image-reference" href="_images/console_17_procedure_ranker.png"><img alt="_images/console_17_procedure_ranker.png" src="_images/console_17_procedure_ranker.png" style="width: 600px;" /></a>
</div>
<div class="section" id="service">
<h3>Service<a class="headerlink" href="#service" title="Permalink to this headline">¶</a></h3>
<p>Each Application can access and use user-defined Services. From an individual Application&#8217;s panel
you access its Services panel.</p>
<p>For a Service, components of the Service are shown, along with status and management controls for starting,
stopping and configuration. The current number of instances requested and active are shown for
each component.</p>
<p>For details of making and using Custom Services, see the Developer Guide section on <a class="reference internal" href="dev-guide.html#user-services"><em>Services</em></a>.</p>
<a class="reference internal image-reference" href="_images/console_32_custom_service.png"><img alt="_images/console_32_custom_service.png" src="_images/console_32_custom_service.png" style="width: 600px;" /></a>
</div>
</div>
<div class="section" id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<p>CDAP supports logging through standard
<a class="reference external" href="http://www.slf4j.org/manual.html">SLF4J (Simple Logging Facade for Java)</a> APIs.
For instance, in a Flowlet you can write:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">private static Logger LOG = LoggerFactory.getLogger(WordCounter.class);</span>
<span class="go">...</span>
<span class="go">@ProcessInput</span>
<span class="go">public void process(String line) {</span>
<span class="go">  LOG.info(&quot;{}: Received line {}&quot;, this.getContext().getTransactionAwareName(), line);</span>
<span class="go">  ... // processing</span>
<span class="go">  LOG.info(&quot;{}: Emitting count {}&quot;, this.getContext().getTransactionAwareName(), wordCount);</span>
<span class="go">  output.emit(wordCount);</span>
<span class="go">}</span>
</pre></div>
</div>
<p>The log messages emitted by your Application code can be viewed in two different ways.</p>
<ul class="simple">
<li>Using the <a class="reference internal" href="api.html#restful-api"><em>HTTP RESTful API</em></a>.
The <a class="reference internal" href="api.html#logginghttp"><em>Logging HTTP interface</em></a> details all the available contexts that
can be called to retrieve different messages.</li>
<li>All log messages of an Application can be viewed in the CDAP Console
by clicking the <em>Logs</em> button in the Flow or Procedure screens.
This launches the <a class="reference external" href="#log-explorer">Log Explorer</a>.</li>
</ul>
<p>See the <a class="reference external" href="#log-explorer">Flow Log Explorer</a> in the <a class="reference external" href="#console">CDAP Console</a>
for details of using it to examine logs in the CDAP.
In a similar fashion, <a class="reference external" href="#procedure">Procedure Logs</a> can be examined from within the CDAP Console.</p>
</div>
<div class="section" id="metrics">
<h2>Metrics<a class="headerlink" href="#metrics" title="Permalink to this headline">¶</a></h2>
<p>As applications process data, the CDAP collects metrics about the application’s behavior and performance. Some of these metrics are the same for every application—how many events are processed, how many data operations are performed—and are thus called system or CDAP metrics.</p>
<p>Other metrics are user-defined or &#8220;custom&#8221; and differ from application to application.
To add user-defined metrics to your application, read this section in conjunction with the
details on available system metrics in the <a class="reference internal" href="api.html#metricshttp"><em>Metrics HTTP API</em></a>.</p>
<p>You embed user-defined metrics in the methods defining the elements of your application.
They will then emit their metrics and you can retrieve them
(along with system metrics) via the <a class="reference internal" href="#metrics-explorer">Metrics Explorer</a> in the CDAP Console or
via the CDAP’s <a class="reference internal" href="api.html#restful-api"><em>HTTP RESTful API</em></a>.
The names given to the metrics (such as <tt class="docutils literal"><span class="pre">names.longnames</span></tt> and <tt class="docutils literal"><span class="pre">names.bytes</span></tt> as in the example below)
should be composed only of alphanumeric characters.</p>
<p>To add metrics to a Flowlet <em>NameSaver</em>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">public static class NameSaver extends AbstractFlowlet {</span>
<span class="go">  static final byte[] NAME = { &#39;n&#39;, &#39;a&#39;, &#39;m&#39;, &#39;e&#39; };</span>

<span class="go">  @UseDataSet(&quot;whom&quot;)</span>
<span class="go">  KeyValueTable whom;</span>
<span class="go">  Metrics flowletMetrics; // Declare the custom metrics</span>

<span class="go">  @ProcessInput</span>
<span class="go">  public void processInput(StreamEvent event) {</span>
<span class="go">    byte[] name = Bytes.toBytes(event.getBody());</span>
<span class="go">    if (name != null &amp;&amp; name.length &gt; 0) {</span>
<span class="go">      whom.write(NAME, name);</span>
<span class="go">    }</span>
<span class="go">    if (name.length &gt; 10) {</span>
<span class="go">      flowletMetrics.count(&quot;names.longnames&quot;, 1);</span>
<span class="go">    }</span>
<span class="go">    flowletMetrics.count(&quot;names.bytes&quot;, name.length);</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
<p>An example of user-defined metrics is in <tt class="docutils literal"><span class="pre">PurchaseStore</span></tt> in the <a class="reference internal" href="getstarted.html#purchase"><em>Purchase</em></a>.</p>
<div class="section" id="using-metrics-explorer">
<h3>Using Metrics Explorer<a class="headerlink" href="#using-metrics-explorer" title="Permalink to this headline">¶</a></h3>
<p>See the <a class="reference internal" href="#metrics-explorer">Metrics Explorer</a> in the <a class="reference external" href="#console">CDAP Console</a>
for details of using it to examine and set metrics in the CDAP.</p>
</div>
</div>
<div class="section" id="runtime-arguments">
<h2>Runtime Arguments<a class="headerlink" href="#runtime-arguments" title="Permalink to this headline">¶</a></h2>
<p>Flows, Procedures, MapReduce and Workflows can receive runtime arguments:</p>
<ul class="simple">
<li>For Flows and Procedures, runtime arguments are available to the <tt class="docutils literal"><span class="pre">initialize</span></tt> method in the context.</li>
<li>For MapReduce, runtime arguments are available to the <tt class="docutils literal"><span class="pre">beforeSubmit</span></tt> and <tt class="docutils literal"><span class="pre">onFinish</span></tt> methods in the context.
The <tt class="docutils literal"><span class="pre">beforeSubmit</span></tt> method can pass them to the Mappers and Reducers through the job configuration.</li>
<li>When a Workflow receives runtime arguments, it passes them to each MapReduce in the Workflow.</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">initialize()</span></tt> method in this example accepts a runtime argument for the
<tt class="docutils literal"><span class="pre">HelloWorld</span></tt> Procedure. For example, we can change the greeting from
the default “Hello” to a customized “Good Morning” by passing a runtime argument:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">public static class Greeting extends AbstractProcedure {</span>

<span class="go">  @UseDataSet(&quot;whom&quot;)</span>
<span class="go">  KeyValueTable whom;</span>
<span class="go">  private String greeting;</span>

<span class="go">  public void initialize(ProcedureContext context) {</span>
<span class="go">    Map&lt;String, String&gt; args = context.getRuntimeArguments();</span>
<span class="go">    greeting = args.get(&quot;greeting&quot;);</span>
<span class="go">    if (greeting == null) {</span>
<span class="go">      greeting = &quot;Hello&quot;;</span>
<span class="go">    }</span>
<span class="go">  }</span>

<span class="go">  @Handle(&quot;greet&quot;)</span>
<span class="go">  public void greet(ProcedureRequest request,</span>
<span class="go">                    ProcedureResponder responder) throws Exception {</span>
<span class="go">    byte[] name = whom.read(NameSaver.NAME);</span>
<span class="go">    String toGreet = name != null ? new String(name) : &quot;World&quot;;</span>
<span class="go">    responder.sendJson(greeting + &quot; &quot; + toGreet + &quot;!&quot;);</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="scaling-instances">
<h2>Scaling Instances<a class="headerlink" href="#scaling-instances" title="Permalink to this headline">¶</a></h2>
<div class="section" id="scaling-flowlets">
<h3>Scaling Flowlets<a class="headerlink" href="#scaling-flowlets" title="Permalink to this headline">¶</a></h3>
<p>You can query and set the number of instances executing a given Flowlet
by using the <tt class="docutils literal"><span class="pre">instances</span></tt> parameter with HTTP GET and PUT methods:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET /v2/apps/&lt;app-id&gt;/flows/&lt;flow-id&gt;/flowlets/&lt;flowlet-id&gt;/instances</span>
<span class="go">PUT /v2/apps/&lt;app-id&gt;/flows/&lt;flow-id&gt;/flowlets/&lt;flowlet-id&gt;/instances</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{ &quot;instances&quot; : &lt;quantity&gt; }</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Where:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">&lt;app-id&gt;:</th><td class="field-body">Name of the application</td>
</tr>
<tr class="field-even field"><th class="field-name">&lt;flow-id&gt;:</th><td class="field-body">Name of the Flow</td>
</tr>
<tr class="field-odd field"><th class="field-name">&lt;flowlet-id&gt;:</th><td class="field-body">Name of the Flowlet</td>
</tr>
<tr class="field-even field"><th class="field-name">&lt;quantity&gt;:</th><td class="field-body">Number of instances to be used</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>Example: Find out the number of instances of the Flowlet <em>saver</em> in
the Flow <em>WhoFlow</em> of the application <em>HelloWorld</em>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET /v2/apps/HelloWorld/flows/WhoFlow/flowlets/saver/instances</span>
</pre></div>
</div>
<p>Example: Change the number of instances of the Flowlet <em>saver</em>
in the Flow <em>WhoFlow</em> of the application <em>HelloWorld</em>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT /v2/apps/HelloWorld/flows/WhoFlow/flowlets/saver/instances</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{ &quot;instances&quot; : 2 }</span>
</pre></div>
</div>
</div>
<div class="section" id="scaling-procedures">
<h3>Scaling Procedures<a class="headerlink" href="#scaling-procedures" title="Permalink to this headline">¶</a></h3>
<p>In a similar way to <a class="reference internal" href="#scaling-flowlets">Scaling Flowlets</a>, you can query or change the number of instances of a Procedure
by using the <tt class="docutils literal"><span class="pre">instances</span></tt> parameter with HTTP GET and PUT methods:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET /v2/apps/&lt;app-id&gt;/procedures/&lt;procedure-id&gt;/instances</span>
<span class="go">PUT /v2/apps/&lt;app-id&gt;/procedures/&lt;procedure-id&gt;/instances</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{ &quot;instances&quot; : &lt;quantity&gt; }</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Where:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">&lt;app-id&gt;:</th><td class="field-body">Name of the application</td>
</tr>
<tr class="field-even field"><th class="field-name">&lt;procedure-id&gt;:</th><td class="field-body">Name of the Procedure</td>
</tr>
<tr class="field-odd field"><th class="field-name">&lt;quantity&gt;:</th><td class="field-body">Number of instances to be used</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>Example: Find out the number of instances of the Procedure <em>saver</em>
in the Flow <em>WhoFlow</em> of the application <em>HelloWorld</em>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET /v2/apps/HelloWorld/flows/WhoFlow/procedure/saver/instances</span>
</pre></div>
</div>
<p>Example: Change the number of instances of the Procedure <em>saver</em>
in the Flow <em>WhoFlow</em> of the application <em>HelloWorld</em>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT /v2/apps/HelloWorld/flows/WhoFlow/procedure/saver/instances</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{ &quot;instances&quot; : 2 }</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="command-line-interface">
<h2>Command-Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h2>
<p>Most of the administrative operations are also available more conveniently through the Command Line Interface.
See this <a class="reference internal" href="api.html#cli"><em>section</em></a> for details.</p>
</div>
<div class="section" id="where-to-go-next">
<h2>Where to Go Next<a class="headerlink" href="#where-to-go-next" title="Permalink to this headline">¶</a></h2>
<p>Now that you&#8217;ve seen how to operate a CDAP, take a look at:</p>
<ul class="simple">
<li><a class="reference internal" href="api.html#restful-api"><em>Cask Data Application Platform HTTP RESTful API</em></a>,
a guide to programming CDAP&#8217;s HTTP interface.</li>
<li><a class="reference internal" href="api.html#cli"><em>Command-Line Interface</em></a>,
a guide to the command-line client interface to CDAP.</li>
</ul>
</div>
<div class="section" id="appendix-cdap-site-xml">
<span id="appendix"></span><h2>Appendix: <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt><a class="headerlink" href="#appendix-cdap-site-xml" title="Permalink to this headline">¶</a></h2>
<p>Here are the parameters that can be defined in the <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> file,
their default values, descriptions and notes.</p>
<p>For information on configuring the <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> file and CDAP for security,
see the <a class="reference internal" href="#security"><em>Security</em></a> section.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="35%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter name</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">app.bind.address</span></tt></td>
<td><tt class="docutils literal"><span class="pre">127.0.0.1</span></tt></td>
<td>App-Fabric server host address</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">app.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">45000</span></tt></td>
<td>App-Fabric server port</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">app.command.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">45010</span></tt></td>
<td>App-Fabric command port</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">app.output.dir</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/programs</span></tt></td>
<td>Directory where all archives are stored</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">app.program.jvm.opts</span></tt></td>
<td><tt class="docutils literal"><span class="pre">${weave.jvm.gc.opts}</span></tt></td>
<td>Java options for all program containers</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">app.temp.dir</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/tmp</span></tt></td>
<td>Temp directory</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">dashboard.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">9999</span></tt></td>
<td>CDAP Console bind port</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">dashboard.ssl.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">9443</span></tt></td>
<td>CDAP Console bind port for HTTPS</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">dashboard.ssl.disable.cert.check</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
<td>True to disable SSL certificate check from the CDAP Console</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">data.local.storage</span></tt></td>
<td><tt class="docutils literal"><span class="pre">${local.data.dir}/ldb</span></tt></td>
<td>Database directory</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">data.local.storage.blocksize</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1024</span></tt></td>
<td>Block size in bytes</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">data.local.storage.cachesize</span></tt></td>
<td><tt class="docutils literal"><span class="pre">104857600</span></tt></td>
<td>Cache size in bytes</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">data.queue.config.update.interval</span></tt></td>
<td><tt class="docutils literal"><span class="pre">5</span></tt></td>
<td>Frequency, in seconds, of updates to the queue consumer</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">data.queue.table.name</span></tt></td>
<td><tt class="docutils literal"><span class="pre">queues</span></tt></td>
<td>Tablename for queues</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">data.tx.bind.address</span></tt></td>
<td><tt class="docutils literal"><span class="pre">127.0.0.1</span></tt></td>
<td>Transaction Inet address</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">data.tx.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">15165</span></tt></td>
<td>Transaction bind port</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">data.tx.client.count</span></tt></td>
<td><tt class="docutils literal"><span class="pre">5</span></tt></td>
<td>Number of pooled transaction instances</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">data.tx.client.provider</span></tt></td>
<td><tt class="docutils literal"><span class="pre">thread-local</span></tt></td>
<td>Provider strategy for transaction clients</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">data.tx.command.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">15175</span></tt></td>
<td>Transaction command port number</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">data.tx.janitor.enable</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
<td>Whether or not the TransactionDataJanitor coprocessor</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">data.tx.server.io.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">2</span></tt></td>
<td>Number of transaction IO threads</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">data.tx.server.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">25</span></tt></td>
<td>Number of transaction threads</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">data.tx.snapshot.dir</span></tt></td>
<td><tt class="docutils literal"><span class="pre">${hdfs.namespace}/tx.snapshot</span></tt></td>
<td>Directory in HDFS used to store snapshots and transaction logs</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">data.tx.snapshot.interval</span></tt></td>
<td><tt class="docutils literal"><span class="pre">300</span></tt></td>
<td>Frequency of transaction snapshots in seconds</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">data.tx.snapshot.local.dir</span></tt></td>
<td><tt class="docutils literal"><span class="pre">${local.data.dir}/tx.snapshot</span></tt></td>
<td>Snapshot storage directory on the local filesystem</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">data.tx.snapshot.retain</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10</span></tt></td>
<td>Number of retained transaction snapshot files</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">enable.unrecoverable.reset</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
<td><strong>WARNING: Enabling this option makes it possible to delete all
applications and data; no recovery is possible!</strong></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">explore.active.operation.timeout.secs</span></tt></td>
<td><tt class="docutils literal"><span class="pre">86400</span></tt></td>
<td>Timeout value in seconds for a SQL operation whose result is not fetched completely</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">explore.cleanup.job.schedule.secs</span></tt></td>
<td><tt class="docutils literal"><span class="pre">60</span></tt></td>
<td>Time in secs to schedule clean up job to timeout operations</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">explore.executor.container.instances</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1</span></tt></td>
<td>Number of explore executor instances</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">explore.executor.max.instances</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1</span></tt></td>
<td>Maximum number of explore executor instances</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">explore.inactive.operation.timeout.secs</span></tt></td>
<td><tt class="docutils literal"><span class="pre">3600</span></tt></td>
<td>Timeout value in seconds for a SQL operation which has no more results to be fetched</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">gateway.boss.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1</span></tt></td>
<td>Number of Netty server boss threads</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">gateway.connection.backlog</span></tt></td>
<td><tt class="docutils literal"><span class="pre">20000</span></tt></td>
<td>Maximum connection backlog of Gateway</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">gateway.exec.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">20</span></tt></td>
<td>Number of Netty server executor threads</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">gateway.max.cached.events.per.stream.num</span></tt></td>
<td><tt class="docutils literal"><span class="pre">5000</span></tt></td>
<td>Maximum number of a single stream&#8217;s events cached before flushing</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">gateway.max.cached.stream.events.bytes</span></tt></td>
<td><tt class="docutils literal"><span class="pre">52428800</span></tt></td>
<td>Maximum size (in bytes) of stream events cached before flushing</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">gateway.max.cached.stream.events.num</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10000</span></tt></td>
<td>Maximum number of stream events cached before flushing</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">gateway.memory.mb</span></tt></td>
<td><tt class="docutils literal"><span class="pre">2048</span></tt></td>
<td>Memory in MB for Gateway process in YARN</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">gateway.num.cores</span></tt></td>
<td><tt class="docutils literal"><span class="pre">2</span></tt></td>
<td>Cores requested per Gateway container in YARN</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">gateway.num.instances</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1</span></tt></td>
<td>Number of Gateway instances in YARN</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">gateway.stream.callback.exec.num.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">5</span></tt></td>
<td>Number of threads in stream events callback executor</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">gateway.stream.events.flush.interval.ms</span></tt></td>
<td><tt class="docutils literal"><span class="pre">150</span></tt></td>
<td>Interval at which cached stream events get flushed</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">gateway.worker.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10</span></tt></td>
<td>Number of Netty server worker threads</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">hdfs.lib.dir</span></tt></td>
<td><tt class="docutils literal"><span class="pre">${hdfs.namespace}/lib</span></tt></td>
<td>Common directory in HDFS for JAR files for coprocessors</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">hdfs.namespace</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/${cdap.namespace}</span></tt></td>
<td>Namespace for files written by CDAP</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">hdfs.user</span></tt></td>
<td><tt class="docutils literal"><span class="pre">yarn</span></tt></td>
<td>User name for accessing HDFS</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">hive.local.data.dir</span></tt></td>
<td><tt class="docutils literal"><span class="pre">${local.data.dir}/hive</span></tt></td>
<td>Location of hive relative to <tt class="docutils literal"><span class="pre">local.data.dir</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">hive.server.bind.address</span></tt></td>
<td><tt class="docutils literal"><span class="pre">localhost</span></tt></td>
<td>Router address hive server binds to</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">kafka.bind.address</span></tt></td>
<td><tt class="docutils literal"><span class="pre">0.0.0.0</span></tt></td>
<td>Kafka server hostname</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">kafka.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">9092</span></tt></td>
<td>Kafka server port</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">kafka.default.replication.factor</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1</span></tt></td>
<td>Kafka replication factor [<a class="reference internal" href="#note-1">Note 1</a>]</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">kafka.log.dir</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/tmp/kafka-logs</span></tt></td>
<td>Kafka log storage directory</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">kafka.num.partitions</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10</span></tt></td>
<td>Default number of partitions for a topic</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">kafka.seed.brokers</span></tt></td>
<td><tt class="docutils literal"><span class="pre">127.0.0.1:9092</span></tt></td>
<td>Kafka brokers list (comma separated)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">kafka.zookeeper.namespace</span></tt></td>
<td><tt class="docutils literal"><span class="pre">kafka</span></tt></td>
<td>Kafka Zookeeper namespace</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">local.data.dir</span></tt></td>
<td><tt class="docutils literal"><span class="pre">data</span></tt></td>
<td>Data directory for local mode</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">log.base.dir</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/logs/avro</span></tt></td>
<td>Base log directory</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">log.cleanup.run.interval.mins</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1440</span></tt></td>
<td>Log cleanup interval in minutes</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">log.publish.num.partitions</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10</span></tt></td>
<td>Number of Kafka partitions to publish the logs to</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">log.retention.duration.days</span></tt></td>
<td><tt class="docutils literal"><span class="pre">7</span></tt></td>
<td>Log file HDFS retention duration in days</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">log.run.account</span></tt></td>
<td><tt class="docutils literal"><span class="pre">cdap</span></tt></td>
<td>Logging service account</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">log.saver.event.bucket.interval.ms</span></tt></td>
<td><tt class="docutils literal"><span class="pre">4000</span></tt></td>
<td>Log events published in this interval (in milliseconds) will be processed in a batch.
Smaller values will increase the odds of log events going out-of-order.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">log.saver.event.processing.delay.ms</span></tt></td>
<td><tt class="docutils literal"><span class="pre">8000</span></tt></td>
<td>Buffer log events in memory for given time, in milliseconds. Log events received after
this delay will show up out-of-order. This needs to be greater than
<tt class="docutils literal"><span class="pre">log.saver.event.bucket.interval.ms</span></tt> by at least a few hundred milliseconds.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">log.saver.num.instances</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1</span></tt></td>
<td>Log Saver instances to run in YARN</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">log.saver.run.memory.megs</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1024</span></tt></td>
<td>Memory in MB allocated to the Log Saver process</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">metadata.bind.address</span></tt></td>
<td><tt class="docutils literal"><span class="pre">127.0.0.1</span></tt></td>
<td>Metadata server address</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">metadata.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">45004</span></tt></td>
<td>Metadata server port</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">metadata.program.run.history.keepdays</span></tt></td>
<td><tt class="docutils literal"><span class="pre">30</span></tt></td>
<td>Number of days to keep metadata run history</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">metrics.data.table.retention.resolution.1.seconds</span></tt></td>
<td><tt class="docutils literal"><span class="pre">7200</span></tt></td>
<td>Retention resolution of the 1 second table in seconds</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">metrics.kafka.partition.size</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10</span></tt></td>
<td>Number of partitions for metrics topic</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">metrics.query.bind.address</span></tt></td>
<td><tt class="docutils literal"><span class="pre">127.0.0.1</span></tt></td>
<td>Metrics query server host address</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">metrics.query.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">45005</span></tt></td>
<td>Metrics query server port</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">cdap.explore.enabled</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
<td>Determines if the CDAP Explore Service is enabled</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cdap.namespace</span></tt></td>
<td><tt class="docutils literal"><span class="pre">cdap</span></tt></td>
<td>Namespace for this CDAP instance</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">router.bind.address</span></tt></td>
<td><tt class="docutils literal"><span class="pre">0.0.0.0</span></tt></td>
<td>Router server address</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">router.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10000</span></tt></td>
<td>Port number that the CDAP router should bind to for HTTP Connections</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">router.client.boss.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1</span></tt></td>
<td>Number of router client boss threads</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">router.client.worker.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10</span></tt></td>
<td>Number of router client worker threads</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">router.connection.backlog</span></tt></td>
<td><tt class="docutils literal"><span class="pre">20000</span></tt></td>
<td>Maximum router connection backlog</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">router.server.address</span></tt></td>
<td><tt class="docutils literal"><span class="pre">localhost</span></tt></td>
<td>Router address to which Console connects</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">router.server.boss.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1</span></tt></td>
<td>Number of router server boss threads</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">router.server.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10000</span></tt></td>
<td>Router port to which Console connects</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">router.server.worker.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10</span></tt></td>
<td>Number of router server worker threads</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">router.ssl.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10443</span></tt></td>
<td>Port number that the CDAP router should bind to for HTTPS Connections</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">scheduler.max.thread.pool.size</span></tt></td>
<td><tt class="docutils literal"><span class="pre">30</span></tt></td>
<td>Size of the scheduler thread pool</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">security.auth.server.address</span></tt></td>
<td><tt class="docutils literal"><span class="pre">127.0.0.1</span></tt></td>
<td>IP address that the CDAP Authentication Server should bind to</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security.auth.server.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10009</span></tt></td>
<td>Port number that the CDAP Authentication Server should bind to for HTTP</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">security.auth.server.ssl.bind.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10010</span></tt></td>
<td>Port to bind to for HTTPS on the CDAP Authentication Server</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security.authentication.basic.realmfile</span></tt></td>
<td>&nbsp;</td>
<td>Username / password file to use when basic authentication is configured</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">security.authentication.handlerClassName</span></tt></td>
<td>&nbsp;</td>
<td>Name of the authentication implementation to use to validate user credentials</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security.authentication.loginmodule.className</span></tt></td>
<td>&nbsp;</td>
<td>JAAS LoginModule implementation to use when
<tt class="docutils literal"><span class="pre">co.cask.security.server.JAASAuthenticationHandler</span></tt> is configured for
<tt class="docutils literal"><span class="pre">security.authentication.handlerClassName</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">security.data.keyfile.path</span></tt></td>
<td><tt class="docutils literal"><span class="pre">${local.data.dir}/security/keyfile</span></tt></td>
<td>Path to the secret key file (only used in single-node operation)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security.enabled</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
<td>Enables authentication for CDAP.  When set to <tt class="docutils literal"><span class="pre">true</span></tt> all requests to CDAP must
provide a valid access token.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">security.realm</span></tt></td>
<td><tt class="docutils literal"><span class="pre">cask</span></tt></td>
<td>Authentication realm used for scoping security.  This value should be unique for each
installation of CDAP.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security.server.extended.token.expiration.ms</span></tt></td>
<td><tt class="docutils literal"><span class="pre">604800000</span></tt></td>
<td>Admin tool access token expiration time in milliseconds (defaults to 1 week) (internal)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">security.server.maxthreads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">100</span></tt></td>
<td>Maximum number of threads that the CDAP Authentication Server should use for
handling HTTP requests</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security.server.token.expiration.ms</span></tt></td>
<td><tt class="docutils literal"><span class="pre">86400000</span></tt></td>
<td>Access token expiration time in milliseconds (defaults to 24 hours)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">security.token.digest.algorithm</span></tt></td>
<td><tt class="docutils literal"><span class="pre">HmacSHA256</span></tt></td>
<td>Algorithm used for generating MAC of access tokens</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security.token.digest.key.expiration.ms</span></tt></td>
<td><tt class="docutils literal"><span class="pre">3600000</span></tt></td>
<td>Time duration (in milliseconds) after which an active secret key
used for signing tokens should be retired</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">security.token.digest.keylength</span></tt></td>
<td><tt class="docutils literal"><span class="pre">128</span></tt></td>
<td>Key length used in generating the secret keys for generating MAC of access tokens</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security.token.distributed.parent.znode</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/${cdap.namespace}/security/auth</span></tt></td>
<td>Parent node in ZooKeeper used for secret key distribution in distributed mode</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ssl.enabled</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
<td>True to enable SSL</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">stream.flume.port</span></tt></td>
<td><tt class="docutils literal"><span class="pre">10004</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">stream.flume.threads</span></tt></td>
<td><tt class="docutils literal"><span class="pre">20</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">thrift.max.read.buffer</span></tt></td>
<td><tt class="docutils literal"><span class="pre">16777216</span></tt></td>
<td>Maximum read buffer size in bytes used by the Thrift server [<a class="reference internal" href="#note-2">Note 2</a>]</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">weave.java.reserved.memory.mb</span></tt></td>
<td><tt class="docutils literal"><span class="pre">250</span></tt></td>
<td>Reserved non-heap memory in MB for Weave container</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">weave.jvm.gc.opts</span></tt></td>
<td><p class="first"><tt class="docutils literal"><span class="pre">-verbose:gc</span></tt></p>
<p><tt class="docutils literal"><span class="pre">-Xloggc:&lt;log-dir&gt;/gc.log</span></tt></p>
<p><tt class="docutils literal"><span class="pre">-XX:+PrintGCDetails</span></tt></p>
<p><tt class="docutils literal"><span class="pre">-XX:+PrintGCTimeStamps</span></tt></p>
<p><tt class="docutils literal"><span class="pre">-XX:+UseGCLogFileRotation</span></tt></p>
<p><tt class="docutils literal"><span class="pre">-XX:NumberOfGCLogFiles=10</span></tt></p>
<p class="last"><tt class="docutils literal"><span class="pre">-XX:GCLogFileSize=1M</span></tt></p>
</td>
<td>Java garbage collection options for all Weave containers; <tt class="docutils literal"><span class="pre">&lt;log-dir&gt;</span></tt> is the location
of the log directory on each machine</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">weave.no.container.timeout</span></tt></td>
<td><tt class="docutils literal"><span class="pre">120000</span></tt></td>
<td>Amount of time in milliseconds to wait for at least one container for Weave runnable</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">weave.zookeeper.namespace</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/weave</span></tt></td>
<td>Weave Zookeeper namespace prefix</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">yarn.user</span></tt></td>
<td><tt class="docutils literal"><span class="pre">yarn</span></tt></td>
<td>User name for running applications in YARN</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">zookeeper.quorum</span></tt></td>
<td><tt class="docutils literal"><span class="pre">127.0.0.1:2181/${cdap.namespace}</span></tt></td>
<td>Zookeeper address host:port</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">zookeeper.session.timeout.millis</span></tt></td>
<td><tt class="docutils literal"><span class="pre">40000</span></tt></td>
<td>Zookeeper session time out in milliseconds</td>
</tr>
</tbody>
</table>
<p id="note-1"><strong>Note 1</strong>:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">kafka.default.replication.factor</span></tt> is used to replicate <em>Kafka</em> messages across multiple
machines to prevent data loss in the event of a hardware failure. The recommended setting
is to run at least two <em>Kafka</em> servers. If you are running two <em>Kafka</em> servers, set this
value to 2; otherwise, set it to the number of <em>Kafka</em> servers</div></blockquote>
<p id="note-2"><strong>Note 2</strong>:</p>
<blockquote>
<div>Maximum read buffer size in bytes used by the Thrift server: this value should be set to
greater than the maximum frame sent on the RPC channel.</div></blockquote>
</div>
<div class="section" id="appendix-cdap-security-xml">
<h2>Appendix: <tt class="docutils literal"><span class="pre">cdap-security.xml</span></tt><a class="headerlink" href="#appendix-cdap-security-xml" title="Permalink to this headline">¶</a></h2>
<p>Here are the parameters that can be defined in the <tt class="docutils literal"><span class="pre">cdap-security.xml</span></tt> file,
their default values, descriptions and notes.</p>
<p>For information on configuring the <tt class="docutils literal"><span class="pre">cdap-security.xml</span></tt> file and CDAP for security,
see the <a class="reference internal" href="#security"><em>Security</em></a> section.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="35%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter name</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">dashboard.ssl.cert</span></tt></td>
<td>&nbsp;</td>
<td>SSL certificate file to be used for the CDAP Console</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">dashboard.ssl.key</span></tt></td>
<td>&nbsp;</td>
<td>SSL key file corresponding to the SSL certificate specified in <tt class="docutils literal"><span class="pre">dashboard.ssl.cert</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">router.ssl.keystore.keypassword</span></tt></td>
<td>&nbsp;</td>
<td>Key password to the Java keystore file specified in <tt class="docutils literal"><span class="pre">router.ssl.keystore.path</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">router.ssl.keystore.password</span></tt></td>
<td>&nbsp;</td>
<td>Password to the Java keystore file specified in <tt class="docutils literal"><span class="pre">router.ssl.keystore.path</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">router.ssl.keystore.path</span></tt></td>
<td>&nbsp;</td>
<td>Path to the Java keystore file containing the certificate used for HTTPS on the CDAP Router</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">router.ssl.keystore.type</span></tt></td>
<td><tt class="docutils literal"><span class="pre">JKS</span></tt></td>
<td>Type of the Java keystore file specified in <tt class="docutils literal"><span class="pre">router.ssl.keystore.path</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">security.auth.server.ssl.keystore.keypassword</span></tt></td>
<td>&nbsp;</td>
<td>Key password to the Java keystore file specified in <tt class="docutils literal"><span class="pre">security.auth.server.ssl.keystore.path</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security.auth.server.ssl.keystore.password</span></tt></td>
<td>&nbsp;</td>
<td>Password to the Java keystore file specified in <tt class="docutils literal"><span class="pre">security.auth.server.ssl.keystore.path</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">security.auth.server.ssl.keystore.path</span></tt></td>
<td>&nbsp;</td>
<td>Path to the Java keystore file containing the certificate used for HTTPS on the CDAP
Authentication Server</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security.auth.server.ssl.keystore.type</span></tt></td>
<td><tt class="docutils literal"><span class="pre">JKS</span></tt></td>
<td>Type of the Java keystore file specified in <tt class="docutils literal"><span class="pre">security.auth.server.ssl.keystore.path</span></tt></td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--
  Copyright © 2014 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->

<h3><a href="index.html">Table of Contents</a></h3>
<nav>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="getstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="case_study.html">Case Study</a></li>
<li class="toctree-l1"><a class="reference internal" href="arch.html">Concepts and Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="apps-packs.html">Apps and Packs</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">APIs and Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="javadocs/index.html">Javadocs</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Administration and Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation-and-configuration">Installation and Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#system-requirements">System Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packaging">Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-from-a-previous-version">Upgrading From a Previous Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verification">Verification</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#security">Security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enabling-security">Enabling Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-authentication-mechanisms">Configuring Authentication Mechanisms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-authentication">Basic Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-configuration">Example Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-security">Testing Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="#client-authentication">Client Authentication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#monitoring">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#application-won-t-start">Application Won&#8217;t Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="#no-metrics-logs">No Metrics/logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#only-the-first-flowlet-showing-activity">Only the First Flowlet Showing Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#yarn-application-shows-accepted-for-some-time-but-then-fails">YARN Application Shows ACCEPTED For Some Time But Then Fails</a></li>
<li class="toctree-l3"><a class="reference internal" href="#log-saver-process-throws-an-out-of-memory-error-cdap-console-shows-service-not-ok">Log Saver Process Throws an Out-of-Memory Error, CDAP Console Shows Service Not OK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#putting-cdap-into-production">Putting CDAP into Production</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#in-memory-cdap">In-memory CDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#standalone-cdap">Standalone CDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#distributed-data-application-platform">Distributed Data Application Platform</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cdap-console">CDAP Console</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metrics-explorer">Metrics Explorer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#system-services-explorer">System Services Explorer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collect">Collect</a></li>
<li class="toctree-l3"><a class="reference internal" href="#process">Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#store">Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="#application">Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flow">Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mapreduce">MapReduce</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spark">Spark</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow">Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dataset">Dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#procedure">Procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#service">Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#metrics">Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-metrics-explorer">Using Metrics Explorer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#runtime-arguments">Runtime Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scaling-instances">Scaling Instances</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scaling-flowlets">Scaling Flowlets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scaling-procedures">Scaling Procedures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-interface">Command-Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#where-to-go-next">Where to Go Next</a></li>
<li class="toctree-l2"><a class="reference internal" href="#appendix-cdap-site-xml">Appendix: <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="#appendix-cdap-security-xml">Appendix: <tt class="docutils literal"><span class="pre">cdap-security.xml</span></tt></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="licenses/index.html">Licenses and Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq/index.html">FAQ</a></li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="tools.html"
                        title="Previous Chapter">Cask Data Application Platform - Available Tools</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="licenses/index.html"
                        title="Next Chapter">Cask Data Application Platform Licenses and Dependencies</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014 Cask Data, Inc.
    </div>
  </body>
</html>