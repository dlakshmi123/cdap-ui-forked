<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="robots" content="noindex, nofollow">

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright © 2015 Cask Data, Inc." name="copyright" />
<script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
    <meta name="git_release" content="3.2.0">
    <meta name="git_hash" content="1107c0b599ab647e741c9b5a3defeca2ae42be83">
    <meta name="git_timestamp" content="2015-10-01 20:54:13 -0700">
    <title>Creating an ETL Application &mdash; Cask Data Application Platform 3.2.0 Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <!-- Amazon SQS Page Usage Logging start-->
    <script type="text/javascript" src="https://sdk.amazonaws.com/js/aws-sdk-2.1.35.min.js"></script>
    <script type="text/javascript" src="http://docs.cask.co/resources/scripts/aws-sqs-1.0.0.js"></script>
    <!-- Amazon SQS Page Usage Logging end-->
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 3.2.0 Documentation" href="../index.html" />
    <link rel="next" title="Creating Custom ETL Plugins" href="custom.html" />
    <link rel="prev" title="ETL Overview" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="custom.html" title="Creating Custom ETL Plugins"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="index.html" title="ETL Overview"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/cdap/json-versions.js"/></script>
        <script>window.setVersion('3.2.0');</script>
       
        <li><a href="../table-of-contents.html">CDAP Included Applications</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="creating-an-etl-application">
<span id="included-apps-etl-creating"></span><h1>Creating an ETL Application<a class="headerlink" href="#creating-an-etl-application" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Applications can be created using the <a class="reference external" href="../source/../../reference-manual/http-restful-api/lifecycle.html#http-restful-api-lifecycle-create-app" title="(in Cask Data Application Platform v3.2.0)"><span class="xref std std-ref">Lifecycle RESTful API</span></a>,
the <a class="reference external" href="../source/../../reference-manual/cli-api.html#cli" title="(in Cask Data Application Platform v3.2.0)"><span class="xref std std-ref">CDAP CLI</span></a>, or the <a class="reference external" href="../source/../../admin-manual/operations/cdap-ui.html#cdap-ui" title="(in Cask Data Application Platform v3.2.0)"><span class="xref std std-ref">CDAP UI</span></a>. In order to create an application,
an application configuration is required that specifies the source, transformations and sinks
along with their properties.  (In the CDAP UI, the interface prompts you for the required
information.)</p>
</div>
<div class="section" id="configuration-file-format">
<span id="included-apps-etl-configuration-file-format"></span><h2>Configuration File Format<a class="headerlink" href="#configuration-file-format" title="Permalink to this headline">¶</a></h2>
<div class="section" id="creating-an-etl-batch-application">
<h3>Creating an ETL Batch Application<a class="headerlink" href="#creating-an-etl-batch-application" title="Permalink to this headline">¶</a></h3>
<p>With an ETL Batch Application, it requires a <code class="docutils literal"><span class="pre">schedule</span></code> property with a cron entry
specifying the frequency of the Batch job run, such as every day or every hour.</p>
<p>For example, this JSON (when in a file such as <code class="docutils literal"><span class="pre">config.json</span></code>) provides a
configuration for a Batch Application that runs every minute, reading data from a stream
<em>myStream</em> and writing to a dataset (Table) called <em>myTable</em>, without any transformations:</p>
<div class="highlight container">
<pre class="literal-block">
{
  &quot;artifact&quot;: {
    &quot;name&quot;: &quot;cdap-etl-batch&quot;,
    &quot;version&quot;: &quot;3.2.0&quot;,
    &quot;scope&quot;: &quot;system&quot;
  },
  &quot;config&quot;: {
    &quot;schedule&quot;: &quot;* * * * *&quot;,
    &quot;source&quot;: {
      &quot;name&quot;: &quot;Stream&quot;,
      &quot;properties&quot;: {
        &quot;name&quot;: &quot;myStream&quot;,
        &quot;duration&quot;: &quot;1m&quot;
      }
    },
    &quot;transforms&quot;: [ ],
    &quot;sinks&quot;: [
      {
        &quot;name&quot;: &quot;Table&quot;,
        &quot;properties&quot;: {
          &quot;name&quot;: &quot;myTable&quot;,
          &quot;schema.row.field&quot;: &quot;ts&quot;
        }
      }
    ]
  }
}
</pre>
</div>
<p>The application launches a MapReduce program that runs every minute, reads data from the
stream <em>myStream</em> and writes to a Table <em>myTable</em>. A Table Sink needs a row key field to
be specified and can use the timestamp of a Stream event for that.</p>
<p>To create this application, called <em>streamETLApp</em>:</p>
<ul>
<li><p class="first">Using the <a class="reference external" href="../source/../../reference-manual/http-restful-api/lifecycle.html#http-restful-api-lifecycle-create-app" title="(in Cask Data Application Platform v3.2.0)"><span class="xref std std-ref">Lifecycle RESTful API</span></a>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -X PUT localhost:10000/v3/namespaces/default/apps/streamETLApp -H &#39;Content-Type: application/json&#39; -d @config.json</span>
</pre></div>
</div>
</li>
<li><p class="first">Using <a class="reference external" href="../source/../../reference-manual/cli-api.html#cli" title="(in Cask Data Application Platform v3.2.0)"><span class="xref std std-ref">CDAP CLI</span></a>:</p>
<div class="highlight container">
<pre class="literal-block">
<span class="gp">$</span> create app streamETLApp cdap-etl-batch 3.2.0 system &lt;path-to-config.json&gt;
</pre>
</div>
</li>
</ul>
<p>where <code class="docutils literal"><span class="pre">config.json</span></code> is the file that contains the application configuration.</p>
</div>
<div class="section" id="creating-an-etl-real-time-application">
<h3>Creating an ETL Real-Time Application<a class="headerlink" href="#creating-an-etl-real-time-application" title="Permalink to this headline">¶</a></h3>
<p>This next configuration creates a real-time application that reads from Twitter and writes to a
stream after performing a projection transformation:</p>
<div class="highlight container">
<pre class="literal-block">
{
  &quot;artifact&quot;: {
    &quot;name&quot;: &quot;cdap-etl-realtime&quot;,
    &quot;version&quot;: &quot;3.2.0&quot;,
    &quot;scope&quot;: &quot;system&quot;
  },
  &quot;config&quot;: {
    &quot;instances&quot;: 1,
    &quot;source&quot;: {
      &quot;name&quot;: &quot;Twitter&quot;,
      &quot;properties&quot;: {
        &quot;AccessToken&quot;: &quot;xxx&quot;,
        &quot;AccessTokenSecret&quot;: &quot;xxx&quot;,
        &quot;ConsumerKey&quot;: &quot;xxx&quot;,
        &quot;ConsumerSecret&quot;: &quot;xxx&quot;
      }
    },
    &quot;transforms&quot;: [
      {
        &quot;name&quot;: &quot;Projection&quot;,
        &quot;properties&quot;: {
          &quot;drop&quot;: &quot;lang,time,favCount,source,geoLat,geoLong,isRetweet&quot;
        }
      }
    ],
    &quot;sinks&quot;: [
      {
        &quot;name&quot;: &quot;Stream&quot;,
        &quot;properties&quot;: {
          &quot;name&quot;: &quot;twitterStream&quot;,
          &quot;body.field&quot;: &quot;tweet&quot;
        }
      }
    ]
  }
}
</pre>
</div>
<p>An ETL Real-Time Application expects an instance property that will create <em>N</em> instances
of the worker that run concurrently. In Standalone CDAP mode, this is implemented as
multiple threads; in Distributed CDAP mode, it will create different YARN containers. The
number of worker instances of a real-time application should not (in general) be changed
during runtime. If the number of instances needs to be changed, the worker must be
stopped, then the application configuration must be updated to the new number of instances.</p>
<p>The <code class="docutils literal"><span class="pre">instances</span></code> property value needs to be greater than 0. Note that the <code class="docutils literal"><span class="pre">instance</span></code>
property replaces the <code class="docutils literal"><span class="pre">schedule</span></code> property of an ETL Batch Application.</p>
<p>In the example code above, we will use a <em>ProjectionTransform</em> (a type of Transform) to drop certain
columns in the incoming data. A <em>StreamSink</em> in the final step needs a data field property
that it will use as the content for the data to be written.</p>
</div>
<div class="section" id="sample-application-configurations">
<h3>Sample Application Configurations<a class="headerlink" href="#sample-application-configurations" title="Permalink to this headline">¶</a></h3>
<p><strong>Database:</strong> Sample config for using a Database Source and a Database Sink:</p>
<div class="highlight container">
<pre class="literal-block">
{
  &quot;artifact&quot;: {
    &quot;name&quot;: &quot;cdap-etl-batch&quot;,
    &quot;version&quot;: &quot;3.2.0&quot;,
    &quot;scope&quot;: &quot;system&quot;
  },
  &quot;config&quot;: {
    &quot;schedule&quot;: &quot;* * * * *&quot;,
    &quot;source&quot;: {
      &quot;name&quot;: &quot;Database&quot;,
      &quot;properties&quot;: {
        &quot;importQuery&quot;: &quot;select id,name,age from my_table&quot;,
        &quot;countQuery&quot;: &quot;select count(id) from my_table&quot;,
        &quot;connectionString&quot;: &quot;<a class="reference external" href="jdbc:mysql://localhost:3306/test">jdbc:mysql://localhost:3306/test</a>&quot;,
        &quot;tableName&quot;: &quot;src_table&quot;,
        &quot;user&quot;: &quot;my_user&quot;,
        &quot;password&quot;: &quot;my_password&quot;,
        &quot;jdbcPluginName&quot;: &quot;jdbc_plugin_name_defined_in_jdbc_plugin_json_config&quot;,
        &quot;jdbcPluginType&quot;: &quot;jdbc_plugin_type_defined_in_jdbc_plugin_json_config&quot;
      }
    },
    &quot;sinks&quot;: [
      {
        &quot;name&quot;: &quot;Database&quot;,
        &quot;properties&quot;: {
          &quot;columns&quot;: &quot;id,name,age&quot;,
          &quot;connectionString&quot;: &quot;<a class="reference external" href="jdbc:mysql://localhost:3306/test">jdbc:mysql://localhost:3306/test</a>&quot;,
          &quot;tableName&quot;: &quot;dest_table&quot;,
          &quot;user&quot;: &quot;my_user&quot;,
          &quot;password&quot;: &quot;my_password&quot;,
          &quot;jdbcPluginName&quot;: &quot;jdbc_plugin_name_defined_in_jdbc_plugin_json_config&quot;,
          &quot;jdbcPluginType&quot;: &quot;jdbc_plugin_type_defined_in_jdbc_plugin_json_config&quot;
        }
      }
    ],
    &quot;transforms&quot;: [ ]
  }
}
</pre>
</div>
<p><strong>Kafka:</strong> A Kafka cluster needs to be setup, and certain minimum properties specified when
creating the source:</p>
<div class="highlight container">
<pre class="literal-block">
{
  &quot;artifact&quot;: {
    &quot;name&quot;: &quot;cdap-etl-realtime&quot;,
    &quot;version&quot;: &quot;3.2.0&quot;,
    &quot;scope&quot;: &quot;system&quot;
  },
  &quot;config&quot;: {
    &quot;instances&quot;: 1,
    &quot;source&quot;: {
      &quot;name&quot;: &quot;Kafka&quot;,
      &quot;properties&quot;: {
        &quot;kafka.partitions&quot;: &quot;1&quot;,
        &quot;kafka.topic&quot;: &quot;test&quot;,
        &quot;kafka.brokers&quot;: &quot;localhost:9092&quot;
      }
    },
    &quot;sinks&quot;: [
      {
        &quot;name&quot;: &quot;Stream&quot;,
        &quot;properties&quot;: {
          &quot;name&quot;: &quot;myStream&quot;,
          &quot;body.field&quot;: &quot;message&quot;
        }
      }
    ],
    &quot;transforms&quot;: [ ]
  }
}
</pre>
</div>
<p><strong>Prebuilt JARs:</strong> In a case where you&#8217;d like to use prebuilt third-party JARs (such as a
JDBC driver) as a plugin, please refer to the section on <a class="reference internal" href="plugins/third-party.html#included-apps-third-party-jars"><span>Using Third-Party Jars</span></a>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="manuals links">
    <h3><a href="../table-of-contents/../../index.html"
        rel="nofollow">CDAP Documentation v3.2.0</a></h3>
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../table-of-contents/../../index.html"
            rel="nofollow">Overview</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../introduction/index.html"
            rel="nofollow">Introduction to CDAP</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../developers-manual/index.html"
            rel="nofollow">Developers’ Manual</a></li>
            
      <li><div class=""></div><b><a href="../table-of-contents/../../included-applications/index.html"
            rel="nofollow">Included Applications</a></b></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../admin-manual/index.html"
            rel="nofollow">Administration Manual</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../integrations/index.html"
            rel="nofollow">Integrations</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../examples-manual/index.html"
            rel="nofollow">Examples, Guides, and Tutorials</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/index.html"
            rel="nofollow">Reference Manual</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/release-notes.html"
            rel="nofollow">Release Notes</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/glossary.html"
            rel="nofollow">Glossary</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/faq.html"
            rel="nofollow">FAQ</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../search.html"
            rel="nofollow">Search</a></li>
    </ul>
   </div><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


    
<h3 class="pagenavtitle"><a href="../table-of-contents.html">Included Applications:<br> Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html"> ETL Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href=""> Creating an ETL Application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-file-format">Configuration File Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-an-etl-batch-application">Creating an ETL Batch Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-an-etl-real-time-application">Creating an ETL Real-Time Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sample-application-configurations">Sample Application Configurations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom.html"> Creating Custom ETL Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/index.html"> ETL Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/third-party.html"> Using Third-Party JARs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-quality/index.html"> Data Quality Application</a></li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="index.html"
                        title="Previous Chapter">ETL Overview</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="custom.html"
                        title="Next Chapter">Creating Custom ETL Plugins</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/3.2.0/cdap-docs-3.2.0-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
  
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<div role="note" aria-label="other links">
    <h3><a href="http://docs.cask.co/" target="_blank">Documentation</a></h3>
    <ul class="this-page-menu">
        <li><a href="http://docs.cask.co/cdap/index.html" target="_blank">CDAP</a></li>
        <li><a href="http://docs.cask.co/coopr/index.html" target="_blank">Coopr</a></li>
        <li><a href="http://docs.cask.co/tephra/index.html" target="_blank">Tephra</em></a></li>
        <li><a href="http://docs.cask.co/tigon/index.html" target="_blank">Tigon</a></li>
    </ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="ETL Overview" href="index.html" />ETL Overview</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        Copyright &copy; 2014-2015 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Creating Custom ETL Plugins" href="custom.html" />Creating Custom ETL Plugins</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>