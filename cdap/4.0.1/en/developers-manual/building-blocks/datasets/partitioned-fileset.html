<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KWLFGH');</script>
    <!-- End Google Tag Manager -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright Â© 2014-2016 Cask Data, Inc." name="copyright" />

    
    
    <meta name="git_release" content="4.0.1">
    <meta name="git_hash" content="30d9a378abb0077df4e0e30cb9c66712c5ec6714">
    <meta name="git_timestamp" content="2017-01-24 18:22:27 -0600">
    <title>Partitioned FileSet &mdash; Cask Data Application Platform 4.0.1 Documentation</title>

    <link rel="canonical" href="http://docs.cask.co/cdap/4.0.1/en/developers-manual/building-blocks/datasets/partitioned-fileset.html">

    
    <link rel="stylesheet" href="../../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/annotator.min.css" type="text/css" />



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '4.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/copy-to-clipboard.js"></script>
    <script type="text/javascript" src="../../_static/tabbed-parsed-literal.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 4.0.1 Documentation" href="../../index.html" />
    <link rel="up" title="Datasets" href="index.html" />
    <link rel="next" title="TimePartitioned FileSet" href="time-partitioned-fileset.html" />
    <link rel="prev" title="FileSet Dataset" href="fileset.html" /> 
  </head>
  <body role="document">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KWLFGH"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="time-partitioned-fileset.html" title="TimePartitioned FileSet"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="fileset.html" title="FileSet Dataset"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/cdap/json-versions.js"/></script>
        <script>window.setVersion('4.0.1');</script>
       
        <li><a href="../../table-of-contents.html">Developersâ€™ Manual</a> &raquo;</li>
          <li><a href="../index.html" >Building Blocks</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Datasets</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div id="documentwrapper" class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="partitioned-fileset">
<span id="datasets-partitioned-fileset"></span><h1><a class="headerlink" href="#partitioned-fileset" title="Perma-link to this heading">ðŸ”—</a>Partitioned FileSet</h1>
<p>While a FileSet is a convenient abstraction over actual file system interfaces, it still requires
the application to be aware of file system paths. For example, an application that maintains data
over time might have a new file for every month. One could come up with a naming convention that encodes
the month into each file name, and share that convention across all applications that use this file set.
Yet that can become tedious to manage, especially if the naming convention should ever changeâ€”then all
applications would have to be changed simultaneously for proper functioning.</p>
<p>The <code class="docutils literal"><span class="pre">PartitionedFileSet</span></code> dataset relieves applications from understanding file name conventions. Instead,
it associates a partition key with a path. Because different paths cannot have the same partition key,
this allows applications to address the file(s) at that path uniquely through their partition keys, or
more broadly through conditions over the partition keys. For example, the months of February through June
of a particular year, or the month of November in any year. By inheriting the attributesâ€”such as
format and schemaâ€”of FileSets, PartitionedFileSets are a powerful abstraction over data that is
organized into files.</p>
<div class="section" id="creating-a-partitionedfileset">
<h2><a class="headerlink" href="#creating-a-partitionedfileset" title="Perma-link to this heading">ðŸ”—</a>Creating a PartitionedFileSet</h2>
<p>To create and use a PartitionedFileSet in an application, you create it as part of the application
configuration, similar to FileSets. However, the partitioning has to be given as an additional property:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="n">createDataset</span><span class="o">(</span><span class="s">&quot;results&quot;</span><span class="o">,</span> <span class="n">PartitionedFileSet</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">PartitionedFileSetProperties</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="c1">// Properties for partitioning</span>
    <span class="o">.</span><span class="na">setPartitioning</span><span class="o">(</span><span class="n">Partitioning</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">addStringField</span><span class="o">(</span><span class="s">&quot;league&quot;</span><span class="o">).</span><span class="na">addIntField</span><span class="o">(</span><span class="s">&quot;season&quot;</span><span class="o">).</span><span class="na">build</span><span class="o">())</span>
    <span class="c1">// Properties for file set</span>
    <span class="o">.</span><span class="na">setInputFormat</span><span class="o">(</span><span class="n">TextInputFormat</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setOutputFormat</span><span class="o">(</span><span class="n">TextOutputFormat</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setOutputProperty</span><span class="o">(</span><span class="n">TextOutputFormat</span><span class="o">.</span><span class="na">SEPERATOR</span><span class="o">,</span> <span class="s">&quot;,&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">());</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This creates a new PartitionedFileSet named <em>results</em>. Similar to FileSets, it specifies <code class="docutils literal"><span class="pre">TextInputFormat</span></code> and
<code class="docutils literal"><span class="pre">TextOutputFormat.</span></code>; for the output format, we specify that the separator between fields is a comma.
The difference to a FileSet is that this dataset is partitioned by league and season. This means that every file
added to this dataset must have a partitioning key with a unique combination of league and season.</p>
<p>Note that any of the properties that apply to FileSets can also be used for PartitionedFileSets (they apply to the
embedded FileSet). If you configure a PartitionedFileSet as external using <code class="docutils literal"><span class="pre">setDataExternal(true)</span></code>, then the
embedded FileSet becomes read-only. You can still add partitions for locations that were written by an
external process. But dropping a partition will only delete the partition's metadata, whereas the actual file
remains intact. Similarly, if you drop or truncate an external PartitionedFileSet, its files will not be deleted.</p>
<p>In order to make the PartitionedFileSet explorable, additional properties are needed, as described
in <a class="reference internal" href="#exploring-partitionedfilesets"><span>Exploring PartitionedFileSets</span></a>.</p>
</div>
<div class="section" id="reading-and-writing-partitionedfilesets">
<h2><a class="headerlink" href="#reading-and-writing-partitionedfilesets" title="Perma-link to this heading">ðŸ”—</a>Reading and Writing PartitionedFileSets</h2>
<p>You can interact with the files in a PartitionedFileSet directly through the <code class="docutils literal"><span class="pre">Location</span></code> abstraction
of the file system. This is similar to a FileSet, but instead of a relative path, you specify a
partition key to obtain a Partition; you can then get a Location from that Partition.</p>
<p>For example, to read the content of a partition:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">PartitionKey</span> <span class="n">key</span> <span class="o">=</span> <span class="n">PartitionKey</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">addStringField</span><span class="o">(</span><span class="s">&quot;league&quot;</span><span class="o">,</span> <span class="o">...)</span>
                                         <span class="o">.</span><span class="na">addIntField</span><span class="o">(</span><span class="s">&quot;season&quot;</span><span class="o">,</span> <span class="o">...)</span>
                                         <span class="o">.</span><span class="na">build</span><span class="o">());</span>
<span class="n">Partition</span> <span class="n">partition</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="na">getPartition</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">partition</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="n">Location</span> <span class="n">location</span> <span class="o">=</span> <span class="n">partition</span><span class="o">.</span><span class="na">getLocation</span><span class="o">();</span>
    <span class="n">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">();</span>
    <span class="o">...</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note that if the partition was written with MapReduce, the location is actually a directory
that contains part files. In that case, list the files in the directory to find the part files:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="k">for</span> <span class="o">(</span><span class="n">Location</span> <span class="n">file</span> <span class="o">:</span> <span class="n">location</span><span class="o">.</span><span class="na">list</span><span class="o">())</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;part&quot;</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">();</span>
    <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Instead of reading a single partition, you can also specify a PartitionFilter to query the
partitioned file set for all partitions whose keys match that filter. The PartitionFilter
can specify either an exact value (en equality condition) or a range for the value of each
field in the dataset's partitioning. For example, the following code reads all partitions
for the NFL and the '80s seasons:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">PartitionFilter</span> <span class="n">filter</span> <span class="o">=</span> <span class="n">PartitionFilter</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">addValueCondition</span><span class="o">(</span><span class="s">&quot;league&quot;</span><span class="o">,</span> <span class="s">&quot;nfl&quot;</span><span class="o">)</span>
                                                  <span class="o">.</span><span class="na">addRangeCondition</span><span class="o">(</span><span class="s">&quot;season&quot;</span><span class="o">,</span> <span class="mi">1980</span><span class="o">,</span> <span class="mi">1990</span><span class="o">)</span>
                                                  <span class="o">.</span><span class="na">build</span><span class="o">());</span>
<span class="n">Set</span><span class="o">&lt;</span><span class="n">Partition</span><span class="o">&gt;</span> <span class="n">partitions</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="na">getPartitions</span><span class="o">(</span><span class="n">filter</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="n">partition</span> <span class="o">:</span> <span class="n">partitions</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="n">Location</span> <span class="n">location</span> <span class="o">=</span> <span class="n">partition</span><span class="o">.</span><span class="na">getLocation</span><span class="o">();</span>
    <span class="n">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">();</span>
    <span class="o">...</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note that the upper bound for the seasons (1990) is exclusive; that is, the 1990 season is not
included in the returned partitions. For a range condition, either the lower or the upper bound may
be null, meaning that the filter in unbounded in that direction.</p>
<p>Adding a partition is similar; however, instead of a Partition, you receive a <code class="docutils literal"><span class="pre">PartitionOutput</span></code>
for the partition key. That object has methods to obtain a Location and to add the partition once
you have written to that Location.
For example, this code writes to a file named <code class="docutils literal"><span class="pre">part</span></code> under the location returned from the
<code class="docutils literal"><span class="pre">PartitionOutput</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">PartitionKey</span> <span class="n">key</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">PartitionOutput</span> <span class="n">output</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="na">getPartitionOutput</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">Location</span> <span class="n">location</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="na">getLocation</span><span class="o">().</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;part&quot;</span><span class="o">);</span>
  <span class="n">OutputStream</span> <span class="n">outputStream</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
  <span class="o">...</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">...</span>
<span class="o">}</span>
<span class="n">output</span><span class="o">.</span><span class="na">addPartition</span><span class="o">();</span>
</pre></div>
</div>
</div>
<div class="section" id="using-partitionedfilesets-in-mapreduce">
<h2><a class="headerlink" href="#using-partitionedfilesets-in-mapreduce" title="Perma-link to this heading">ðŸ”—</a>Using PartitionedFileSets in MapReduce</h2>
<p>A partitioned file set can be accessed in MapReduce in a similar fashion to a FileSet. The difference
is that instead of input and output paths, you specify a partition filter for the input and a
partition key for the output. For example, the MapReduce program of the SportResults example
reads as input all partitions for the league given in its runtime arguments, and writes as output
a partition with that league as the only key:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
  <span class="n">MapReduceContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">getContext</span><span class="o">();</span>
  <span class="o">...</span>
  <span class="n">String</span> <span class="n">league</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getRuntimeArguments</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;league&quot;</span><span class="o">);</span>

  <span class="c1">// Configure the input to read all seasons for the league</span>
  <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">inputArgs</span> <span class="o">=</span> <span class="n">Maps</span><span class="o">.</span><span class="na">newHashMap</span><span class="o">();</span>
  <span class="n">PartitionedFileSetArguments</span><span class="o">.</span><span class="na">setInputPartitionFilter</span><span class="o">(</span>
    <span class="n">inputArgs</span><span class="o">,</span> <span class="n">PartitionFilter</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">addValueCondition</span><span class="o">(</span><span class="s">&quot;league&quot;</span><span class="o">,</span> <span class="n">league</span><span class="o">).</span><span class="na">build</span><span class="o">());</span>
  <span class="n">context</span><span class="o">.</span><span class="na">addInput</span><span class="o">(</span><span class="n">Input</span><span class="o">.</span><span class="na">ofDataset</span><span class="o">(</span><span class="s">&quot;results&quot;</span><span class="o">,</span> <span class="n">inputArgs</span><span class="o">));</span>

  <span class="c1">// Each run writes its output to a partition for the league</span>
  <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">outputArgs</span> <span class="o">=</span> <span class="n">Maps</span><span class="o">.</span><span class="na">newHashMap</span><span class="o">();</span>
  <span class="n">outputKey</span> <span class="o">=</span> <span class="n">PartitionKey</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">addStringField</span><span class="o">(</span><span class="s">&quot;league&quot;</span><span class="o">,</span> <span class="n">league</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
  <span class="n">PartitionedFileSetArguments</span><span class="o">.</span><span class="na">setOutputPartitionKey</span><span class="o">(</span><span class="n">outputArgs</span><span class="o">,</span> <span class="n">outputKey</span><span class="o">);</span>
  <span class="n">outputFileSet</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getDataset</span><span class="o">(</span><span class="s">&quot;totals&quot;</span><span class="o">,</span> <span class="n">outputArgs</span><span class="o">);</span>
  <span class="n">outputPath</span> <span class="o">=</span> <span class="n">FileSetArguments</span><span class="o">.</span><span class="na">getOutputPath</span><span class="o">(</span><span class="n">outputFileSet</span><span class="o">.</span><span class="na">getEmbeddedFileSet</span><span class="o">().</span><span class="na">getRuntimeArguments</span><span class="o">());</span>
  <span class="n">context</span><span class="o">.</span><span class="na">setOutput</span><span class="o">(</span><span class="s">&quot;totals&quot;</span><span class="o">,</span> <span class="n">outputFileSet</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Here, the <code class="docutils literal"><span class="pre">initialize</span></code> method of the MapReduce generates the runtime arguments for the
partitioned file sets that specify the input partition filter and output partition key. This
is convenient for starting the MapReduce, because only a single argument has to be given for
the MapReduce run. If that code was not in the <code class="docutils literal"><span class="pre">initialize()</span></code>, you could still achieve the
same result by specifying the partition filter and key explicitly in the MapReduce runtime arguments.
For example, give these arguments when starting the MapReduce through a RESTful call:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">{</span>
  <span class="s">&quot;dataset.results.input.partition.filter.league.value&quot;</span><span class="o">:</span> <span class="s">&quot;nfl&quot;</span><span class="o">,</span>
  <span class="s">&quot;dataset.results.input.partition.filter.season.lower&quot;</span><span class="o">:</span> <span class="s">&quot;1980&quot;</span><span class="o">,</span>
  <span class="s">&quot;dataset.results.input.partition.filter.season.upper&quot;</span><span class="o">:</span> <span class="s">&quot;1990&quot;</span><span class="o">,</span>
  <span class="s">&quot;dataset.totals.output.partition.key.league&quot;</span> <span class="o">:</span> <span class="s">&quot;nfl&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dynamic-partitioning-of-mapreduce-output">
<h2><a class="headerlink" href="#dynamic-partitioning-of-mapreduce-output" title="Perma-link to this heading">ðŸ”—</a>Dynamic Partitioning of MapReduce Output</h2>
<p>A MapReduce job can write to multiple partitions of a PartitionedFileSet using the
<code class="docutils literal"><span class="pre">DynamicPartitioner</span></code> class. To do so, define a class that implements <code class="docutils literal"><span class="pre">DynamicPartitioner</span></code>.
The core method to override is the <code class="docutils literal"><span class="pre">getPartitionKey</span></code> method; it maps a record's key and value
to a <code class="docutils literal"><span class="pre">PartitionKey</span></code>, which defines which <code class="docutils literal"><span class="pre">Partition</span></code> the record should be written to:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">TimeAndZipPartitioner</span> <span class="kd">extends</span> <span class="n">DynamicPartitioner</span><span class="o">&lt;</span><span class="n">NullWritable</span><span class="o">,</span> <span class="n">Text</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">Long</span> <span class="n">time</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">JsonParser</span> <span class="n">jsonParser</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">MapReduceTaskContext</span><span class="o">&lt;</span><span class="n">NullWritable</span><span class="o">,</span> <span class="n">Text</span><span class="o">&gt;</span> <span class="n">mapReduceTaskContext</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">time</span> <span class="o">=</span> <span class="n">mapReduceTaskContext</span><span class="o">.</span><span class="na">getLogicalStartTime</span><span class="o">();</span>
    <span class="k">this</span><span class="o">.</span><span class="na">jsonParser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JsonParser</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">PartitionKey</span> <span class="nf">getPartitionKey</span><span class="o">(</span><span class="n">NullWritable</span> <span class="n">key</span><span class="o">,</span> <span class="n">Text</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">zip</span> <span class="o">=</span> <span class="n">jsonParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">toString</span><span class="o">()).</span><span class="na">getAsJsonObject</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;zip&quot;</span><span class="o">).</span><span class="na">getAsInt</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">PartitionKey</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">addLongField</span><span class="o">(</span><span class="s">&quot;time&quot;</span><span class="o">,</span> <span class="n">time</span><span class="o">).</span><span class="na">addIntField</span><span class="o">(</span><span class="s">&quot;zip&quot;</span><span class="o">,</span> <span class="n">zip</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Then set the class of the custom partitioner as runtime arguments of the output PartitionedFileSet:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">cleanRecordsArgs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="n">PartitionedFileSetArguments</span><span class="o">.</span><span class="na">setDynamicPartitioner</span><span class="o">(</span><span class="n">cleanRecordsArgs</span><span class="o">,</span> <span class="n">TimeAndZipPartitioner</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">context</span><span class="o">.</span><span class="na">addOutput</span><span class="o">(</span><span class="n">Output</span><span class="o">.</span><span class="na">ofDataset</span><span class="o">(</span><span class="n">DataCleansing</span><span class="o">.</span><span class="na">CLEAN_RECORDS</span><span class="o">,</span> <span class="n">cleanRecordsArgs</span><span class="o">));</span>
</pre></div>
</div>
<p>With this, each record processed by the MapReduce job will be written to a path corresponding
to the <code class="docutils literal"><span class="pre">Partition</span></code> that it was mapped to by the <code class="docutils literal"><span class="pre">DynamicPartitioner</span></code>, and the set of new <code class="docutils literal"><span class="pre">Partition</span></code>s
will be registered with the output <code class="docutils literal"><span class="pre">PartitionedFileSet</span></code> at the end of the job.
Note that any partitions written to must not previously exist. Otherwise, the MapReduce job will fail at the
end of the job and none of the partitions will be added to the <code class="docutils literal"><span class="pre">PartitionedFileSet</span></code>.</p>
</div>
<div class="section" id="incrementally-processing-partitionedfilesets">
<h2><a class="headerlink" href="#incrementally-processing-partitionedfilesets" title="Perma-link to this heading">ðŸ”—</a>Incrementally Processing PartitionedFileSets</h2>
<div class="section" id="processing-using-mapreduce">
<h3><a class="headerlink" href="#processing-using-mapreduce" title="Perma-link to this heading">ðŸ”—</a>Processing using MapReduce</h3>
<p>One way to process a partitioned file set is with a repeatedly-running MapReduce program that,
in each run, reads all partitions that have been added since its previous run. This requires
that the MapReduce program persists between runs which partitions have already been consumed.
An easy way is to use the <code class="docutils literal"><span class="pre">PartitionBatchInput</span></code>, an experimental feature introduced in CDAP 3.3.0.
Your MapReduce program is responsible for providing an implementation of <code class="docutils literal"><span class="pre">DatasetStatePersistor</span></code> to
persist and then read back its state. In this example, the state is persisted to a row in a
KeyValue Table, using the convenience class <code class="docutils literal"><span class="pre">KVTableStatePersistor</span></code>; however, other types of
Datasets can also be used. In the <code class="docutils literal"><span class="pre">initialize</span></code> method of the MapReduce, specify the
partitioned file set to be used as input as well as the <code class="docutils literal"><span class="pre">DatasetStatePersistor</span></code> to be used:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
  <span class="n">MapReduceContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">getContext</span><span class="o">();</span>
  <span class="o">...</span>
  <span class="n">partitionCommitter</span> <span class="o">=</span>
    <span class="n">PartitionBatchInput</span><span class="o">.</span><span class="na">setInput</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">DataCleansing</span><span class="o">.</span><span class="na">RAW_RECORDS</span><span class="o">,</span>
                                 <span class="k">new</span> <span class="n">KVTableStatePersistor</span><span class="o">(</span><span class="n">DataCleansing</span><span class="o">.</span><span class="na">CONSUMING_STATE</span><span class="o">,</span> <span class="s">&quot;state.key&quot;</span><span class="o">));</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This will read back the previously persisted state, determine the new partitions to read based upon this
state, and compute a new state to store in memory until a call to the <code class="docutils literal"><span class="pre">onFinish</span></code> method of the returned
<code class="docutils literal"><span class="pre">PartitionCommitter</span></code>. The dataset is instantiated with the set of new partitions to read as input and
set as input for the MapReduce job.</p>
<p>To save the state of partition processing, call the returned PartitionCommitter's <code class="docutils literal"><span class="pre">onFinish</span></code> method.
This ensures that the next time the MapReduce job runs, it processes only the newly committed partitions:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFinish</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">succeeded</span><span class="o">,</span> <span class="n">MapReduceContext</span> <span class="n">context</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
  <span class="n">partitionCommitter</span><span class="o">.</span><span class="na">onFinish</span><span class="o">(</span><span class="n">succeeded</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="processing-using-other-programs">
<h3><a class="headerlink" href="#processing-using-other-programs" title="Perma-link to this heading">ðŸ”—</a>Processing using Other Programs</h3>
<p>Partitions of a partitioned file set can also be incrementally processed from other program types
using the generic <code class="docutils literal"><span class="pre">PartitionConsumer</span></code> APIs. The implementation of these APIs that can be used from multiple instances
of a program is <code class="docutils literal"><span class="pre">ConcurrentPartitionConsumer</span></code>. To use, you simply need to provide the instance of the
partitioned file set you want to consume from, along with a <code class="docutils literal"><span class="pre">StatePersistor</span></code>, responsible for managing
persistence of the consumer's state:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// This can be in any program where we have access to Datasets,</span>
<span class="c1">// such as a Worker, Workflow Action, or even in a MapReduce</span>
<span class="n">PartitionConsumer</span> <span class="n">consumer</span> <span class="o">=</span>
  <span class="k">new</span> <span class="n">ConcurrentPartitionConsumer</span><span class="o">(</span><span class="n">partitionedFileSet</span><span class="o">,</span> <span class="k">new</span> <span class="n">CustomStatePersistor</span><span class="o">(</span><span class="n">persistenceTable</span><span class="o">));</span>

<span class="c1">// Call consumePartitions to get a list of partitions to process</span>
<span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">PartitionDetail</span><span class="o">&gt;</span> <span class="n">partitions</span> <span class="o">=</span> <span class="n">partitionConsumer</span><span class="o">.</span><span class="na">consumePartitions</span><span class="o">().</span><span class="na">getPartitions</span><span class="o">();</span>

<span class="c1">// Process partitions</span>
<span class="o">...</span>

<span class="c1">// Once done processing, onFinish must be called with a boolean value indicating success or failure, so that</span>
<span class="c1">// the partitions&#39; can be marked accordingly for completion or retries in the future</span>
<span class="n">partitionConsumer</span><span class="o">.</span><span class="na">onFinish</span><span class="o">(</span><span class="n">partitions</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">consumePartitions</span></code> method of the <code class="docutils literal"><span class="pre">PartitionConsumer</span></code> can optionally take in a limit (an int), which will
limit the number of returned partitions. It can also take in a <code class="docutils literal"><span class="pre">PartitionAcceptor</span></code>, which allows you to
define a custom method to limit the number of partitions. For instance, it may be useful to limit the number of
partitions to process at a time, and have it be based on the size of the partitions:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SizeLimitingAcceptor</span> <span class="kd">implements</span> <span class="n">PartitionAcceptor</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">sizeLimitMB</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">acceptedMBSoFar</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">SizeLimitingAcceptor</span><span class="o">(</span><span class="kt">int</span> <span class="n">sizeLimitMB</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">sizeLimitMB</span> <span class="o">=</span> <span class="n">sizeLimitMB</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">acceptedMBSoFar</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Return</span> <span class="nf">accept</span><span class="o">(</span><span class="n">PartitionDetail</span> <span class="n">partitionDetail</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// assuming that the metadata contains the size of that partition</span>
    <span class="n">acceptedMBSoFar</span> <span class="o">+=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">partitionDetail</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;sizeMB&quot;</span><span class="o">));</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">acceptedMBSoFar</span> <span class="o">&gt;</span> <span class="n">sizeLimitMB</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">Return</span><span class="o">.</span><span class="na">STOP</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">Return</span><span class="o">.</span><span class="na">ACCEPT</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>It can then be used as:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// return only partitions, to process up to 500MB of data</span>
<span class="n">partitions</span> <span class="o">=</span> <span class="n">consumer</span><span class="o">.</span><span class="na">consumePartitions</span><span class="o">(</span><span class="k">new</span> <span class="n">SizeLimitingAcceptor</span><span class="o">(</span><span class="mi">500</span><span class="o">));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="exploring-partitionedfilesets">
<span id="id1"></span><h2><a class="headerlink" href="#exploring-partitionedfilesets" title="Perma-link to this heading">ðŸ”—</a>Exploring PartitionedFileSets</h2>
<p>A partitioned file set can be explored with ad-hoc queries if you enable it at creation time:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">createDataset</span><span class="o">(</span><span class="s">&quot;results&quot;</span><span class="o">,</span> <span class="n">PartitionedFileSet</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">PartitionedFileSetProperties</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
  <span class="c1">// Properties for partitioning</span>
  <span class="o">.</span><span class="na">setPartitioning</span><span class="o">(</span><span class="n">Partitioning</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">addStringField</span><span class="o">(</span><span class="s">&quot;league&quot;</span><span class="o">).</span><span class="na">addIntField</span><span class="o">(</span><span class="s">&quot;season&quot;</span><span class="o">).</span><span class="na">build</span><span class="o">())</span>
  <span class="c1">// Properties for file set</span>
  <span class="o">.</span><span class="na">setInputFormat</span><span class="o">(</span><span class="n">TextInputFormat</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setOutputFormat</span><span class="o">(</span><span class="n">TextOutputFormat</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setOutputProperty</span><span class="o">(</span><span class="n">TextOutputFormat</span><span class="o">.</span><span class="na">SEPERATOR</span><span class="o">,</span> <span class="s">&quot;,&quot;</span><span class="o">)</span>
  <span class="c1">// Properties for Explore (to create a partitioned Hive table)</span>
  <span class="o">.</span><span class="na">setEnableExploreOnCreate</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setExploreFormat</span><span class="o">(</span><span class="s">&quot;csv&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setExploreSchema</span><span class="o">(</span><span class="s">&quot;date STRING, winner STRING, loser STRING, winnerpoints INT, loserpoints INT&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">build</span><span class="o">());</span>
</pre></div>
</div>
<p>The essential part (to enable exploration) of the above sample are these lines:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
<span class="c1">// Properties for Explore (to create a partitioned Hive table)</span>
<span class="o">.</span><span class="na">setEnableExploreOnCreate</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
<span class="o">.</span><span class="na">setExploreFormat</span><span class="o">(</span><span class="s">&quot;csv&quot;</span><span class="o">)</span>
<span class="o">.</span><span class="na">setExploreSchema</span><span class="o">(</span><span class="s">&quot;date STRING, winner STRING, loser STRING, winnerpoints INT, loserpoints INT&quot;</span><span class="o">)</span>
<span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</pre></div>
</div>
<p>This results in the creation of an external table in Hive with the schema given in the
<code class="docutils literal"><span class="pre">setExploreSchema()</span></code>. The supported formats (set by <code class="docutils literal"><span class="pre">setExploreFormat()</span></code>) are <code class="docutils literal"><span class="pre">csv</span></code>
and <code class="docutils literal"><span class="pre">text</span></code>. Both define that the format is text. For <code class="docutils literal"><span class="pre">csv</span></code>, the field delimiter is a
comma, whereas for <code class="docutils literal"><span class="pre">text</span></code>, you can specify the field delimiter using <code class="docutils literal"><span class="pre">setExploreFormatProperty()</span></code>.</p>
<p>For example, to use a colon as the field separator:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">.</span><span class="na">setExploreFormat</span><span class="o">(</span><span class="s">&quot;text&quot;</span><span class="o">)</span>
<span class="o">.</span><span class="na">setExploreFormatProperty</span><span class="o">(</span><span class="s">&quot;delimiter&quot;</span><span class="o">,</span> <span class="s">&quot;:&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>If your file format is not text, you can still explore the dataset, but you need to give
detailed instructions when creating the dataset. For example, to use Avro as the file
format:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">.</span><span class="na">setEnableExploreOnCreate</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
<span class="o">.</span><span class="na">setSerDe</span><span class="o">(</span><span class="s">&quot;org.apache.hadoop.hive.serde2.avro.AvroSerDe&quot;</span><span class="o">)</span>
<span class="o">.</span><span class="na">setExploreInputFormat</span><span class="o">(</span><span class="s">&quot;org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat&quot;</span><span class="o">)</span>
<span class="o">.</span><span class="na">setExploreOutputFormat</span><span class="o">(</span><span class="s">&quot;org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat&quot;</span><span class="o">)</span>
<span class="o">.</span><span class="na">setTableProperty</span><span class="o">(</span><span class="s">&quot;avro.schema.literal&quot;</span><span class="o">,</span> <span class="n">SCHEMA_STRING</span><span class="o">)</span>
</pre></div>
</div>
<p>You need to specify the SerDe, the input format, the output format, and any additional properties
any of these may need as table properties. This is an experimental feature and only tested for
Avro; see the <a class="reference external" href="../../source/../../examples-manual/examples/stream-conversion.html#examples-stream-conversion" title="(in Cask Data Application Platform v4.0.1)"><span class="xref std std-ref">StreamConversion</span></a> example and
the <a class="reference internal" href="../../data-exploration/filesets.html#fileset-exploration"><span>FileSet Exploration</span></a> for more details.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

  <div role="note" aria-label="manuals links">
    <h3><a href="../../table-of-contents/../../index.html" rel="nofollow">CDAP Documentation v4.0.1</a></h3>
    
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../../table-of-contents/../../introduction/index.html" rel="nofollow">Introduction to CDAP</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../developers-manual/index.html" rel="nofollow">Developersâ€™ Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../admin-manual/index.html" rel="nofollow">Administration Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../integrations/index.html" rel="nofollow">Integrations</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../examples-manual/index.html" rel="nofollow">Examples, Guides, and Tutorials</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/index.html" rel="nofollow">Reference Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../faqs/index.html" rel="nofollow">FAQs</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/release-notes.html" rel="nofollow">Release Notes</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/glossary.html" rel="nofollow">Glossary</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../search.html" rel="nofollow">Search</a></li>
    </ul>
    <h3 class="cdap-extensions">CDAP Extensions</h3>
    
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../../table-of-contents/../../hydrator-manual/index.html" rel="nofollow">Cask Hydrator</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../tracker-manual/index.html" rel="nofollow">Cask Tracker</a></li>
    </ul>
  </div>
    
  <h3 class="pagenavtitle"><a href="../../table-of-contents.html">Developersâ€™ Manual: Table&nbsp;of&nbsp;Contents</a></h3>
    <nav class="pagenav">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html"> Getting Started Developing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html"> Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html"> Building Blocks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core.html"> Core Abstractions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications.html"> Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../streams.html"> Streams</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html"> Datasets</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="overview.html"> Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="table.html"> Table API</a></li>
<li class="toctree-l3"><a class="reference internal" href="fileset.html"> FileSets</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href=""> Partitioned FileSets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-partitionedfileset">Creating a PartitionedFileSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-and-writing-partitionedfilesets">Reading and Writing PartitionedFileSets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-partitionedfilesets-in-mapreduce">Using PartitionedFileSets in MapReduce</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-partitioning-of-mapreduce-output">Dynamic Partitioning of MapReduce Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#incrementally-processing-partitionedfilesets">Incrementally Processing PartitionedFileSets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exploring-partitionedfilesets">Exploring PartitionedFileSets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="time-partitioned-fileset.html"> TimePartitioned FileSets</a></li>
<li class="toctree-l3"><a class="reference internal" href="system-custom.html"> System and Custom Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="cube.html"> Cube Dataset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../views.html"> Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flows-flowlets/index.html"> Flows and Flowlets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mapreduce-programs.html"> MapReduce Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins.html"> Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schedules.html"> Schedules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../secure-keys.html"> Secure Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html"> Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark-programs.html"> Spark Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workers.html"> Workers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflows.html"> Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../artifacts.html"> Artifacts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../program-lifecycle.html"> Program Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata-lineage.html"> Metadata and Lineage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audit-logging.html"> Audit Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../namespaces.html"> Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transaction-system.html"> Transaction System</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html"> Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/index.html"> Testing and Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ingesting-tools/index.html"> Ingesting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-exploration/index.html"> Data Exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/index.html"> Advanced Topics</a></li>
</ul>
 
    </nav>
  
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/4.0.1/cdap-docs-4.0.1-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
<div role="note" aria-label="other links">
    <h3><a href="http://docs.cask.co/" target="_blank">Documentation</a></h3>
    <ul class="this-page-menu">
        <li><a href="http://docs.cask.co/cdap/index.html" target="_blank">CDAP</a></li>
        <li><a href="http://docs.cask.co/coopr/index.html" target="_blank">Coopr</a></li>
        <li><a href="http://docs.cask.co/tigon/index.html" target="_blank">Tigon</a></li>
    </ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>

  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="FileSet Dataset" href="fileset.html" />FileSet Dataset</a>&nbsp;&nbsp;
    </th>
    
    <th class="tg-s6z2">
        Copyright &copy; 2014-2017 Cask Data, Inc.
      &bull; Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="TimePartitioned FileSet" href="time-partitioned-fileset.html" />TimePartitioned FileSet</a>
    </th>

  </tr>
</table>

    </div>
  </body>
</html>