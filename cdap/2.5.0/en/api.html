<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="robots" content="noindex, nofollow">

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Cask Data Application Platform HTTP RESTful API And Clients &mdash; Cask Data Application Platform 2.5.0 Documentation</title>
    
    <link rel="stylesheet" href="_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 2.5.0 Documentation" href="index.html" />
    <link rel="next" title="Javadocs" href="javadocs/index.html" />
    <link rel="prev" title="Cask Data Application Platform Applications and Packs" href="apps-packs.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="javadocs/index.html" title="Javadocs"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="apps-packs.html" title="Cask Data Application Platform Applications and Packs"
             accesskey="P">Previous</a> |</li>
        <li><a href="index.html">Cask Data Application Platform 2.5.0 Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cask-data-application-platform-http-restful-api-and-clients">
<h1>Cask Data Application Platform HTTP RESTful API And Clients<a class="headerlink" href="#cask-data-application-platform-http-restful-api-and-clients" title="Permalink to this headline">¶</a></h1>
<div class="section" id="http-restful-api">
<span id="restful-api"></span><h2>HTTP RESTful API<a class="headerlink" href="#http-restful-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>The Cask Data Application Platform (CDAP) has an HTTP interface for a multitude of purposes:</p>
<ul class="simple">
<li><strong>Stream:</strong> sending data events to a Stream or to inspect the contents of a Stream</li>
<li><strong>Dataset:</strong> interacting with Datasets, Dataset Modules, and Dataset Types</li>
<li><strong>Query:</strong> sending ad-hoc queries to CDAP Datasets</li>
<li><strong>Procedure:</strong> sending calls to a stored Procedure</li>
<li><strong>Client:</strong> deploying and managing Applications and managing the life cycle of Flows,
Procedures, MapReduce Jobs, Workflows, and Custom Services</li>
<li><strong>Logging:</strong> retrieving Application logs</li>
<li><strong>Metrics:</strong> retrieving metrics for system and user Applications (user-defined metrics)</li>
<li><strong>Monitor:</strong> checking the status of various System and Custom CDAP services</li>
</ul>
<div class="section" id="conventions">
<h4>Conventions<a class="headerlink" href="#conventions" title="Permalink to this headline">¶</a></h4>
<p>In this API, <em>client</em> refers to an external application that is calling CDAP using the HTTP interface.
<em>Application</em> refers to a user Application that has been deployed into CDAP.</p>
<p>All URLs referenced in this API have this base URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">http://&lt;host&gt;:&lt;port&gt;/v2</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">&lt;host&gt;</span></tt> is the host name of the CDAP server and <tt class="docutils literal"><span class="pre">&lt;port&gt;</span></tt> is the port that is set as the <tt class="docutils literal"><span class="pre">router.bind.port</span></tt>
in <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> (default: <tt class="docutils literal"><span class="pre">10000</span></tt>).</p>
<p><strong>Note:</strong> If SSL is enabled for CDAP, then the base URL uses <tt class="docutils literal"><span class="pre">https</span></tt> and <tt class="docutils literal"><span class="pre">&lt;port&gt;</span></tt> becomes the port that is set
as the <tt class="docutils literal"><span class="pre">router.ssl.bind.port</span></tt> in <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> (default: 10443).</p>
<p>In this API, the base URL is represented as:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;base-url&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT &lt;base-url&gt;/streams/&lt;new-stream-id&gt;</span>
</pre></div>
</div>
<p>means</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT http://&lt;host&gt;:&lt;port&gt;/v2/streams/&lt;new-stream-id&gt;</span>
</pre></div>
</div>
<p>Text that are variables that you are to replace is indicated by a series of angle brackets (<tt class="docutils literal"><span class="pre">&lt;</span> <span class="pre">&gt;</span></tt>). For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT &lt;base-url&gt;/streams/&lt;new-stream-id&gt;</span>
</pre></div>
</div>
<p>indicates that—in addition to the <tt class="docutils literal"><span class="pre">&lt;base-url&gt;</span></tt>—the text <tt class="docutils literal"><span class="pre">&lt;new-stream-id&gt;</span></tt> is a variable
and that you are to replace it with your value, perhaps in this case <em>mystream</em>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT &lt;base-url&gt;/streams/mystream</span>
</pre></div>
</div>
</div>
<div class="section" id="status-codes">
<h4>Status Codes<a class="headerlink" href="#status-codes" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">Common status codes</a> returned for all HTTP calls:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span></tt></td>
<td><tt class="docutils literal"><span class="pre">OK</span></tt></td>
<td>The request returned successfully</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">400</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Bad</span> <span class="pre">Request</span></tt></td>
<td>The request had a combination of parameters that is not recognized</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">401</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Unauthorized</span></tt></td>
<td>The request did not contain an authentication token</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">403</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Forbidden</span></tt></td>
<td>The request was authenticated but the client does not have permission</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">404</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The request did not address any of the known URIs</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">405</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Method</span> <span class="pre">Not</span> <span class="pre">Allowed</span></tt></td>
<td>A request was received with a method not supported for the URI</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">409</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Conflict</span></tt></td>
<td>A request could not be completed due to a conflict with the current resource state</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">500</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Internal</span> <span class="pre">Server</span> <span class="pre">Error</span></tt></td>
<td>An internal error occurred while processing the request</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">501</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Not</span> <span class="pre">Implemented</span></tt></td>
<td>A request contained a query that is not supported by this API</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> These returned status codes are not necessarily included in the descriptions of the API,
but a request may return any of these.</p>
</div>
<div class="section" id="working-with-cdap-security">
<h4>Working with CDAP Security<a class="headerlink" href="#working-with-cdap-security" title="Permalink to this headline">¶</a></h4>
<p>When working with a CDAP cluster with security enabled (<tt class="docutils literal"><span class="pre">security.enabled=true</span></tt> in
<tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt>), all calls to the HTTP RESTful APIs must be authenticated. Clients must first
obtain an access token from the authentication server (see the <em>Client Authentication</em> section of the
Developer Guide <a class="reference internal" href="admin.html#security"><em>CDAP Security.</em></a>).
In order to authenticate, all client requests must supply this access token in the
<tt class="docutils literal"><span class="pre">Authorization</span></tt> header of the request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">Authorization: Bearer &lt;token&gt;</span>
</pre></div>
</div>
<p>For CDAP-issued access tokens, the authentication scheme must always be <tt class="docutils literal"><span class="pre">Bearer</span></tt>.</p>
</div>
</div>
<div class="section" id="stream-http-api">
<span id="rest-streams"></span><h3>Stream HTTP API<a class="headerlink" href="#stream-http-api" title="Permalink to this headline">¶</a></h3>
<p>This interface supports creation of a Stream; sending, reading, and truncating events to and from a Stream; and setting the TTL property of a Stream.</p>
<p>Streams may have multiple consumers (for example, multiple Flows), each of which may be a group of different agents (for example, multiple instances of a Flowlet).</p>
<div class="section" id="creating-a-stream">
<h4>Creating a Stream<a class="headerlink" href="#creating-a-stream" title="Permalink to this headline">¶</a></h4>
<p>A Stream can be created with an HTTP PUT method to the URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT &lt;base-url&gt;/streams/&lt;new-stream-id&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;new-stream-id&gt;</span></tt></td>
<td>Name of the Stream to be created</td>
</tr>
</tbody>
</table>
<div class="section" id="http-responses">
<h5>HTTP Responses<a class="headerlink" href="#http-responses" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The event either successfully created a Stream or the Stream already exists</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h5>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">PUT</span> <span class="pre">&lt;base-url&gt;/streams/mystream</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Create a new Stream named <em>mystream</em></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="comments">
<h5>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">&lt;new-stream-id&gt;</span></tt> should only contain ASCII letters, digits and hyphens.</li>
<li>If the Stream already exists, no error is returned, and the existing Stream remains in place.</li>
</ul>
</div>
</div>
<div class="section" id="sending-events-to-a-stream">
<h4>Sending Events to a Stream<a class="headerlink" href="#sending-events-to-a-stream" title="Permalink to this headline">¶</a></h4>
<p>An event can be sent to a Stream by sending an HTTP POST method to the URL of the Stream:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/streams/&lt;stream-id&gt;</span>
</pre></div>
</div>
<p>In cases where it is acceptable to have some events lost, events can be transmitted asynchronously to a Stream with higher throughput by sending an HTTP POST method to the <tt class="docutils literal"><span class="pre">async</span></tt> URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/streams/&lt;stream-id&gt;/async</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;stream-id&gt;</span></tt></td>
<td>Name of an existing Stream</td>
</tr>
</tbody>
</table>
<div class="section" id="id1">
<h5>HTTP Responses<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The event was successfully received and persisted</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">202</span> <span class="pre">ACCEPTED</span></tt></td>
<td>The event was successfully received but may not be persisted. Only the asynchronous endpoint will return this status code</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The Stream does not exist</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h5>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">POST</span> <span class="pre">&lt;base-url&gt;/streams/mystream</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Send an event to the existing Stream named <em>mystream</em></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h5>Comments<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<p>You can pass headers for the event as HTTP headers by prefixing them with the <em>stream-id</em>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;stream-id&gt;.&lt;property&gt;:&lt;string value&gt;</span>
</pre></div>
</div>
<p>After receiving the request, the HTTP handler transforms it into a Stream event:</p>
<ul class="simple">
<li>The body of the event is an identical copy of the bytes found in the body of the HTTP post request.</li>
<li>If the request contains any headers prefixed with the <em>stream-id</em>,
the <em>stream-id</em> prefix is stripped from the header name and
the header is added to the event.</li>
</ul>
</div>
</div>
<div class="section" id="reading-events-from-a-stream">
<h4>Reading Events from a Stream<a class="headerlink" href="#reading-events-from-a-stream" title="Permalink to this headline">¶</a></h4>
<p>Reading events from an existing Stream is performed with an HTTP GET method to the URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/streams/&lt;stream-id&gt;/events?start=&lt;startTime&gt;&amp;end=&lt;endTime&gt;&amp;limit=&lt;limit&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;stream-id&gt;</span></tt></td>
<td>Name of an existing Stream</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;startTime&gt;</span></tt></td>
<td>Optional timestamp in milliseconds to start reading events from (inclusive); default is 0</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;endTime&gt;</span></tt></td>
<td>Optional timestamp in milliseconds for the last event to read (exclusive); default is the maximum timestamp (2^63)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;limit&gt;</span></tt></td>
<td>Optional maximum number of events to read; default is unlimited</td>
</tr>
</tbody>
</table>
<div class="section" id="id4">
<h5>HTTP Responses<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The event was successfully received and the result of the read was returned</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">204</span> <span class="pre">No</span> <span class="pre">Content</span></tt></td>
<td>The Stream exists but there are no events that satisfy the request</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The Stream does not exist</td>
</tr>
</tbody>
</table>
<p>The response body is a JSON array with the Stream event objects as array elements:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">[</span>
<span class="go">  {&quot;timestamp&quot; : ... , &quot;headers&quot;: { ... }, &quot;body&quot; : ... },</span>
<span class="go">  {&quot;timestamp&quot; : ... , &quot;headers&quot;: { ... }, &quot;body&quot; : ... }</span>
<span class="go">]</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">timestamp</span></tt></td>
<td>Timestamp in milliseconds of the Stream event at ingestion time</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">headers</span></tt></td>
<td>A JSON map of all custom headers associated with the Stream event</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">body</span></tt></td>
<td>A printable string representing the event body; non-printable bytes are hex escaped in the format <tt class="docutils literal"><span class="pre">\x[hex-digit][hex-digit]</span></tt>, e.g. <tt class="docutils literal"><span class="pre">\x05</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id5">
<h5>Example<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/streams/mystream/events?limit=1</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Read the initial event from an existing Stream named <em>mystream</em></td>
</tr>
<tr class="row-odd"><th class="stub">Response body</th>
<td><tt class="docutils literal"><span class="pre">[</span> <span class="pre">{&quot;timestamp&quot;</span> <span class="pre">:</span> <span class="pre">1407806944181,</span> <span class="pre">&quot;headers&quot;</span> <span class="pre">:</span> <span class="pre">{</span> <span class="pre">},</span> <span class="pre">&quot;body&quot;</span> <span class="pre">:</span> <span class="pre">&quot;Hello</span> <span class="pre">World&quot;</span> <span class="pre">}</span> <span class="pre">]</span></tt></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="truncating-a-stream">
<h4>Truncating a Stream<a class="headerlink" href="#truncating-a-stream" title="Permalink to this headline">¶</a></h4>
<p>Truncating means deleting all events that were ever written to the Stream.
This is permanent and cannot be undone.
A Stream can be truncated with an HTTP POST method to the URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/streams/&lt;stream-id&gt;/truncate</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;stream-id&gt;</span></tt></td>
<td>Name of an existing Stream</td>
</tr>
</tbody>
</table>
<div class="section" id="id6">
<h5>HTTP Responses<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The Stream was successfully truncated</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The Stream <tt class="docutils literal"><span class="pre">&lt;stream-id&gt;</span></tt> does not exist</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id7">
<h5>Example<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">POST</span> <span class="pre">&lt;base-url&gt;/streams/mystream/truncate</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Delete all events in the Stream named <em>mystream</em></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="setting-time-to-live-property-of-a-stream">
<h4>Setting Time-To-Live Property of a Stream<a class="headerlink" href="#setting-time-to-live-property-of-a-stream" title="Permalink to this headline">¶</a></h4>
<p>The Time-To-Live (TTL) property governs how long an event is valid for consumption since
it was written to the Stream.
The default TTL for all Streams is infinite, meaning that events will never expire.
The TTL property of a Stream can be changed with an HTTP PUT method to the URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT &lt;base-url&gt;/streams/&lt;stream-id&gt;/config</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;stream-id&gt;</span></tt></td>
<td>Name of an existing Stream</td>
</tr>
</tbody>
</table>
<p>The new TTL value is passed in the request body as:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{ &quot;ttl&quot; : &lt;ttl-in-seconds&gt; }</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;ttl-in-seconds&gt;</span></tt></td>
<td>Number of seconds that an event will be valid for since ingested</td>
</tr>
</tbody>
</table>
<div class="section" id="id8">
<h5>HTTP Responses<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The stream TTL was changed successfully</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></tt></td>
<td>The TTL value is not a non-negative integer</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The Stream does not exist</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id9">
<h5>Example<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><p class="first"><tt class="docutils literal"><span class="pre">PUT</span> <span class="pre">&lt;base-url&gt;/streams/mystream/config</span></tt></p>
<p>with the new TTL value as a JSON string in the body:</p>
<div class="last highlight-console"><div class="highlight"><pre><span class="go">{ &quot;ttl&quot; : 86400 }</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Change the TTL property of the Stream named <em>mystream</em> to 1 day</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="dataset-http-api">
<span id="rest-datasets"></span><h3>Dataset HTTP API<a class="headerlink" href="#dataset-http-api" title="Permalink to this headline">¶</a></h3>
<p>The Dataset API allows you to interact with Datasets through HTTP. You can list, create, delete, and truncate Datasets. For details, see the
<a class="reference internal" href="dev-guide.html#datasets"><em>CDAP Developer Guide Advanced Features, Datasets section</em></a></p>
<div class="section" id="listing-all-datasets">
<h4>Listing all Datasets<a class="headerlink" href="#listing-all-datasets" title="Permalink to this headline">¶</a></h4>
<p>You can list all Datasets in CDAP by issuing an HTTP GET request to the URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/data/datasets</span>
</pre></div>
</div>
<p>The response body will contain a JSON-formatted list of the existing Datasets:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{</span>
<span class="go">   &quot;name&quot;:&quot;cdap.user.purchases&quot;,</span>
<span class="go">   &quot;type&quot;:&quot;co.cask.cdap.api.dataset.lib.ObjectStore&quot;,</span>
<span class="go">   &quot;properties&quot;:{</span>
<span class="go">      &quot;schema&quot;:&quot;...&quot;,</span>
<span class="go">      &quot;type&quot;:&quot;...&quot;</span>
<span class="go">   },</span>
<span class="go">   &quot;datasetSpecs&quot;:{</span>
<span class="go">      ...</span>
<span class="go">   }</span>
<span class="go"> }</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-a-dataset">
<h4>Creating a Dataset<a class="headerlink" href="#creating-a-dataset" title="Permalink to this headline">¶</a></h4>
<p>You can create a Dataset by issuing an HTTP PUT request to the URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT &lt;base-url&gt;/data/datasets/&lt;dataset-name&gt;</span>
</pre></div>
</div>
<p>with JSON-formatted name of the dataset type and properties in a body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{</span>
<span class="go">   &quot;typeName&quot;:&quot;&lt;type-name&gt;&quot;,</span>
<span class="go">   &quot;properties&quot;:{&lt;properties&gt;}</span>
<span class="go">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;dataset-name&gt;</span></tt></td>
<td>Name of the new Dataset</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;type-name&gt;</span></tt></td>
<td>Type of the new Dataset</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;properties&gt;</span></tt></td>
<td>Dataset properties, map of String to String.</td>
</tr>
</tbody>
</table>
<div class="section" id="id10">
<h5>HTTP Responses<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>Requested Dataset was successfully created</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>Requested Dataset type was not found</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">409</span> <span class="pre">Conflict</span></tt></td>
<td>Dataset with the same name already exists</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id11">
<h5>Example<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Request</th>
<td><tt class="docutils literal"><span class="pre">PUT</span> <span class="pre">&lt;base-url&gt;/data/datasets/mydataset</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Body</th>
<td><tt class="docutils literal"><span class="pre">{&quot;typeName&quot;:&quot;co.cask.cdap.api.dataset.table.Table&quot;,</span></tt> <tt class="docutils literal"><span class="pre">&quot;properties&quot;:{&quot;ttl&quot;:&quot;3600000&quot;}}</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">Description</th>
<td>Creates a Dataset named &#8220;mydataset&#8221; of the type &#8220;table&#8221; and time-to-live property set to 1 hour</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="updating-an-existing-dataset">
<h4>Updating an Existing Dataset<a class="headerlink" href="#updating-an-existing-dataset" title="Permalink to this headline">¶</a></h4>
<p>You can update an existing dataset&#8217;s table and properties by issuing an HTTP PUT request to the URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT &lt;base-url&gt;/data/datasets/&lt;dataset-name&gt;/properties</span>
</pre></div>
</div>
<p>with JSON-formatted name of the dataset type and properties in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{</span>
<span class="go">   &quot;typeName&quot;:&quot;&lt;type-name&gt;&quot;,</span>
<span class="go">   &quot;properties&quot;:{&lt;properties&gt;}</span>
<span class="go">}</span>
</pre></div>
</div>
<p><strong>Note:</strong> The Dataset must exist, and the instance and type passed must match with the existing Dataset.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;dataset-name&gt;</span></tt></td>
<td>Name of the existing Dataset</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;type-name&gt;</span></tt></td>
<td>Type of the existing Dataset</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;properties&gt;</span></tt></td>
<td>Dataset properties as a map of String to String</td>
</tr>
</tbody>
</table>
<div class="section" id="id12">
<h5>HTTP Responses<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>Requested Dataset was successfully updated</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>Requested Dataset instance was not found</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">409</span> <span class="pre">Conflict</span></tt></td>
<td>Dataset Type provided for update is different from the existing Dataset Type</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id13">
<h5>Example<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Request</th>
<td><tt class="docutils literal"><span class="pre">PUT</span> <span class="pre">&lt;base-url&gt;/data/datasets/mydataset/properties</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Body</th>
<td><tt class="docutils literal"><span class="pre">{&quot;typeName&quot;:&quot;co.cask.cdap.api.dataset.table.Table&quot;,</span></tt> <tt class="docutils literal"><span class="pre">&quot;properties&quot;:{&quot;ttl&quot;:&quot;7200000&quot;}}</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">Description</th>
<td>For the &#8220;mydataset&#8221; of type &#8220;Table&#8221;, update the Dataset and its time-to-live property to 2 hours</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="deleting-a-dataset">
<h4>Deleting a Dataset<a class="headerlink" href="#deleting-a-dataset" title="Permalink to this headline">¶</a></h4>
<p>You can delete a Dataset by issuing an HTTP DELETE request to the URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">DELETE &lt;base-url&gt;/data/datasets/&lt;dataset-name&gt;</span>
</pre></div>
</div>
<div class="section" id="id14">
<h5>HTTP Responses<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>Dataset was successfully deleted</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>Dataset named <tt class="docutils literal"><span class="pre">&lt;dataset-name&gt;</span></tt> could not be found</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id15">
<h5>Example<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Request</th>
<td><tt class="docutils literal"><span class="pre">DELETE</span> <span class="pre">&lt;base-url&gt;/data/datasets/mydataset</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Deletes the Dataset named &#8220;mydataset&#8221;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="deleting-all-datasets">
<h4>Deleting all Datasets<a class="headerlink" href="#deleting-all-datasets" title="Permalink to this headline">¶</a></h4>
<p>If the property <tt class="docutils literal"><span class="pre">enable.unrecoverable.reset</span></tt> in <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> is set to <tt class="docutils literal"><span class="pre">true</span></tt>, you can delete all Datasets
by issuing an HTTP DELETE request to the URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">DELETE &lt;base-url&gt;/data/unrecoverable/datasets</span>
</pre></div>
</div>
<div class="section" id="id16">
<h5>HTTP Responses<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>All Datasets were successfully deleted</td>
</tr>
</tbody>
</table>
<p>If the property <tt class="docutils literal"><span class="pre">enable.unrecoverable.reset</span></tt> in <tt class="docutils literal"><span class="pre">cdap-site.xml</span></tt> is not set to <tt class="docutils literal"><span class="pre">true</span></tt>,
this operation will return a Status Code <tt class="docutils literal"><span class="pre">403</span> <span class="pre">Forbidden</span></tt>.</p>
</div>
</div>
<div class="section" id="truncating-a-dataset">
<h4>Truncating a Dataset<a class="headerlink" href="#truncating-a-dataset" title="Permalink to this headline">¶</a></h4>
<p>You can truncate a Dataset by issuing an HTTP POST request to the URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/data/datasets/&lt;dataset-name&gt;/admin/truncate</span>
</pre></div>
</div>
<p>This will clear the existing data from the Dataset. This cannot be undone.</p>
<div class="section" id="id17">
<h5>HTTP Responses<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>Dataset was successfully truncated</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="query-http-api">
<h3>Query HTTP API<a class="headerlink" href="#query-http-api" title="Permalink to this headline">¶</a></h3>
<p>This interface supports submitting SQL queries over Datasets. Queries are
processed asynchronously; to obtain query results, perform these steps:</p>
<ul class="simple">
<li>first, <strong>submit</strong> the query;</li>
<li>then poll for the query&#8217;s <strong>status</strong> until it is finished;</li>
<li>once finished, retrieve the <strong>result schema</strong> and the <strong>results</strong>;</li>
<li>finally, <strong>close the query</strong> to free the resources that it holds.</li>
</ul>
<div class="section" id="submitting-a-query">
<h4>Submitting a Query<a class="headerlink" href="#submitting-a-query" title="Permalink to this headline">¶</a></h4>
<p>To submit a SQL query, post the query string to the <tt class="docutils literal"><span class="pre">queries</span></tt> URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/data/explore/queries</span>
</pre></div>
</div>
<p>The body of the request must contain a JSON string of the form:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{</span>
<span class="go">  &quot;query&quot;: &quot;&lt;SQL-query-string&gt;&quot;</span>
<span class="go">}</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">&lt;SQL-query-string&gt;</span></tt> is the actual SQL query.</p>
<div class="section" id="id18">
<h5>HTTP Responses<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The query execution was successfully initiated, and the body will contain the query-handle
used to identify the query in subsequent requests</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></tt></td>
<td>The query is not well-formed or contains an error, such as a nonexistent table name.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id19">
<h5>Comments<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h5>
<p>If the query execution was successfully initiated, the body will contain a handle
used to identify the query in subsequent requests:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{ &quot;handle&quot;:&quot;&lt;query-handle&gt;&quot; }</span>
</pre></div>
</div>
</div>
<div class="section" id="id20">
<h5>Example<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Request</th>
<td><tt class="docutils literal"><span class="pre">PUT</span> <span class="pre">&lt;base-url&gt;/data/explore/queries</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Body</th>
<td><tt class="docutils literal"><span class="pre">{&quot;query&quot;:&quot;SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">cdap_user_mydataset</span> <span class="pre">LIMIT</span> <span class="pre">5&quot;}</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">HTTP Response</th>
<td><tt class="docutils literal"><span class="pre">{&quot;handle&quot;:&quot;57cf1b01-8dba-423a-a8b4-66cd29dd75e2&quot;}</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Submit a query to get the first 5 entries from the Dataset, <em>mydataset</em></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="status-of-a-query">
<h4>Status of a Query<a class="headerlink" href="#status-of-a-query" title="Permalink to this headline">¶</a></h4>
<p>The status of a query is obtained using a HTTP GET request to the query&#8217;s URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/data/explore/queries/&lt;query-handle&gt;/status</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;query-handle&gt;</span></tt></td>
<td>Handle obtained when the query was submitted</td>
</tr>
</tbody>
</table>
<div class="section" id="id21">
<h5>HTTP Responses<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The query exists and the body contains its status</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The query handle does not match any current query.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id22">
<h5>Comments<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h5>
<p>If the query exists, the body will contain the status of its execution
and whether the query has a results set:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{</span>
<span class="go">  &quot;status&quot;:&quot;&lt;status-code&gt;&quot;,</span>
<span class="go">  &quot;hasResults&quot;:&lt;boolean&gt;</span>
<span class="go"> }</span>
</pre></div>
</div>
<p>Status can be one of the following: <tt class="docutils literal"><span class="pre">INITIALIZED</span></tt>, <tt class="docutils literal"><span class="pre">RUNNING</span></tt>, <tt class="docutils literal"><span class="pre">FINISHED</span></tt>, <tt class="docutils literal"><span class="pre">CANCELED</span></tt>, <tt class="docutils literal"><span class="pre">CLOSED</span></tt>,
<tt class="docutils literal"><span class="pre">ERROR</span></tt>, <tt class="docutils literal"><span class="pre">UNKNOWN</span></tt>, and <tt class="docutils literal"><span class="pre">PENDING</span></tt>.</p>
</div>
<div class="section" id="id23">
<h5>Example<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Request</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/data/explore/queries/57cf1b01-8dba-423a-a8b4-66cd29dd75e2/status</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">HTTP Response</th>
<td><tt class="docutils literal"><span class="pre">{&quot;status&quot;:&quot;FINISHED&quot;,&quot;hasResults&quot;:true}</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">Description</th>
<td>Retrieve the status of the query which has the handle 57cf1b01-8dba-423a-a8b4-66cd29dd75e2</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="obtaining-the-result-schema">
<h4>Obtaining the Result Schema<a class="headerlink" href="#obtaining-the-result-schema" title="Permalink to this headline">¶</a></h4>
<p>If the query&#8217;s status is <tt class="docutils literal"><span class="pre">FINISHED</span></tt> and it has results, you can obtain the schema of the results:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/data/explore/queries/&lt;query-handle&gt;/schema</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;query-handle&gt;</span></tt></td>
<td>Handle obtained when the query was submitted</td>
</tr>
</tbody>
</table>
<div class="section" id="id24">
<h5>HTTP Responses<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The query was successfully received and the query schema was returned in the body</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The query handle does not match any current query</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id25">
<h5>Comments<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h5>
<p>The query&#8217;s result schema is returned in a JSON body as a list of columns,
each given by its name, type and position; if the query has no result set, this list is empty:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">[</span>
<span class="go">  {&quot;name&quot;:&quot;&lt;name&gt;&quot;, &quot;type&quot;:&quot;&lt;type&gt;&quot;, &quot;position&quot;:&lt;int&gt;},</span>
<span class="go">  ...</span>
<span class="go">]</span>
</pre></div>
</div>
<p>The type of each column is a data type as defined in the <a class="reference external" href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL">Hive language manual</a>.</p>
</div>
<div class="section" id="id26">
<h5>Example<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Request</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/data/explore/queries/57cf1b01-8dba-423a-a8b4-66cd29dd75e2/schema</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">HTTP Response</th>
<td><tt class="docutils literal"><span class="pre">[{&quot;name&quot;:&quot;cdap_user_mydataset.key&quot;,&quot;type&quot;:&quot;array&lt;tinyint&gt;&quot;,&quot;position&quot;:1},</span></tt>
<tt class="docutils literal"><span class="pre">{&quot;name&quot;:&quot;cdap_user_mydataset.value&quot;,&quot;type&quot;:&quot;array&lt;tinyint&gt;&quot;,&quot;position&quot;:2}]</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">Description</th>
<td>Retrieve the schema of the result of the query which has the handle 57cf1b01-8dba-423a-a8b4-66cd29dd75e2</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="retrieving-query-results">
<h4>Retrieving Query Results<a class="headerlink" href="#retrieving-query-results" title="Permalink to this headline">¶</a></h4>
<p>Query results can be retrieved in batches after the query is finished, optionally specifying the batch
size in the body of the request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/data/explore/queries/&lt;query-handle&gt;/next</span>
</pre></div>
</div>
<p>The body of the request can contain a JSON string specifying the batch size:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{</span>
<span class="go">  &quot;size&quot;:&lt;int&gt;</span>
<span class="go">}</span>
</pre></div>
</div>
<p>If the batch size is not specified, the default is 20.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;query-handle&gt;</span></tt></td>
<td>Handle obtained when the query was submitted</td>
</tr>
</tbody>
</table>
<div class="section" id="id27">
<h5>HTTP Responses<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The event was successfully received and the result of the query was returned in the body</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The query handle does not match any current query</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id28">
<h5>Comments<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h5>
<p>The results are returned in a JSON body as a list of columns,
each given as a structure containing a list of column values.:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">[</span>
<span class="go">  { &quot;columns&quot;: [ &lt;value_1&gt;, &lt;value_2&gt;, ..., ] },</span>
<span class="go">  ...</span>
<span class="go">]</span>
</pre></div>
</div>
<p>The value at each position has the type that was returned in the result schema for that position.
For example, if the returned type was <tt class="docutils literal"><span class="pre">INT</span></tt>, then the value will be an integer literal,
whereas for <tt class="docutils literal"><span class="pre">STRING</span></tt> or <tt class="docutils literal"><span class="pre">VARCHAR</span></tt> the value will be a string literal.</p>
<p>Repeat the query to retrieve subsequent results. If all results of the query have already
been retrieved, then the returned list is empty.</p>
</div>
</div>
<div class="section" id="closing-a-query">
<h4>Closing a Query<a class="headerlink" href="#closing-a-query" title="Permalink to this headline">¶</a></h4>
<p>The query can be closed by issuing an HTTP DELETE against its URL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">DELETE &lt;base-url&gt;/data/explore/queries/&lt;query-handle&gt;</span>
</pre></div>
</div>
<p>This frees all resources that are held by this query.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;query-handle&gt;</span></tt></td>
<td>Handle obtained when the query was submitted</td>
</tr>
</tbody>
</table>
<div class="section" id="id29">
<h5>HTTP Responses<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The query was closed</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></tt></td>
<td>The query was not in a state that could be closed; either wait until it is finished, or cancel it</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The query handle does not match any current query</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id30">
<h5>Example<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Request</th>
<td><tt class="docutils literal"><span class="pre">DELETE</span> <span class="pre">&lt;base-url&gt;/data/explore/queries/57cf1b01-8dba-423a-a8b4-66cd29dd75e2</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Close the query which has the handle 57cf1b01-8dba-423a-a8b4-66cd29dd75e2</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="list-of-queries">
<h4>List of Queries<a class="headerlink" href="#list-of-queries" title="Permalink to this headline">¶</a></h4>
<p>To return a list of queries, use:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/data/explore/queries?limit=&lt;limit&gt;&amp;cursor=&lt;cursor&gt;&amp;offset=&lt;offset&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;limit&gt;</span></tt></td>
<td>Optional number indicating how many results to return in the response. By default, 50 results will be returned</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;cursor&gt;</span></tt></td>
<td>Optional string specifying if the results returned should be in the forward or reverse direction.
Should be one of <tt class="docutils literal"><span class="pre">next</span></tt> or <tt class="docutils literal"><span class="pre">prev</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;offset&gt;</span></tt></td>
<td>Optional offset for pagination, returns the results that are greater than offset if the cursor is <tt class="docutils literal"><span class="pre">next</span></tt> or
results that are less than offset if cursor is <tt class="docutils literal"><span class="pre">prev</span></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="id31">
<h5>Example<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Request</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/data/explore/queries</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">HTTP Response</th>
<td><tt class="docutils literal"><span class="pre">[{</span></tt>
``   &#8220;timestamp&#8221;: 1411266478717,``
``   &#8220;statement&#8221;: &#8220;SELECT * FROM cdap_user_mydataset&#8221;,``
``   &#8220;status&#8221;: &#8220;FINISHED&#8221;,``
``   &#8220;query_handle&#8221;: &#8220;57cf1b01-8dba-423a-a8b4-66cd29dd75e2&#8221;,
``   &#8220;has_results&#8221;: true,
``   &#8220;is_active&#8221;: false``
<tt class="docutils literal"><span class="pre">}]</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">Description</th>
<td>Close the query which has the handle 57cf1b01-8dba-423a-a8b4-66cd29dd75e2</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id32">
<h5>Comments<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h5>
<p>The results are returned as a JSON array, with each element containing information about the query:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">[</span>
<span class="go">  {</span>
<span class="go">      &quot;timestamp&quot;: 1407192465183,</span>
<span class="go">      &quot;statement&quot;: &quot;SHOW TABLES&quot;,</span>
<span class="go">      &quot;status&quot;: &quot;FINISHED&quot;,</span>
<span class="go">      &quot;query_handle&quot;: &quot;319d9438-903f-49b8-9fff-ac71cf5d173d&quot;,</span>
<span class="go">      &quot;has_results&quot;: true,</span>
<span class="go">      &quot;is_active&quot;: false</span>
<span class="go">  },</span>
<span class="go">  ...</span>
<span class="go">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="download-query-results">
<h4>Download Query Results<a class="headerlink" href="#download-query-results" title="Permalink to this headline">¶</a></h4>
<p>To download the results of a query, use:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/data/explore/queries/&lt;query-handle&gt;/download</span>
</pre></div>
</div>
<p>The results of the query are returned in CSV format.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;query-handle&gt;</span></tt></td>
<td>Handle obtained when the query was submitted or via a list of queries</td>
</tr>
</tbody>
</table>
<div class="section" id="id33">
<h5>Comments<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h5>
<p>The query results can be downloaded only once. The RESTful API will return a Status Code <tt class="docutils literal"><span class="pre">409</span> <span class="pre">Conflict</span></tt>
if results for the <tt class="docutils literal"><span class="pre">query-handle</span></tt> are attempted to be downloaded again.</p>
</div>
<div class="section" id="id34">
<h5>HTTP Responses<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The HTTP call was successful.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The query handle does not match any current query.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">409</span> <span class="pre">Conflict</span></tt></td>
<td>The query results was already downloaded.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="hive-table-schema">
<h4>Hive Table Schema<a class="headerlink" href="#hive-table-schema" title="Permalink to this headline">¶</a></h4>
<p>You can obtain the schema of the underlying Hive Table with:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/data/explore/datasets/&lt;dataset-name&gt;/schema</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;dataset-name&gt;</span></tt></td>
<td>Name of the Dataset whose schema is to be retrieved</td>
</tr>
</tbody>
</table>
<div class="section" id="id35">
<h5>Comments<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h5>
<p>The results are returned as a JSON Map, with <tt class="docutils literal"><span class="pre">key</span></tt> containing the column names of the underlying table and
<tt class="docutils literal"><span class="pre">value</span></tt> containing the column types of the underlying table:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{</span>
<span class="go">  &quot;key&quot;: &quot;array&lt;tinyint&gt;&quot;,</span>
<span class="go">  &quot;value&quot;: &quot;array&lt;tinyint&gt;&quot;</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id36">
<h5>HTTP Responses<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The HTTP call was successful.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The dataset was not found.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="procedure-http-api">
<h3>Procedure HTTP API<a class="headerlink" href="#procedure-http-api" title="Permalink to this headline">¶</a></h3>
<p>This interface supports sending calls to the methods of an Application’s Procedures.
See the <a class="reference external" href="#cdap-client-http-api">CDAP Client HTTP API</a> for how to control the life cycle of
Procedures.</p>
<div class="section" id="executing-procedures">
<h4>Executing Procedures<a class="headerlink" href="#executing-procedures" title="Permalink to this headline">¶</a></h4>
<p>To call a method in an Application&#8217;s Procedure, send the method name as part of the request URL
and the arguments as a JSON string in the body of the request.</p>
<p>The request is an HTTP POST:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/apps/&lt;app-id&gt;/procedures/&lt;procedure-id&gt;/methods/&lt;method-id&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Name of the Application being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;procedure-id&gt;</span></tt></td>
<td>Name of the Procedure being called</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;method-id&gt;</span></tt></td>
<td>Name of the method being called</td>
</tr>
</tbody>
</table>
<div class="section" id="id37">
<h5>HTTP Responses<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The event successfully called the method, and the body contains the results</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></tt></td>
<td>The Application, Procedure and method exist, but the arguments are not as expected</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The Application, Procedure, or method does not exist</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">503</span> <span class="pre">Service</span> <span class="pre">Unavailable</span></tt></td>
<td>The Procedure method is unavailable. For example, the procedure may not have been started yet.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id38">
<h5>Example<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">POST</span> <span class="pre">&lt;base-url&gt;/apps/WordCount/procedures/RetrieveCounts/methods/getCount</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td><p class="first">Call the <tt class="docutils literal"><span class="pre">getCount()</span></tt> method of the <em>RetrieveCounts</em> Procedure in the <em>WordCount</em> Application
with the arguments as a JSON string in the body:</p>
<div class="last highlight-console"><div class="highlight"><pre><span class="go">{&quot;word&quot;:&quot;a&quot;}</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="service-http-api">
<h3>Service HTTP API<a class="headerlink" href="#service-http-api" title="Permalink to this headline">¶</a></h3>
<p>This interface supports making requests to the methods of an Application’s Services.
See the <a class="reference external" href="#cdap-client-http-api">CDAP Client HTTP API</a> for how to control the life cycle of
Services.</p>
<div class="section" id="requesting-service-methods">
<h4>Requesting Service Methods<a class="headerlink" href="#requesting-service-methods" title="Permalink to this headline">¶</a></h4>
<p>To make a request to a Service&#8217;s method, send the method&#8217;s path as part of the request URL along with any additional
headers and body.</p>
<p>The request type is defined by the Service&#8217;s method:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;REQUEST-TYPE&gt; &lt;base-url&gt;/apps/&lt;app-id&gt;/services/&lt;service-id&gt;/methods/&lt;method-id&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;REQUEST-TYPE&gt;</span></tt></td>
<td>One of GET, POST, PUT and DELETE. This is defined by the handler method.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Name of the Application being called</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;service-id&gt;</span></tt></td>
<td>Name of the Service being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;method-id&gt;</span></tt></td>
<td>Name of the method being called</td>
</tr>
</tbody>
</table>
<div class="section" id="id39">
<h5>HTTP Responses<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">503</span> <span class="pre">Service</span> <span class="pre">Unavailable</span></tt></td>
<td>The Service is unavailable. For example, it may not yet have been started.</td>
</tr>
</tbody>
</table>
<p>Other responses are defined by the Service&#8217;s method.</p>
</div>
<div class="section" id="id40">
<h5>Example<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/apps/ExampleApplication/services/PingService/methods/ping</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Make a request to the <tt class="docutils literal"><span class="pre">ping</span></tt> endpoint of the PingService in ExampleApplication.</td>
</tr>
<tr class="row-odd"><th class="stub">Response status code</th>
<td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="cdap-client-http-api">
<span id="id41"></span><h3>CDAP Client HTTP API<a class="headerlink" href="#cdap-client-http-api" title="Permalink to this headline">¶</a></h3>
<p>Use the CDAP Client HTTP API to deploy or delete Applications and manage the life cycle of
Flows, Procedures, MapReduce jobs, Workflows, and Custom Services.</p>
<div class="section" id="deploy-an-application">
<h4>Deploy an Application<a class="headerlink" href="#deploy-an-application" title="Permalink to this headline">¶</a></h4>
<p>To deploy an Application from your local file system, submit an HTTP POST request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/apps</span>
</pre></div>
</div>
<p>with the name of the JAR file as a header:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">X-Archive-Name: &lt;JAR filename&gt;</span>
</pre></div>
</div>
<p>and its content as the body of the request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;JAR binary content&gt;</span>
</pre></div>
</div>
<p>Invoke the same command to update an Application to a newer version.
However, be sure to stop all of its Flows, Procedures and MapReduce jobs before updating the Application.</p>
<p>To list all of the deployed applications, issue an HTTP GET request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps</span>
</pre></div>
</div>
<p>This will return a JSON String map that lists each Application with its name and description.</p>
</div>
<div class="section" id="details-of-a-deployed-application">
<h4>Details of A Deployed Application<a class="headerlink" href="#details-of-a-deployed-application" title="Permalink to this headline">¶</a></h4>
<p>For detailed information on an application that has been deployed, use:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;</span>
</pre></div>
</div>
<p>The information will be returned in the body of the response.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Name of the Application</td>
</tr>
</tbody>
</table>
<div class="section" id="id42">
<h5>HTTP Responses<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The event successfully called the method, and the body contains the results</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="delete-an-application">
<h4>Delete an Application<a class="headerlink" href="#delete-an-application" title="Permalink to this headline">¶</a></h4>
<p>To delete an Application together with all of its Flows, Procedures and MapReduce jobs, submit an HTTP DELETE:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">DELETE &lt;base-url&gt;/apps/&lt;application-name&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;application-name&gt;</span></tt></td>
<td>Name of the Application to be deleted</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The <tt class="docutils literal"><span class="pre">&lt;application-name&gt;</span></tt> in this URL is the name of the Application
as configured by the Application Specification,
and not necessarily the same as the name of the JAR file that was used to deploy the Application.
Also, this does not delete the Streams and Datasets associated with the Application
because they belong to your account, not the Application.</p>
</div>
<div class="section" id="start-stop-status-and-runtime-arguments">
<h4>Start, Stop, Status, and Runtime Arguments<a class="headerlink" href="#start-stop-status-and-runtime-arguments" title="Permalink to this headline">¶</a></h4>
<p>After an Application is deployed, you can start and stop its Flows, Procedures, MapReduce
jobs, Workflows, and Custom Services, and query for their status using HTTP POST and GET methods:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/apps/&lt;app-id&gt;/&lt;element-type&gt;/&lt;element-id&gt;/&lt;operation&gt;</span>
<span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;/&lt;element-type&gt;/&lt;element-id&gt;/status</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Name of the Application being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;element-type&gt;</span></tt></td>
<td>One of <tt class="docutils literal"><span class="pre">flows</span></tt>, <tt class="docutils literal"><span class="pre">procedures</span></tt>, <tt class="docutils literal"><span class="pre">mapreduce</span></tt>, <tt class="docutils literal"><span class="pre">workflows</span></tt> or <tt class="docutils literal"><span class="pre">services</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;element-id&gt;</span></tt></td>
<td>Name of the element (<em>Flow</em>, <em>Procedure</em>, <em>MapReduce</em>, <em>Workflow</em>, or <em>Custom Service</em>)
being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;operation&gt;</span></tt></td>
<td>One of <tt class="docutils literal"><span class="pre">start</span></tt> or <tt class="docutils literal"><span class="pre">stop</span></tt></td>
</tr>
</tbody>
</table>
<p>You can retrieve the status of multiple elements from different applications and element types
using an HTTP POST method:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/status</span>
</pre></div>
</div>
<p>with a JSON array in the request body consisting of multiple JSON objects with these parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;appId&quot;</span></tt></td>
<td>Name of the Application being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&quot;programType&quot;</span></tt></td>
<td>One of <tt class="docutils literal"><span class="pre">flow</span></tt>, <tt class="docutils literal"><span class="pre">procedure</span></tt>, <tt class="docutils literal"><span class="pre">mapreduce</span></tt>, <tt class="docutils literal"><span class="pre">workflow</span></tt> or <tt class="docutils literal"><span class="pre">service</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;programId&quot;</span></tt></td>
<td>Name of the element (<em>Flow</em>, <em>Procedure</em>, <em>MapReduce</em>, <em>Workflow</em>, or <em>Custom Service</em>)
being called</td>
</tr>
</tbody>
</table>
<p>The response will be the same JSON array with additional parameters for each of the underlying JSON objects:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;status&quot;</span></tt></td>
<td>Maps to the status of an individual JSON object&#8217;s queried element
if the query is valid and the element was found.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&quot;statusCode&quot;</span></tt></td>
<td>The status code from retrieving the status of an individual JSON object.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;error&quot;</span></tt></td>
<td>If an error, a description of why the status was not retrieved (the specified element was not found, etc.)</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">status</span></tt> and <tt class="docutils literal"><span class="pre">error</span></tt> fields are mutually exclusive meaning if there is an error,
then there will never be a status and vice versa.</p>
<div class="section" id="examples">
<h5>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">&nbsp;</th>
<td><strong>Example / Description</strong></td>
</tr>
<tr class="row-even"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">POST</span> <span class="pre">&lt;base-url&gt;/apps/HelloWorld/flows/WhoFlow/start</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">&nbsp;</th>
<td>Start a Flow <em>WhoFlow</em> in the Application <em>HelloWorld</em></td>
</tr>
<tr class="row-even"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">POST</span> <span class="pre">&lt;base-url&gt;/apps/Count/procedures/GetCounts/stop</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">&nbsp;</th>
<td>Stop the Procedure <em>GetCounts</em> in the Application <em>Count</em></td>
</tr>
<tr class="row-even"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/apps/HelloWorld/flows/WhoFlow/status</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">&nbsp;</th>
<td>Get the status of the Flow <em>WhoFlow</em> in the Application <em>HelloWorld</em></td>
</tr>
<tr class="row-even"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">POST</span> <span class="pre">&lt;base-url&gt;/status</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">HTTP Body</th>
<td><tt class="docutils literal"><span class="pre">[{&quot;appId&quot;:</span> <span class="pre">&quot;MyApp&quot;,</span> <span class="pre">&quot;programType&quot;:</span> <span class="pre">&quot;flow&quot;,</span> <span class="pre">&quot;programId&quot;:</span> <span class="pre">&quot;MyFlow&quot;},</span></tt>
<tt class="docutils literal"><span class="pre">{&quot;appId&quot;:</span> <span class="pre">&quot;MyApp2&quot;,</span> <span class="pre">&quot;programType&quot;:</span> <span class="pre">&quot;procedure&quot;,</span> <span class="pre">&quot;programId&quot;:</span> <span class="pre">&quot;MyProcedure&quot;}]</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">HTTP Response</th>
<td><tt class="docutils literal"><span class="pre">[{&quot;appId&quot;:&quot;MyApp&quot;,</span> <span class="pre">&quot;programType&quot;:&quot;flow&quot;,</span> <span class="pre">&quot;programId&quot;:&quot;MyFlow&quot;,</span> <span class="pre">&quot;status&quot;:&quot;RUNNING&quot;,</span> <span class="pre">&quot;statusCode&quot;:200},</span></tt>
<tt class="docutils literal"><span class="pre">{&quot;appId&quot;:&quot;MyApp2&quot;,</span> <span class="pre">&quot;programType&quot;:&quot;procedure&quot;,</span> <span class="pre">&quot;programId&quot;:&quot;MyProcedure&quot;,</span></tt>
<tt class="docutils literal"><span class="pre">&quot;error&quot;:&quot;Program</span> <span class="pre">not</span> <span class="pre">found&quot;,</span> <span class="pre">&quot;statusCode&quot;:404}]</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">&nbsp;</th>
<td>Try to get the status of the Flow <em>MyFlow</em> in the Application <em>MyApp</em> and of the Procedure <em>MyProcedure</em>
in the Application <em>MyApp2</em></td>
</tr>
</tbody>
</table>
<p>When starting an element, you can optionally specify runtime arguments as a JSON map in the request body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/apps/HelloWorld/flows/WhoFlow/start</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{&quot;foo&quot;:&quot;bar&quot;,&quot;this&quot;:&quot;that&quot;}</span>
</pre></div>
</div>
<p>CDAP will use these these runtime arguments only for this single invocation of the
element. To save the runtime arguments so that CDAP will use them every time you start the element,
issue an HTTP PUT with the parameter <tt class="docutils literal"><span class="pre">runtimeargs</span></tt>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">PUT &lt;base-url&gt;/apps/HelloWorld/flows/WhoFlow/runtimeargs</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{&quot;foo&quot;:&quot;bar&quot;,&quot;this&quot;:&quot;that&quot;}</span>
</pre></div>
</div>
<p>To retrieve the runtime arguments saved for an Application&#8217;s element, issue an HTTP GET
request to the element&#8217;s URL using the same parameter <tt class="docutils literal"><span class="pre">runtimeargs</span></tt>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/HelloWorld/flows/WhoFlow/runtimeargs</span>
</pre></div>
</div>
<p>This will return the saved runtime arguments in JSON format.</p>
</div>
</div>
<div class="section" id="container-information">
<h4>Container Information<a class="headerlink" href="#container-information" title="Permalink to this headline">¶</a></h4>
<p>To find out the address of an element&#8217;s container host and the container’s debug port, you can query
CDAP for a Procedure, Flow or Service’s live info via an HTTP GET method:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;/&lt;element-type&gt;/&lt;element-id&gt;/live-info</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Name of the Application being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;element-type&gt;</span></tt></td>
<td>One of <tt class="docutils literal"><span class="pre">flows</span></tt>, <tt class="docutils literal"><span class="pre">procedures</span></tt> or <tt class="docutils literal"><span class="pre">services</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;element-id&gt;</span></tt></td>
<td>Name of the element (<em>Flow</em>, <em>Procedure</em> or <em>Custom Service</em>)</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/WordCount/flows/WordCounter/live-info</span>
</pre></div>
</div>
<p>The response is formatted in JSON; an example of this is shown in the</p>
<p><a class="reference internal" href="tools.html#testframework"><em>CDAP Testing and Debugging Guide.</em></a></p>
</div>
<div class="section" id="scale">
<h4>Scale<a class="headerlink" href="#scale" title="Permalink to this headline">¶</a></h4>
<p>You can retrieve the instance count executing different elements from various applications and
different element types using an HTTP POST method:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/instances</span>
</pre></div>
</div>
<p>with a JSON array in the request body consisting of multiple JSON objects with these parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;appId&quot;</span></tt></td>
<td>Name of the Application being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&quot;programType&quot;</span></tt></td>
<td>One of <tt class="docutils literal"><span class="pre">flow</span></tt>, <tt class="docutils literal"><span class="pre">procedure</span></tt>, or <tt class="docutils literal"><span class="pre">service</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;programId&quot;</span></tt></td>
<td>Name of the element (<em>Flow</em>, <em>Procedure</em>, or <em>Custom Service</em>) being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&quot;runnableId&quot;</span></tt></td>
<td>Name of the <em>Flowlet</em> or <em>Service</em> if querying either a <em>Flow</em> or <em>User Service</em>. This parameter
does not apply to <em>Procedures</em> because the <tt class="docutils literal"><span class="pre">programId</span></tt> is the same as the <tt class="docutils literal"><span class="pre">runnableId</span></tt> for a <em>Procedure</em></td>
</tr>
</tbody>
</table>
<p>The response will be the same JSON array with additional parameters for each of the underlying JSON objects:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;requested&quot;</span></tt></td>
<td>Number of instances the user requested for the program defined by the individual JSON object&#8217;s parameters</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&quot;provisioned&quot;</span></tt></td>
<td>Number of instances that are actually running for the program defined by the individual JSON object&#8217;s parameters.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;statusCode&quot;</span></tt></td>
<td>The status code from retrieving the instance count of an individual JSON object.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&quot;error&quot;</span></tt></td>
<td>If an error, a description of why the status was not retrieved (the specified element was not found,
the requested JSON object was missing a parameter, etc.)</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The <tt class="docutils literal"><span class="pre">requested</span></tt> and <tt class="docutils literal"><span class="pre">provisioned</span></tt> fields are mutually exclusive of the <tt class="docutils literal"><span class="pre">error</span></tt> field.</p>
<div class="section" id="id43">
<h5>Example<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">POST</span> <span class="pre">&lt;base-url&gt;/instances</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">HTTP Body</th>
<td><tt class="docutils literal"><span class="pre">[{&quot;appId&quot;:&quot;MyApp1&quot;,&quot;programType&quot;:&quot;Flow&quot;,&quot;programId&quot;:&quot;MyFlow1&quot;,&quot;runnableId&quot;:&quot;MyFlowlet5&quot;},</span></tt>
<tt class="docutils literal"><span class="pre">{&quot;appId&quot;:&quot;MyApp1&quot;,&quot;programType&quot;:&quot;Procedure&quot;,&quot;programId&quot;:&quot;MyProc2&quot;},</span></tt>
<tt class="docutils literal"><span class="pre">{&quot;appId&quot;:&quot;MyApp3&quot;,&quot;programType&quot;:&quot;Service&quot;,&quot;programId&quot;:&quot;MySvc1,&quot;runnableId&quot;:&quot;MyHandler1&quot;}]</span></tt></td>
</tr>
<tr class="row-odd"><th class="stub">HTTP Response</th>
<td><tt class="docutils literal"><span class="pre">[{&quot;appId&quot;:&quot;MyApp1&quot;,&quot;programType&quot;:&quot;Flow&quot;,&quot;programId&quot;:&quot;MyFlow1&quot;,</span></tt>
<tt class="docutils literal"><span class="pre">&quot;runnableId&quot;:&quot;MyFlowlet5&quot;,&quot;provisioned&quot;:2,&quot;requested&quot;:2,&quot;statusCode&quot;:200},</span></tt>
<tt class="docutils literal"><span class="pre">{&quot;appId&quot;:&quot;MyApp1&quot;,&quot;programType&quot;:&quot;Procedure&quot;,&quot;programId&quot;:&quot;MyProc2&quot;,</span></tt>
<tt class="docutils literal"><span class="pre">&quot;provisioned&quot;:0,&quot;requested&quot;:1,&quot;statusCode&quot;:200},</span></tt>
<tt class="docutils literal"><span class="pre">{&quot;appId&quot;:&quot;MyApp3&quot;,&quot;programType&quot;:&quot;Service&quot;,&quot;programId&quot;:&quot;MySvc1,</span></tt>
<tt class="docutils literal"><span class="pre">&quot;runnableId&quot;:&quot;MyHandler1&quot;,&quot;statusCode&quot;:404,&quot;error&quot;:&quot;Runnable:</span> <span class="pre">MyHandler1</span> <span class="pre">not</span> <span class="pre">found&quot;}]</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Try to get the instances of the Flowlet <em>MyFlowlet5</em> in the Flow <em>MyFlow1</em> in the Application <em>MyApp1</em>, the
Procedure <em>MyProc2</em> in the Application <em>MyApp1</em>, and the Service Handler <em>MyHandler1</em> in the
User Service <em>MySvc1</em> in the Application <em>MyApp3</em></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="scaling-flowlets">
<span id="rest-scaling-flowlets"></span><h5>Scaling Flowlets<a class="headerlink" href="#scaling-flowlets" title="Permalink to this headline">¶</a></h5>
<p>You can query and set the number of instances executing a given Flowlet
by using the <tt class="docutils literal"><span class="pre">instances</span></tt> parameter with HTTP GET and PUT methods:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;/flows/&lt;flow-id&gt;/flowlets/&lt;flowlet-id&gt;/instances</span>
<span class="go">PUT &lt;base-url&gt;/apps/&lt;app-id&gt;/flows/&lt;flow-id&gt;/flowlets/&lt;flowlet-id&gt;/instances</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{ &quot;instances&quot; : &lt;quantity&gt; }</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Name of the Application being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;flow-id&gt;</span></tt></td>
<td>Name of the Flow</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;flowlet-id&gt;</span></tt></td>
<td>Name of the Flowlet</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;quantity&gt;</span></tt></td>
<td>Number of instances to be used</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id44">
<h5>Examples<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/apps/HelloWorld/flows/WhoFlow/flowlets/saver/</span></tt>
<tt class="docutils literal"><span class="pre">instances</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Find out the number of instances of the Flowlet <em>saver</em>
in the Flow <em>WhoFlow</em> of the Application <em>HelloWorld</em></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><p class="first"><tt class="docutils literal"><span class="pre">PUT</span> <span class="pre">&lt;base-url&gt;/apps/HelloWorld/flows/WhoFlow/flowlets/saver/</span></tt>
<tt class="docutils literal"><span class="pre">instances</span></tt></p>
<p>with the arguments as a JSON string in the body:</p>
<div class="last highlight-console"><div class="highlight"><pre><span class="go">{ &quot;instances&quot; : 2 }</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Change the number of instances of the Flowlet <em>saver</em>
in the Flow <em>WhoFlow</em> of the Application <em>HelloWorld</em></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="scaling-procedures">
<h5>Scaling Procedures<a class="headerlink" href="#scaling-procedures" title="Permalink to this headline">¶</a></h5>
<p>In a similar way to <a class="reference internal" href="#scaling-flowlets">Scaling Flowlets</a>, you can query or change the number of instances
of a Procedure by using the <tt class="docutils literal"><span class="pre">instances</span></tt> parameter with HTTP GET and PUT methods:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;/procedures/&lt;procedure-id&gt;/instances</span>
<span class="go">PUT &lt;base-url&gt;/apps/&lt;app-id&gt;/procedures/&lt;procedure-id&gt;/instances</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{ &quot;instances&quot; : &lt;quantity&gt; }</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Name of the Application</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;procedure-id&gt;</span></tt></td>
<td>Name of the Procedure</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;quantity&gt;</span></tt></td>
<td>Number of instances to be used</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id45">
<h5>Example<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/apps/HelloWorld/procedures/Greeting/instances</span></tt>
<tt class="docutils literal"><span class="pre">instances</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Find out the number of instances of the Procedure <em>Greeting</em>
in the Application <em>HelloWorld</em></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="scaling-services">
<h5>Scaling Services<a class="headerlink" href="#scaling-services" title="Permalink to this headline">¶</a></h5>
<p>You can query or change the number of instances of a Service
by using the <tt class="docutils literal"><span class="pre">instances</span></tt> parameter with HTTP GET or PUT methods:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;/services/&lt;service-id&gt;/runnables/&lt;runnable-id&gt;/instances</span>
<span class="go">PUT &lt;base-url&gt;/apps/&lt;app-id&gt;/services/&lt;service-id&gt;/runnables/&lt;runnable-id&gt;/instances</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{ &quot;instances&quot; : &lt;quantity&gt; }</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Name of the Application</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;service-id&gt;</span></tt></td>
<td>Name of the Service</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;runnable-id&gt;</span></tt></td>
<td>Name of the Service</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;quantity&gt;</span></tt></td>
<td>Number of instances to be used</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> In this release the <tt class="docutils literal"><span class="pre">runnable-id</span></tt> is the same as the <tt class="docutils literal"><span class="pre">service-id</span></tt>.</p>
</div>
<div class="section" id="id46">
<h5>Example<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/apps/PurchaseHistory/services/CatalogLookup/runnables/CatalogLookup/instances</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Retrieve the number of instances of the Service <em>CatalogLookup</em> in the application <em>PurchaseHistory</em>.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="run-history-and-schedule">
<h4>Run History and Schedule<a class="headerlink" href="#run-history-and-schedule" title="Permalink to this headline">¶</a></h4>
<p>To see the history of all runs of selected elements (Flows, Procedures, MapReduce jobs, Workflows, and
Services), issue an HTTP GET to the element’s URL with the <tt class="docutils literal"><span class="pre">history</span></tt> parameter.
This will return a JSON list of all completed runs, each with a start time,
end time and termination status:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;/&lt;element-type&gt;/&lt;element-id&gt;/history</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Name of the Application</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;element-type&gt;</span></tt></td>
<td>One of <tt class="docutils literal"><span class="pre">flows</span></tt>, <tt class="docutils literal"><span class="pre">procedures</span></tt>, <tt class="docutils literal"><span class="pre">mapreduce</span></tt>, <tt class="docutils literal"><span class="pre">workflows</span></tt> or <tt class="docutils literal"><span class="pre">services</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;element-id&gt;</span></tt></td>
<td>Name of the element</td>
</tr>
</tbody>
</table>
<div class="section" id="id47">
<h5>Example<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/apps/HelloWorld/flows/WhoFlow/history</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Retrieve the history of the Flow <em>WhoFlow</em> of the Application <em>HelloWorld</em></td>
</tr>
<tr class="row-odd"><th class="stub">Returns</th>
<td><tt class="docutils literal"><span class="pre">{&quot;runid&quot;:&quot;...&quot;,&quot;start&quot;:1382567447,&quot;end&quot;:1382567492,&quot;status&quot;:&quot;STOPPED&quot;},</span></tt>
<tt class="docutils literal"><span class="pre">{&quot;runid&quot;:&quot;...&quot;,&quot;start&quot;:1382567383,&quot;end&quot;:1382567397,&quot;status&quot;:&quot;STOPPED&quot;}</span></tt></td>
</tr>
</tbody>
</table>
<p>The <em>runid</em> field is a UUID that uniquely identifies a run within CDAP,
with the start and end times in seconds since the start of the Epoch (midnight 1/1/1970).</p>
<p>For Services, you can retrieve the history of a Twill Service using:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;/services/&lt;service-id&gt;/history</span>
</pre></div>
</div>
</div>
<div class="section" id="id48">
<h5>Example<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/apps/HelloWorld/services/WhoService/history</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Retrieve the history of the Service <em>WhoService</em> of the Application <em>HelloWorld</em></td>
</tr>
<tr class="row-odd"><th class="stub">Returns</th>
<td><tt class="docutils literal"><span class="pre">{&quot;runid&quot;:&quot;...&quot;,&quot;start&quot;:1382567447,&quot;end&quot;:1382567492,&quot;status&quot;:&quot;STOPPED&quot;},</span></tt>
<tt class="docutils literal"><span class="pre">{&quot;runid&quot;:&quot;...&quot;,&quot;start&quot;:1382567383,&quot;end&quot;:1382567397,&quot;status&quot;:&quot;STOPPED&quot;}</span></tt></td>
</tr>
</tbody>
</table>
<p>For Workflows, you can also retrieve:</p>
<ul>
<li><p class="first">the schedules defined for a workflow (using the parameter <tt class="docutils literal"><span class="pre">schedules</span></tt>):</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;/workflows/&lt;workflow-id&gt;/schedules</span>
</pre></div>
</div>
</li>
<li><p class="first">the next time that the workflow is scheduled to run (using the parameter <tt class="docutils literal"><span class="pre">nextruntime</span></tt>):</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;/workflows/&lt;workflow-id&gt;/nextruntime</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="logging-http-api">
<span id="logginghttp"></span><h3>Logging HTTP API<a class="headerlink" href="#logging-http-api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="downloading-logs">
<h4>Downloading Logs<a class="headerlink" href="#downloading-logs" title="Permalink to this headline">¶</a></h4>
<p>Logs emitted by any of the <em>Flows</em>, <em>Procedures</em>, <em>MapReduce</em> jobs, or
<em>Services</em> running in CDAP can be downloaded with the Logging HTTP API. To do
that, send an HTTP GET request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/apps/&lt;app-id&gt;/&lt;element-type&gt;/&lt;element-id&gt;/logs?start=&lt;ts&gt;&amp;stop=&lt;ts&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Name of the Application being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;element-type&gt;</span></tt></td>
<td>One of <tt class="docutils literal"><span class="pre">flows</span></tt>, <tt class="docutils literal"><span class="pre">procedures</span></tt>, <tt class="docutils literal"><span class="pre">mapreduce</span></tt>, or <tt class="docutils literal"><span class="pre">services</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;element-id&gt;</span></tt></td>
<td>Name of the element (<em>Flow</em>, <em>Procedure</em>, <em>MapReduce</em> job, <em>Service</em>) being called</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;ts&gt;</span></tt></td>
<td><em>Start</em> and <em>stop</em> times, given as seconds since the start of the Epoch.</td>
</tr>
</tbody>
</table>
<div class="section" id="id49">
<h5>Example<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/apps/WordCount/flows/WordCountFlow/</span></tt>
<tt class="docutils literal"><span class="pre">logs?start=1382576400&amp;stop=1382576700</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Return the logs for all the events from the Flow <em>WordCountFlow</em> of the <em>WordCount</em>
Application,
beginning <tt class="docutils literal"><span class="pre">Thu,</span> <span class="pre">24</span> <span class="pre">Oct</span> <span class="pre">2013</span> <span class="pre">01:00:00</span> <span class="pre">GMT</span></tt> and
ending <tt class="docutils literal"><span class="pre">Thu,</span> <span class="pre">24</span> <span class="pre">Oct</span> <span class="pre">2013</span> <span class="pre">01:05:00</span> <span class="pre">GMT</span></tt> (five minutes later)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id50">
<h5>Comments<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h5>
<p>The output is formatted as HTML-embeddable text; that is, characters that have a special meaning in HTML will be
escaped. A line of the log may look like this:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">2013-10-23 18:03:09,793 - INFO [FlowletProcessDriver-source-0-</span>
<span class="go">      executor:c.c.e.c.StreamSource@-1] – source: Emitting line: this is an &amp;amp; character</span>
</pre></div>
</div>
<p><strong>Note:</strong> The context of the log line shows the name of the Flowlet (<em>source</em>), its instance number (0) as
well as the original line in the Application code. The character <em>&amp;</em> is escaped as <tt class="docutils literal"><span class="pre">&amp;amp;</span></tt>; if you don’t desire
this escaping, you can turn it off by adding the parameter <tt class="docutils literal"><span class="pre">&amp;escape=false</span></tt> to the request URL.</p>
</div>
</div>
</div>
<div class="section" id="metrics-http-api">
<span id="metricshttp"></span><h3>Metrics HTTP API<a class="headerlink" href="#metrics-http-api" title="Permalink to this headline">¶</a></h3>
<p>As Applications process data, CDAP collects metrics about the Application’s behavior and performance. Some of these
metrics are the same for every Application—how many events are processed, how many data operations are performed,
etc.—and are thus called system or CDAP metrics.</p>
<p>Other metrics are user-defined and differ from Application to Application.
For details on how to add metrics to your Application, see the section on User-Defined Metrics in the
the Developer Guide, <a class="reference internal" href="admin.html#admin"><em>CDAP Operations Guide.</em></a></p>
<div class="section" id="metrics-requests">
<h4>Metrics Requests<a class="headerlink" href="#metrics-requests" title="Permalink to this headline">¶</a></h4>
<p>The general form of a metrics request is:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/metrics/&lt;scope&gt;/&lt;context&gt;/&lt;metric&gt;?&lt;time-range&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;scope&gt;</span></tt></td>
<td>Either <tt class="docutils literal"><span class="pre">system</span></tt> (system metrics) or <tt class="docutils literal"><span class="pre">user</span></tt> (user-defined metrics)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;context&gt;</span></tt></td>
<td>Hierarchy of context; see <a class="reference internal" href="#available-contexts">Available Contexts</a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;metric&gt;</span></tt></td>
<td>Metric being queried; see <a class="reference internal" href="#available-metrics">Available Metrics</a></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;time-range&gt;</span></tt></td>
<td>A <a class="reference internal" href="#time-range">Time Range</a> or <tt class="docutils literal"><span class="pre">aggregate=true</span></tt> for all since the Application was deployed</td>
</tr>
</tbody>
</table>
<div class="section" id="id51">
<h5>Examples<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/metrics/system/apps/HelloWorld/flows/</span></tt>
<tt class="docutils literal"><span class="pre">WhoFlow/flowlets/saver/process.busyness?aggregate=true</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Using a <em>System</em> metric, <em>process.busyness</em></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/metrics/user/apps/HelloWorld/flows/</span></tt>
<tt class="docutils literal"><span class="pre">WhoFlow/flowlets/saver/names.bytes?aggregate=true</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Using a <em>User-Defined</em> metric, <em>names.bytes</em></td>
</tr>
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/metrics/user/apps/HelloWorld/services/</span></tt>
<tt class="docutils literal"><span class="pre">WhoService/runnables/WhoRun/names.bytes?aggregate=true</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Using a <em>User-Defined</em> metric, <em>names.bytes</em> in a Service&#8217;s Handler</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id52">
<h5>Comments<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h5>
<p>The scope must be either <tt class="docutils literal"><span class="pre">system</span></tt> for system metrics or <tt class="docutils literal"><span class="pre">user</span></tt> for user-defined metrics.</p>
<p>System metrics are either Application metrics (about Applications and their Flows, Procedures, MapReduce and Workflows) or they are Data metrics (relating to Streams or Datasets).</p>
<p>User metrics are always in the Application context.</p>
<p>For example, to retrieve the number of input data objects (“events”) processed by a Flowlet named <em>splitter</em>,
in the Flow <em>CountRandomFlow</em> of the Application <em>CountRandom</em>, over the last 5 seconds, you can issue an HTTP
GET method:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/metrics/system/apps/CountRandom/flows/CountRandomFlow/flowlets/</span>
<span class="go">        splitter/process.events.processed?start=now-5s&amp;count=5</span>
</pre></div>
</div>
<p>This returns a JSON response that has one entry for every second in the requested time interval. It will have
values only for the times where the metric was actually emitted (shown here &#8220;pretty-printed&#8221;):</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">HTTP/1.1 200 OK</span>
<span class="go">Content-Type: application/json</span>
<span class="go">{&quot;start&quot;:1382637108,&quot;end&quot;:1382637112,&quot;data&quot;:[</span>
<span class="go">{&quot;time&quot;:1382637108,&quot;value&quot;:6868},</span>
<span class="go">{&quot;time&quot;:1382637109,&quot;value&quot;:6895},</span>
<span class="go">{&quot;time&quot;:1382637110,&quot;value&quot;:6856},</span>
<span class="go">{&quot;time&quot;:1382637111,&quot;value&quot;:6816},</span>
<span class="go">{&quot;time&quot;:1382637112,&quot;value&quot;:6765}]}</span>
</pre></div>
</div>
<p>If you want the number of input objects processed across all Flowlets of a Flow, you address the metrics
API at the Flow context:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/metrics/system/apps/CountRandom/flows/</span>
<span class="go">  CountRandomFlow/process.events.processed?start=now-5s&amp;count=5</span>
</pre></div>
</div>
<p>Similarly, you can address the context of all flows of an Application, an entire Application, or the entire CDAP:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/metrics/system/apps/CountRandom/</span>
<span class="go">  flows/process.events.processed?start=now-5s&amp;count=5</span>
<span class="go">GET &lt;base-url&gt;/metrics/system/apps/CountRandom/</span>
<span class="go">  process.events.processed?start=now-5s&amp;count=5</span>
<span class="go">GET &lt;base-url&gt;/metrics/system/process.events?start=now-5s&amp;count=5</span>
</pre></div>
</div>
<p>To request user-defined metrics instead of system metrics, specify <tt class="docutils literal"><span class="pre">user</span></tt> instead of <tt class="docutils literal"><span class="pre">cdap</span></tt> in the URL
and specify the user-defined metric at the end of the request.</p>
<p>For example, to request a user-defined metric for the <em>HelloWorld</em> Application&#8217;s <em>WhoFlow</em> Flow:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/metrics/user/apps/HelloWorld/flows/</span>
<span class="go">  WhoFlow/flowlets/saver/names.bytes?aggregate=true</span>
</pre></div>
</div>
<p>To retrieve multiple metrics at once, instead of a GET, issue an HTTP POST, with a JSON list as the request body that enumerates the name and attributes for each metrics. For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">POST &lt;base-url&gt;/metrics</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">Content-Type: application/json</span>
<span class="go">[ &quot;/system/collect.events?aggregate=true&quot;,</span>
<span class="go">&quot;/system/apps/HelloWorld/process.events.processed?start=1380323712&amp;count=6000&quot; ]</span>
</pre></div>
</div>
<p>If the context of the requested metric or metric itself doesn&#8217;t exist the system returns status 200 (OK) with JSON formed as per above description and with values being zeroes.</p>
</div>
</div>
<div class="section" id="time-range">
<h4>Time Range<a class="headerlink" href="#time-range" title="Permalink to this headline">¶</a></h4>
<p>The time range of a metric query can be specified in various ways:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Time Range</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">start=now-30s&amp;end=now</span></tt></td>
<td>The last 30 seconds. The begin time is given in seconds relative to the current time.
You can apply simple math, using <tt class="docutils literal"><span class="pre">now</span></tt> for the current time,
<tt class="docutils literal"><span class="pre">s</span></tt> for seconds, <tt class="docutils literal"><span class="pre">m</span></tt> for minutes, <tt class="docutils literal"><span class="pre">h</span></tt> for hours and <tt class="docutils literal"><span class="pre">d</span></tt> for days.
For example: <tt class="docutils literal"><span class="pre">now-5d-12h</span></tt> is 5 days and 12 hours ago.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">start=1385625600&amp;</span></tt> <tt class="docutils literal"><span class="pre">end=1385629200</span></tt></td>
<td>From <tt class="docutils literal"><span class="pre">Thu,</span> <span class="pre">28</span> <span class="pre">Nov</span> <span class="pre">2013</span> <span class="pre">08:00:00</span> <span class="pre">GMT</span></tt> to <tt class="docutils literal"><span class="pre">Thu,</span> <span class="pre">28</span> <span class="pre">Nov</span> <span class="pre">2013</span> <span class="pre">09:00:00</span> <span class="pre">GMT</span></tt>,
both given as since the start of the Epoch</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">start=1385625600&amp;</span></tt> <tt class="docutils literal"><span class="pre">count=3600</span></tt></td>
<td>The same as before, but with the count given as a number of seconds</td>
</tr>
</tbody>
</table>
<p>Instead of getting the values for each second of a time range, you can also retrieve the
aggregate of a metric over time. The following request will return the total number of input objects processed since the Application <em>CountRandom</em> was deployed, assuming that CDAP has not been stopped or restarted (you cannot specify a time range for aggregates):</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/metrics/system/apps/CountRandom/process.events.processed?aggregate=true</span>
</pre></div>
</div>
</div>
<div class="section" id="available-contexts">
<h4>Available Contexts<a class="headerlink" href="#available-contexts" title="Permalink to this headline">¶</a></h4>
<p>The context of a metric is typically enclosed into a hierarchy of contexts. For example, the Flowlet context is enclosed in the Flow context, which in turn is enclosed in the Application context. A metric can always be queried (and aggregated) relative to any enclosing context. These are the available Application contexts of CDAP:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">System Metric</th>
<th class="head">Context</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>One Flowlet of a Flow</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/flows/&lt;flow-id&gt;/flowlets/&lt;flowlet-id&gt;</span></tt></td>
</tr>
<tr class="row-odd"><td>All Flowlets of a Flow</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/flows/&lt;flow-id&gt;</span></tt></td>
</tr>
<tr class="row-even"><td>All Flowlets of all Flows of an Application</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/flows</span></tt></td>
</tr>
<tr class="row-odd"><td>One Procedure</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/procedures/&lt;procedure-id&gt;</span></tt></td>
</tr>
<tr class="row-even"><td>All Procedures of an Application</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/procedures</span></tt></td>
</tr>
<tr class="row-odd"><td>All Mappers of a MapReduce</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/mapreduce/&lt;mapreduce-id&gt;/mappers</span></tt></td>
</tr>
<tr class="row-even"><td>All Reducers of a MapReduce</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/mapreduce/&lt;mapreduce-id&gt;/reducers</span></tt></td>
</tr>
<tr class="row-odd"><td>One MapReduce</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/mapreduce/&lt;mapreduce-id&gt;</span></tt></td>
</tr>
<tr class="row-even"><td>All MapReduce of an Application</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/mapreduce</span></tt></td>
</tr>
<tr class="row-odd"><td>One Service Handler/Worker</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/services/&lt;service-id&gt;/runnables/&lt;runnable-id&gt;</span></tt></td>
</tr>
<tr class="row-even"><td>One Service</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/services/&lt;service-id&gt;</span></tt></td>
</tr>
<tr class="row-odd"><td>All Services of an Application</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;/services</span></tt></td>
</tr>
<tr class="row-even"><td>All elements of an Application</td>
<td><tt class="docutils literal"><span class="pre">/apps/&lt;app-id&gt;</span></tt></td>
</tr>
<tr class="row-odd"><td>All elements of all Applications</td>
<td><tt class="docutils literal"><span class="pre">/</span></tt></td>
</tr>
</tbody>
</table>
<p>Stream metrics are only available at the Stream level and the only available context is:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Stream Metric</th>
<th class="head">Context</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>A single Stream</td>
<td><tt class="docutils literal"><span class="pre">/streams/&lt;stream-id&gt;</span></tt></td>
</tr>
</tbody>
</table>
<p>Dataset metrics are available at the Dataset level, but they can also be queried down to the
Flowlet, Procedure, Mapper, or Reducer level:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Dataset Metric</th>
<th class="head">Context</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>A single Dataset in the context of a single Flowlet</td>
<td><tt class="docutils literal"><span class="pre">/datasets/&lt;dataset-id&gt;/apps/&lt;app-id&gt;/flows/</span></tt>
<tt class="docutils literal"><span class="pre">&lt;flow-id&gt;/flowlets/&lt;flowlet-id&gt;</span></tt></td>
</tr>
<tr class="row-odd"><td>A single Dataset in the context of a single Flow</td>
<td><tt class="docutils literal"><span class="pre">/datasets/&lt;dataset-id&gt;/apps/&lt;app-id&gt;/flows/&lt;flow-id&gt;</span></tt></td>
</tr>
<tr class="row-even"><td>A single Dataset in the context of a specific Application</td>
<td><tt class="docutils literal"><span class="pre">/datasets/&lt;dataset-id&gt;/&lt;any</span> <span class="pre">application</span> <span class="pre">context&gt;</span></tt></td>
</tr>
<tr class="row-odd"><td>A single Dataset across all Applications</td>
<td><tt class="docutils literal"><span class="pre">/datasets/&lt;dataset-id&gt;</span></tt></td>
</tr>
<tr class="row-even"><td>All Datasets across all Applications</td>
<td><tt class="docutils literal"><span class="pre">/</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="available-metrics">
<h4>Available Metrics<a class="headerlink" href="#available-metrics" title="Permalink to this headline">¶</a></h4>
<p>For CDAP metrics, the available metrics depend on the context.
User-defined metrics will be available at whatever context that they are emitted from.</p>
<p>These metrics are available in the Flowlet context:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Flowlet Metric</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">process.busyness</span></tt></td>
<td>A number from 0 to 100 indicating how “busy” the Flowlet is;
note that you cannot aggregate over this metric</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">process.errors</span></tt></td>
<td>Number of errors while processing</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">process.events.processed</span></tt></td>
<td>Number of events/data objects processed</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">process.events.in</span></tt></td>
<td>Number of events read in by the Flowlet</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">process.events.out</span></tt></td>
<td>Number of events emitted by the Flowlet</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">store.bytes</span></tt></td>
<td>Number of bytes written to Datasets</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">store.ops</span></tt></td>
<td>Operations (writes and read) performed on Datasets</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">store.reads</span></tt></td>
<td>Read operations performed on Datasets</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">store.writes</span></tt></td>
<td>Write operations performed on Datasets</td>
</tr>
</tbody>
</table>
<p>These metrics are available in the Mappers and Reducers context:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Mappers and Reducers Metric</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">process.completion</span></tt></td>
<td>A number from 0 to 100 indicating the progress of the Map or Reduce phase</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">process.entries.in</span></tt></td>
<td>Number of entries read in by the Map or Reduce phase</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">process.entries.out</span></tt></td>
<td>Number of entries written out by the Map or Reduce phase</td>
</tr>
</tbody>
</table>
<p>These metrics are available in the Procedures context:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Procedures Metric</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">query.requests</span></tt></td>
<td>Number of requests made to the Procedure</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">query.failures</span></tt></td>
<td>Number of failures seen by the Procedure</td>
</tr>
</tbody>
</table>
<p>These metrics are available in the Streams context:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Streams Metric</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">collect.events</span></tt></td>
<td>Number of events collected by the Stream</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">collect.bytes</span></tt></td>
<td>Number of bytes collected by the Stream</td>
</tr>
</tbody>
</table>
<p>These metrics are available in the Datasets context:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Datasets Metric</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">store.bytes</span></tt></td>
<td>Number of bytes written</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">store.ops</span></tt></td>
<td>Operations (reads and writes) performed</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">store.reads</span></tt></td>
<td>Read operations performed</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">store.writes</span></tt></td>
<td>Write operations performed</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="monitor-http-api">
<span id="monitorhttp"></span><h3>Monitor HTTP API<a class="headerlink" href="#monitor-http-api" title="Permalink to this headline">¶</a></h3>
<p>CDAP internally uses a variety of System Services that are critical to its functionality. This section describes the RESTful APIs that can be used to see into System Services.</p>
<div class="section" id="details-of-all-available-system-services">
<h4>Details of All Available System Services<a class="headerlink" href="#details-of-all-available-system-services" title="Permalink to this headline">¶</a></h4>
<p>For the detailed information of all available System Services, use:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/system/services</span>
</pre></div>
</div>
<div class="section" id="id53">
<h5>HTTP Responses<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The event successfully called the method, and the body contains the results</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="checking-status-of-all-cdap-system-services">
<h4>Checking Status of All CDAP System Services<a class="headerlink" href="#checking-status-of-all-cdap-system-services" title="Permalink to this headline">¶</a></h4>
<p>To check the status of all the System Services, use:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/system/services/status</span>
</pre></div>
</div>
<div class="section" id="id54">
<h5>HTTP Responses<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The event successfully called the method, and the body contains the results</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="checking-status-of-a-specific-cdap-system-service">
<h4>Checking Status of a Specific CDAP System Service<a class="headerlink" href="#checking-status-of-a-specific-cdap-system-service" title="Permalink to this headline">¶</a></h4>
<p>To check the status of a specific System Service, use:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/system/services/&lt;service-name&gt;/status</span>
</pre></div>
</div>
<p>The status of these CDAP System Services can be checked:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Service</th>
<th class="head">Service-Name</th>
<th class="head">Description of the Service</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Metrics</span></tt></td>
<td><tt class="docutils literal"><span class="pre">metrics</span></tt></td>
<td>Service that handles metrics related HTTP requests</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Transaction</span></tt></td>
<td><tt class="docutils literal"><span class="pre">transaction</span></tt></td>
<td>Service that handles transactions</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Streams</span></tt></td>
<td><tt class="docutils literal"><span class="pre">streams</span></tt></td>
<td>Service that handles Stream management</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">App</span> <span class="pre">Fabric</span></tt></td>
<td><tt class="docutils literal"><span class="pre">appfabric</span></tt></td>
<td>Service that handles Application Fabric requests</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Log</span> <span class="pre">Saver</span></tt></td>
<td><tt class="docutils literal"><span class="pre">log.saver</span></tt></td>
<td>Service that aggregates all system and application logs</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Metrics</span> <span class="pre">Processor</span></tt></td>
<td><tt class="docutils literal"><span class="pre">metrics.processor</span></tt></td>
<td>Service that aggregates all system and application metrics</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Dataset</span> <span class="pre">Executor</span></tt></td>
<td><tt class="docutils literal"><span class="pre">dataset.executor</span></tt></td>
<td>Service that handles all data-related HTTP requests</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Explore</span> <span class="pre">Service</span></tt></td>
<td><tt class="docutils literal"><span class="pre">explore.service</span></tt></td>
<td>Service that handles all HTTP requests for ad-hoc data exploration</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The Service status checks are more useful when CDAP is running in a distributed cluster mode.</p>
<div class="section" id="id55">
<h5>HTTP Responses<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Codes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt></td>
<td>The service is up and running</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt></td>
<td>The service is either not running or not found</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id56">
<h5>Example<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/system/services/metrics/status</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Returns the status of the Metrics Service</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="scaling-system-services">
<h4>Scaling System Services<a class="headerlink" href="#scaling-system-services" title="Permalink to this headline">¶</a></h4>
<p>In distributed CDAP installations, the number of instances for system services
can be queried and changed by using these commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">GET &lt;base-url&gt;/system/services/&lt;service-name&gt;/instances</span>
<span class="go">PUT &lt;base-url&gt;/system/services/&lt;service-name&gt;/instances</span>
</pre></div>
</div>
<p>with the arguments as a JSON string in the body:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{ &quot;instances&quot; : &lt;quantity&gt; }</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;system-name&gt;</span></tt></td>
<td>Name of the system service</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;quantity&gt;</span></tt></td>
<td>Number of instances to be used</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> In standalone CDAP, trying to set the instances of system services will return a Status Code <tt class="docutils literal"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></tt>.</p>
<div class="section" id="id57">
<h5>Examples<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">&lt;base-url&gt;/system/services/metrics/instances</span></tt></td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Determine the number of instances being used for the metrics HTTP service</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">HTTP Method</th>
<td><p class="first"><tt class="docutils literal"><span class="pre">PUT</span> <span class="pre">&lt;base-url&gt;/system/services/metrics/instances</span></tt>
<tt class="docutils literal"><span class="pre">instances</span></tt></p>
<p>with the arguments as a JSON string in the body:</p>
<div class="last highlight-console"><div class="highlight"><pre><span class="go">{ &quot;instances&quot; : 2 }</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><th class="stub">Description</th>
<td>Sets the number of instances of the metrics HTTP service to 2</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="section" id="java-client-api">
<span id="client-api"></span><h2>Java Client API<a class="headerlink" href="#java-client-api" title="Permalink to this headline">¶</a></h2>
<p>The Cask Data Application Platform (CDAP) Java Client API provides methods for interacting
with CDAP from Java applications.</p>
<div class="section" id="maven-dependency">
<h3>Maven Dependency<a class="headerlink" href="#maven-dependency" title="Permalink to this headline">¶</a></h3>
<p>To use the Java Client API in your project, add this Maven dependency:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;dependency&gt;</span>
<span class="go">  &lt;groupId&gt;co.cask.cdap&lt;/groupId&gt;</span>
<span class="go">  &lt;artifactId&gt;cdap-client&lt;/artifactId&gt;</span>
<span class="go">  &lt;version&gt;${cdap.version}&lt;/version&gt;</span>
<span class="go">&lt;/dependency&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="components">
<h3>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h3>
<p>The Java Client API allows you to interact with these CDAP components:</p>
<ul class="simple">
<li><a class="reference internal" href="#applicationclient">ApplicationClient</a>: interacting with applications</li>
<li><a class="reference internal" href="#datasetclient">DatasetClient</a>: interacting with Datasets</li>
<li><a class="reference internal" href="#datasetmoduleclient">DatasetModuleClient</a>: interacting with Dataset Modules</li>
<li><a class="reference internal" href="#datasettypeclient">DatasetTypeClient</a>: interacting with Dataset Types</li>
<li><a class="reference internal" href="#metricsclient">MetricsClient</a>: interacting with Metrics</li>
<li><a class="reference internal" href="#monitorclient">MonitorClient</a>: monitoring System Services</li>
<li><a class="reference internal" href="#procedureclient">ProcedureClient</a>: interacting with Procedures</li>
<li><a class="reference internal" href="#programclient">ProgramClient</a>: interacting with Flows, Procedures, MapReduce Jobs, User Services, and Workflows</li>
<li><a class="reference internal" href="#queryclient">QueryClient</a>: querying Datasets</li>
<li><a class="reference internal" href="#serviceclient">ServiceClient</a>: interacting with User Services</li>
<li><a class="reference internal" href="#streamclient">StreamClient</a>: interacting with Streams</li>
</ul>
<p>The above list links to the examples below for each portion of the API.</p>
</div>
<div class="section" id="sample-usage">
<h3>Sample Usage<a class="headerlink" href="#sample-usage" title="Permalink to this headline">¶</a></h3>
<div class="section" id="applicationclient">
<h4>ApplicationClient<a class="headerlink" href="#applicationclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">ApplicationClient</span> <span class="n">appClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ApplicationClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">// Fetch the list of applications</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">ApplicationRecord</span><span class="o">&gt;</span> <span class="n">apps</span> <span class="o">=</span> <span class="n">appClient</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>

<span class="c1">// Deploy an application</span>
<span class="n">File</span> <span class="n">appJarFile</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">appClient</span><span class="o">.</span><span class="na">deploy</span><span class="o">(</span><span class="n">appJarFile</span><span class="o">);</span>

<span class="c1">// Delete an application</span>
<span class="n">appClient</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">&quot;Purchase&quot;</span><span class="o">);</span>

<span class="c1">// List programs belonging to an application</span>
<span class="n">appClient</span><span class="o">.</span><span class="na">listPrograms</span><span class="o">(</span><span class="s">&quot;Purchase&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="datasetclient">
<h4>DatasetClient<a class="headerlink" href="#datasetclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">DatasetClient</span> <span class="n">datasetClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DatasetClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">// Fetch the list of Datasets</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">DatasetSpecification</span><span class="o">&gt;</span> <span class="n">datasets</span> <span class="o">=</span> <span class="n">datasetClient</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>

<span class="c1">// Create a Dataset</span>
<span class="n">datasetClient</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">&quot;someDataset&quot;</span><span class="o">,</span> <span class="s">&quot;someDatasetType&quot;</span><span class="o">);</span>

<span class="c1">// Truncate a Dataset</span>
<span class="n">datasetClient</span><span class="o">.</span><span class="na">truncate</span><span class="o">(</span><span class="s">&quot;someDataset&quot;</span><span class="o">);</span>

<span class="c1">// Delete a Dataset</span>
<span class="n">datasetClient</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">&quot;someDataset&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="datasetmoduleclient">
<h4>DatasetModuleClient<a class="headerlink" href="#datasetmoduleclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">DatasetModuleClient</span> <span class="n">datasetModuleClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DatasetModuleClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">// Add a Dataset module</span>
<span class="n">File</span> <span class="n">moduleJarFile</span> <span class="o">=</span> <span class="n">createAppJarFile</span><span class="o">(</span><span class="n">someDatasetModule</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">datasetModuleClient</span><span class="o">(</span><span class="s">&quot;someDatasetModule&quot;</span><span class="o">,</span> <span class="n">SomeDatasetModule</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">moduleJarFile</span><span class="o">);</span>

<span class="c1">// Fetch the Dataset module information</span>
<span class="n">DatasetModuleMeta</span> <span class="n">datasetModuleMeta</span> <span class="o">=</span> <span class="n">datasetModuleClient</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;someDatasetModule&quot;</span><span class="o">);</span>

<span class="c1">// Delete all Dataset modules</span>
<span class="n">datasetModuleClient</span><span class="o">.</span><span class="na">deleteAll</span><span class="o">();</span>
</pre></div>
</div>
</div>
<div class="section" id="datasettypeclient">
<h4>DatasetTypeClient<a class="headerlink" href="#datasettypeclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">DatasetTypeClient</span> <span class="n">datasetTypeClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DatasetTypeClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">// Fetch the Dataset type information using the type name</span>
<span class="n">DatasetTypeMeta</span> <span class="n">datasetTypeMeta</span> <span class="o">=</span> <span class="n">datasetTypeClient</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;someDatasetType&quot;</span><span class="o">);</span>

<span class="c1">// Fetch the Dataset type information using the classname</span>
<span class="n">datasetTypeMeta</span> <span class="o">=</span> <span class="n">datasetTypeClient</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">SomeDataset</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
</pre></div>
</div>
</div>
<div class="section" id="metricsclient">
<h4>MetricsClient<a class="headerlink" href="#metricsclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">MetricsClient</span> <span class="n">metricsClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MetricsClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">// Fetch the total number of events that have been processed by a Flow</span>
<span class="n">JsonObject</span> <span class="n">metric</span> <span class="o">=</span> <span class="n">metricsClient</span><span class="o">.</span><span class="na">getMetric</span><span class="o">(</span><span class="s">&quot;user&quot;</span><span class="o">,</span> <span class="s">&quot;/apps/HelloWorld/flows&quot;</span><span class="o">,</span>
                                            <span class="s">&quot;process.events.processed&quot;</span><span class="o">,</span> <span class="s">&quot;aggregate=true&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="monitorclient">
<h4>MonitorClient<a class="headerlink" href="#monitorclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">MonitorClient</span> <span class="n">monitorClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MonitorClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">// Fetch the list of System Services</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">SystemServiceMeta</span><span class="o">&gt;</span> <span class="n">services</span> <span class="o">=</span> <span class="n">monitorClient</span><span class="o">.</span><span class="na">listSystemServices</span><span class="o">();</span>

<span class="c1">// Fetch status of System Transaction Service</span>
<span class="n">String</span> <span class="n">serviceStatus</span> <span class="o">=</span> <span class="n">monitorClient</span><span class="o">.</span><span class="na">getSystemServiceStatus</span><span class="o">(</span><span class="s">&quot;transaction&quot;</span><span class="o">);</span>

<span class="c1">// Fetch the number of instances of the System Transaction Service</span>
<span class="kt">int</span> <span class="n">systemServiceInstances</span> <span class="o">=</span> <span class="n">monitorClient</span><span class="o">.</span><span class="na">getSystemServiceInstances</span><span class="o">(</span><span class="s">&quot;transaction&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="procedureclient">
<h4>ProcedureClient<a class="headerlink" href="#procedureclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">ProcedureClient</span> <span class="n">procedureClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProcedureClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">// Call a Procedure in the WordCount example</span>
<span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">procedureClient</span><span class="o">.</span><span class="na">call</span><span class="o">(</span><span class="s">&quot;WordCount&quot;</span><span class="o">,</span> <span class="s">&quot;RetrieveCounts&quot;</span><span class="o">,</span> <span class="s">&quot;getCount&quot;</span><span class="o">,</span>
                                     <span class="n">ImmutableMap</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">&quot;word&quot;</span><span class="o">,</span> <span class="s">&quot;foo&quot;</span><span class="o">));</span>

<span class="c1">// Stop a Procedure</span>
<span class="n">programClient</span><span class="o">.</span><span class="na">stop</span><span class="o">(</span><span class="s">&quot;WordCount&quot;</span><span class="o">,</span> <span class="n">ProgramType</span><span class="o">.</span><span class="na">PROCEDURE</span><span class="o">,</span> <span class="s">&quot;RetrieveCounts&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="programclient">
<h4>ProgramClient<a class="headerlink" href="#programclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">ProgramClient</span> <span class="n">programClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProgramClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">// Start a Procedure in the WordCount example</span>
<span class="n">programClient</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="s">&quot;WordCount&quot;</span><span class="o">,</span> <span class="n">ProgramType</span><span class="o">.</span><span class="na">PROCEDURE</span><span class="o">,</span> <span class="s">&quot;RetrieveCounts&quot;</span><span class="o">);</span>

<span class="c1">// Fetch live information from the HelloWorld example</span>
<span class="c1">// Live info includes the address of an element’s container host and the container’s debug port,</span>
<span class="c1">// formatted in JSON</span>
<span class="n">programClient</span><span class="o">.</span><span class="na">getLiveInfo</span><span class="o">(</span><span class="s">&quot;HelloWorld&quot;</span><span class="o">,</span> <span class="n">ProgramType</span><span class="o">.</span><span class="na">PROCEDURE</span><span class="o">,</span> <span class="s">&quot;greet&quot;</span><span class="o">);</span>

<span class="c1">// Fetch program logs in the WordCount example</span>
<span class="n">programClient</span><span class="o">.</span><span class="na">getProgramLogs</span><span class="o">(</span><span class="s">&quot;WordCount&quot;</span><span class="o">,</span> <span class="n">ProgramType</span><span class="o">.</span><span class="na">PROCEDURE</span><span class="o">,</span> <span class="s">&quot;RetrieveCounts&quot;</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span>
                             <span class="n">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">);</span>

<span class="c1">// Scale a Procedure in the HelloWorld example</span>
<span class="n">programClient</span><span class="o">.</span><span class="na">setProcedureInstances</span><span class="o">(</span><span class="s">&quot;HelloWorld&quot;</span><span class="o">,</span> <span class="s">&quot;greet&quot;</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>

<span class="c1">// Stop a Procedure in the HelloWorld example</span>
<span class="n">programClient</span><span class="o">.</span><span class="na">stop</span><span class="o">(</span><span class="s">&quot;HelloWorld&quot;</span><span class="o">,</span> <span class="n">ProgramType</span><span class="o">.</span><span class="na">PROCEDURE</span><span class="o">,</span> <span class="s">&quot;greet&quot;</span><span class="o">);</span>

<span class="c1">// Start, scale, and stop a Flow in the WordCount example</span>
<span class="n">programClient</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="s">&quot;WordCount&quot;</span><span class="o">,</span> <span class="n">ProgramType</span><span class="o">.</span><span class="na">FLOW</span><span class="o">,</span> <span class="s">&quot;WordCountFlow&quot;</span><span class="o">);</span>

<span class="c1">// Fetch Flow history in the WordCount example</span>
<span class="n">programClient</span><span class="o">.</span><span class="na">getProgramHistory</span><span class="o">(</span><span class="s">&quot;WordCount&quot;</span><span class="o">,</span> <span class="n">ProgramType</span><span class="o">.</span><span class="na">FLOW</span><span class="o">,</span> <span class="s">&quot;WordCountFlow&quot;</span><span class="o">);</span>

<span class="c1">// Scale a Flowlet in the WordCount example</span>
<span class="n">programClient</span><span class="o">.</span><span class="na">setFlowletInstances</span><span class="o">(</span><span class="s">&quot;WordCount&quot;</span><span class="o">,</span> <span class="s">&quot;WordCountFlow&quot;</span><span class="o">,</span> <span class="s">&quot;Tokenizer&quot;</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>

<span class="c1">// Stop a Flow in the WordCount example</span>
<span class="n">programClient</span><span class="o">.</span><span class="na">stop</span><span class="o">(</span><span class="s">&quot;WordCount&quot;</span><span class="o">,</span> <span class="n">ProgramType</span><span class="o">.</span><span class="na">FLOW</span><span class="o">,</span> <span class="s">&quot;WordCountFlow&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="queryclient">
<h4>QueryClient<a class="headerlink" href="#queryclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">QueryClient</span> <span class="n">queryClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">//</span>
<span class="c1">// Perform an ad-hoc query using the Purchase example</span>
<span class="c1">//</span>
<span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&quot;SELECT * FROM cdap_user_history WHERE customer IN (&#39;Alice&#39;,&#39;Bob&#39;)&quot;</span>
<span class="n">QueryHandle</span> <span class="n">queryHandle</span> <span class="o">=</span> <span class="n">queryClient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">query</span><span class="o">);</span>
<span class="n">QueryStatus</span> <span class="n">status</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryStatus</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>

<span class="k">while</span> <span class="o">(</span><span class="n">QueryStatus</span><span class="o">.</span><span class="na">OpStatus</span><span class="o">.</span><span class="na">RUNNING</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="na">getStatus</span><span class="o">()</span> <span class="o">||</span>
       <span class="n">QueryStatus</span><span class="o">.</span><span class="na">OpStatus</span><span class="o">.</span><span class="na">INITIALIZED</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="na">getStatus</span><span class="o">()</span> <span class="o">||</span>
       <span class="n">QueryStatus</span><span class="o">.</span><span class="na">OpStatus</span><span class="o">.</span><span class="na">PENDING</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="na">getStatus</span><span class="o">())</span> <span class="o">{</span>
  <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">queryClient</span><span class="o">.</span><span class="na">getStatus</span><span class="o">(</span><span class="n">queryHandle</span><span class="o">);</span>
<span class="o">}</span>

<span class="k">if</span> <span class="o">(</span><span class="n">status</span><span class="o">.</span><span class="na">hasResults</span><span class="o">())</span> <span class="o">{</span>
  <span class="c1">// Get first 20 results</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">QueryResult</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">queryClient</span><span class="o">.</span><span class="na">getResults</span><span class="o">(</span><span class="n">queryHandle</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
  <span class="c1">// Fetch schema</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">ColumnDesc</span><span class="o">&gt;</span> <span class="n">schema</span> <span class="o">=</span> <span class="n">queryClient</span><span class="o">.</span><span class="na">getSchema</span><span class="o">(</span><span class="n">queryHandle</span><span class="o">);</span>
  <span class="n">String</span><span class="o">[]</span> <span class="n">header</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="n">schema</span><span class="o">.</span><span class="na">size</span><span class="o">()];</span>
  <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">header</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="n">ColumnDesc</span> <span class="n">column</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="c1">// Hive columns start at 1</span>
    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">column</span><span class="o">.</span><span class="na">getPosition</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
    <span class="n">header</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">=</span> <span class="n">column</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">column</span><span class="o">.</span><span class="na">getType</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="n">queryClient</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">queryHandle</span><span class="o">);</span>
<span class="c1">//</span>
<span class="c1">// End perform an ad-hoc query</span>
<span class="c1">//</span>
</pre></div>
</div>
</div>
<div class="section" id="serviceclient">
<h4>ServiceClient<a class="headerlink" href="#serviceclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">ServiceClient</span> <span class="n">serviceClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServiceClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">// Fetch Service information using the Service in the PurchaseApp example</span>
<span class="n">ServiceMeta</span> <span class="n">serviceMeta</span> <span class="o">=</span> <span class="n">serviceClient</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;PurchaseApp&quot;</span><span class="o">,</span> <span class="s">&quot;CatalogLookup&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="streamclient">
<h4>StreamClient<a class="headerlink" href="#streamclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// Interact with the CDAP instance located at example.com, port 10000</span>
<span class="n">ClientConfig</span> <span class="n">clientConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfig</span><span class="o">(</span><span class="s">&quot;example.com&quot;</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

<span class="c1">// Construct the client used to interact with CDAP</span>
<span class="n">StreamClient</span> <span class="n">streamClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StreamClient</span><span class="o">(</span><span class="n">clientConfig</span><span class="o">);</span>

<span class="c1">// Fetch the Stream list</span>
<span class="n">List</span> <span class="n">streams</span> <span class="o">=</span> <span class="n">streamClient</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>

<span class="c1">// Create a Stream, using the Purchase example</span>
<span class="n">streamClient</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">&quot;purchaseStream&quot;</span><span class="o">);</span>

<span class="c1">// Fetch a Stream&#39;s properties, using the Purchase example</span>
<span class="n">StreamProperties</span> <span class="n">config</span> <span class="o">=</span> <span class="n">streamClient</span><span class="o">.</span><span class="na">getConfig</span><span class="o">(</span><span class="s">&quot;purchaseStream&quot;</span><span class="o">);</span>

<span class="c1">// Send events to a Stream, using the Purchase example</span>
<span class="n">streamClient</span><span class="o">.</span><span class="na">sendEvent</span><span class="o">(</span><span class="s">&quot;purchaseStream&quot;</span><span class="o">,</span> <span class="s">&quot;Tom bought 5 apples for $10&quot;</span><span class="o">);</span>

<span class="c1">// Read all events from a Stream (results in events)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">StreamEvent</span><span class="o">&gt;</span> <span class="n">events</span> <span class="o">=</span> <span class="n">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">();</span>
<span class="n">streamClient</span><span class="o">.</span><span class="na">getEvents</span><span class="o">(</span><span class="s">&quot;purchaseStream&quot;</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">,</span> <span class="n">events</span><span class="o">);</span>

<span class="c1">// Read first 5 events from a Stream (results in events)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">StreamEvent</span><span class="o">&gt;</span> <span class="n">events</span> <span class="o">=</span> <span class="n">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">();</span>
<span class="n">streamClient</span><span class="o">.</span><span class="na">getEvents</span><span class="o">(</span><span class="n">streamId</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="n">events</span><span class="o">);</span>

<span class="c1">// Read 2nd and 3rd events from a Stream, after first calling getEvents</span>
<span class="kt">long</span> <span class="n">startTime</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">getTimestamp</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">endTime</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">getTimestamp</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
<span class="n">events</span><span class="o">.</span><span class="na">clear</span><span class="o">()</span>
<span class="n">streamClient</span><span class="o">.</span><span class="na">getEvents</span><span class="o">(</span><span class="n">streamId</span><span class="o">,</span> <span class="n">startTime</span><span class="o">,</span> <span class="n">endTime</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">,</span> <span class="n">events</span><span class="o">);</span>

<span class="c1">//</span>
<span class="c1">// Write asynchronously to a Stream</span>
<span class="c1">//</span>
<span class="n">String</span> <span class="n">streamId</span> <span class="o">=</span> <span class="s">&quot;testAsync&quot;</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">StreamEvent</span><span class="o">&gt;</span> <span class="n">events</span> <span class="o">=</span> <span class="n">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">();</span>

<span class="n">streamClient</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">streamId</span><span class="o">);</span>

<span class="c1">// Send 10 async writes</span>
<span class="kt">int</span> <span class="n">msgCount</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">msgCount</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
  <span class="n">streamClient</span><span class="o">.</span><span class="na">asyncSendEvent</span><span class="o">(</span><span class="n">streamId</span><span class="o">,</span> <span class="s">&quot;Testing &quot;</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// Read them back; need to read it multiple times as the writes happen asynchronously</span>
<span class="k">while</span> <span class="o">(</span><span class="n">events</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">!=</span> <span class="n">msgCount</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">events</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
  <span class="n">streamClient</span><span class="o">.</span><span class="na">getEvents</span><span class="o">(</span><span class="n">streamId</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">,</span> <span class="n">msgCount</span><span class="o">,</span> <span class="n">events</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// Check that there are no more events</span>
<span class="n">events</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
<span class="k">while</span> <span class="o">(</span><span class="n">events</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
  <span class="n">events</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
  <span class="n">streamClient</span><span class="o">.</span><span class="na">getEvents</span><span class="o">(</span><span class="n">streamId</span><span class="o">,</span> <span class="n">lastTimestamp</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">,</span> <span class="n">msgCount</span><span class="o">,</span> <span class="n">events</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//</span>
<span class="c1">// End write asynchronously</span>
<span class="c1">//</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="command-line-interface">
<span id="cli"></span><h2>Command-Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id58">
<h3>Introduction<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<p>The Command-Line Interface (CLI) provides methods to interact with the CDAP server from within a shell,
similar to HBase shell or <tt class="docutils literal"><span class="pre">bash</span></tt>. It is located within the SDK, at <tt class="docutils literal"><span class="pre">bin/cdap-cli</span></tt> as either a bash
script or a Windows <tt class="docutils literal"><span class="pre">.bat</span></tt> file.</p>
<p>The CLI may be used in two ways: interactive mode and non-interactive mode.</p>
<div class="section" id="interactive-mode">
<h4>Interactive Mode<a class="headerlink" href="#interactive-mode" title="Permalink to this headline">¶</a></h4>
<p>To run the CLI in interactive mode, run the <tt class="docutils literal"><span class="pre">cdap-cli.sh</span></tt> executable with no arguments from the terminal:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> /bin/cdap-cli.sh
</pre></div>
</div>
<p>or, on Windows:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">~SDK&gt; bin\cdap-cli.bat</span>
</pre></div>
</div>
<p>The executable should bring you into a shell, with this prompt:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap (localhost:10000)&gt;</span>
</pre></div>
</div>
<p>This indicates that the CLI is currently set to interact with the CDAP server at <tt class="docutils literal"><span class="pre">localhost</span></tt>.
There are two ways to interact with a different CDAP server:</p>
<ul class="simple">
<li>To interact with a different CDAP server by default, set the environment variable <tt class="docutils literal"><span class="pre">CDAP_HOST</span></tt> to a hostname.</li>
<li>To change the current CDAP server, run the command <tt class="docutils literal"><span class="pre">connect</span> <span class="pre">example.com</span></tt>.</li>
</ul>
<p>For example, with <tt class="docutils literal"><span class="pre">CDAP_HOST</span></tt> set to <tt class="docutils literal"><span class="pre">example.com</span></tt>, the Shell Client would be interacting with
a CDAP instance at <tt class="docutils literal"><span class="pre">example.com</span></tt>, port <tt class="docutils literal"><span class="pre">10000</span></tt>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap (example.com:10000)&gt;</span>
</pre></div>
</div>
<p>To list all of the available commands, enter <tt class="docutils literal"><span class="pre">help</span></tt>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap (localhost:10000)&gt; help</span>
</pre></div>
</div>
</div>
<div class="section" id="non-interactive-mode">
<h4>Non-Interactive Mode<a class="headerlink" href="#non-interactive-mode" title="Permalink to this headline">¶</a></h4>
<p>To run the CLI in non-interactive mode, run the <tt class="docutils literal"><span class="pre">cdap-cli.sh</span></tt> executable, passing the command you want executed
as the argument. For example, to list all applications currently deployed to CDAP, execute:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap-cli.sh list apps</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="available-commands">
<h3>Available Commands<a class="headerlink" href="#available-commands" title="Permalink to this headline">¶</a></h3>
<p>These are the available commands:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>General</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">help</span></tt></td>
<td>Prints this helper text</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">version</span></tt></td>
<td>Prints the version</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">exit</span></tt></td>
<td>Exits the shell</td>
</tr>
<tr class="row-even"><td><strong>Calling and Executing</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">call</span> <span class="pre">procedure</span> <span class="pre">&lt;app-id&gt;.&lt;procedure-id&gt;</span> <span class="pre">&lt;method-id&gt;</span> <span class="pre">&lt;parameters-map&gt;</span></tt></td>
<td>Calls a Procedure, passing in the parameters as a JSON String map</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">execute</span> <span class="pre">&lt;query&gt;</span></tt></td>
<td>Executes a Dataset query</td>
</tr>
<tr class="row-odd"><td><strong>Creating</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">create</span> <span class="pre">dataset</span> <span class="pre">instance</span> <span class="pre">&lt;type-name&gt;</span> <span class="pre">&lt;new-dataset-name&gt;</span></tt></td>
<td>Creates a Dataset</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">create</span> <span class="pre">stream</span> <span class="pre">&lt;new-stream-id&gt;</span></tt></td>
<td>Creates a Stream</td>
</tr>
<tr class="row-even"><td><strong>Deleting</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">delete</span> <span class="pre">app</span> <span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Deletes an Application</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">delete</span> <span class="pre">dataset</span> <span class="pre">instance</span> <span class="pre">&lt;dataset-name&gt;</span></tt></td>
<td>Deletes a Dataset</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">delete</span> <span class="pre">dataset</span> <span class="pre">module</span> <span class="pre">&lt;module-name&gt;</span></tt></td>
<td>Deletes a Dataset module</td>
</tr>
<tr class="row-even"><td><strong>Deploying</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">deploy</span> <span class="pre">app</span> <span class="pre">&lt;app-jar-file&gt;</span></tt></td>
<td>Deploys an application</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">deploy</span> <span class="pre">dataset</span> <span class="pre">module</span> <span class="pre">&lt;module-jar-file&gt;</span> <span class="pre">&lt;module-name&gt;</span> <span class="pre">&lt;module-jar-classname&gt;</span></tt></td>
<td>Deploys a Dataset module</td>
</tr>
<tr class="row-odd"><td><strong>Describing</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">describe</span> <span class="pre">app</span> <span class="pre">&lt;app-id&gt;</span></tt></td>
<td>Shows detailed information about an application</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">describe</span> <span class="pre">dataset</span> <span class="pre">module</span> <span class="pre">&lt;module-name&gt;</span></tt></td>
<td>Shows information about a Dataset module</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">describe</span> <span class="pre">dataset</span> <span class="pre">type</span> <span class="pre">&lt;type-name&gt;</span></tt></td>
<td>Shows information about a Dataset type</td>
</tr>
<tr class="row-odd"><td><strong>Retrieving Information</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">history</span> <span class="pre">flow</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the run history of a Flow</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">history</span> <span class="pre">mapreduce</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the run history of a MapReduce job</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">history</span> <span class="pre">procedure</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the run history of a Procedure</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">history</span> <span class="pre">runnable</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the run history of a Service Handler/Worker</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">history</span> <span class="pre">workflow</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the run history of a Workflow</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">instances</span> <span class="pre">flowlet</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the instances of a Flowlet</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">instances</span> <span class="pre">procedure</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the instances of a Procedure</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">instances</span> <span class="pre">runnable</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the instances of a Service Handler/Worker</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">live</span> <span class="pre">flow</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the live info of a Flow</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">live</span> <span class="pre">procedure</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the live info of a Procedure</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">logs</span> <span class="pre">flow</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span> <span class="pre">[&lt;start-time&gt;</span> <span class="pre">&lt;end-time&gt;]</span></tt></td>
<td>Gets the logs of a Flow</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">logs</span> <span class="pre">mapreduce</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span> <span class="pre">[&lt;start-time&gt;</span> <span class="pre">&lt;end-time&gt;]</span></tt></td>
<td>Gets the logs of a MapReduce job</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">logs</span> <span class="pre">procedure</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span> <span class="pre">[&lt;start-time&gt;</span> <span class="pre">&lt;end-time&gt;]</span></tt></td>
<td>Gets the logs of a Procedure</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">logs</span> <span class="pre">runnable</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span> <span class="pre">[&lt;start-time&gt;</span> <span class="pre">&lt;end-time&gt;]</span></tt></td>
<td>Gets the logs of a Service Handler/Worker</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">status</span> <span class="pre">flow</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the status of a Flow</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">status</span> <span class="pre">mapreduce</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the status of a MapReduce job</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">status</span> <span class="pre">procedure</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the status of a Procedure</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">status</span> <span class="pre">service</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the status of a Service</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">get</span> <span class="pre">status</span> <span class="pre">workflow</span> <span class="pre">&lt;app-id&gt;.&lt;program-id&gt;</span></tt></td>
<td>Gets the status of a Workflow</td>
</tr>
<tr class="row-odd"><td><strong>Listing Elements</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">list</span> <span class="pre">apps</span></tt></td>
<td>Lists all applications</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">list</span> <span class="pre">dataset</span> <span class="pre">instances</span></tt></td>
<td>Lists all Datasets</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">list</span> <span class="pre">dataset</span> <span class="pre">modules</span></tt></td>
<td>Lists Dataset modules</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">list</span> <span class="pre">dataset</span> <span class="pre">types</span></tt></td>
<td>Lists Dataset types</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">list</span> <span class="pre">flows</span></tt></td>
<td>Lists Flows</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">list</span> <span class="pre">mapreduce</span></tt></td>
<td>Lists MapReduce jobs</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">list</span> <span class="pre">procedures</span></tt></td>
<td>Lists Procedures</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">list</span> <span class="pre">programs</span></tt></td>
<td>Lists all programs</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">list</span> <span class="pre">streams</span></tt></td>
<td>Lists Streams</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">list</span> <span class="pre">workflows</span></tt></td>
<td>Lists Workflows</td>
</tr>
<tr class="row-even"><td><strong>Sending Events</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">send</span> <span class="pre">stream</span> <span class="pre">&lt;stream-id&gt;</span> <span class="pre">&lt;stream-event&gt;</span></tt></td>
<td>Sends an event to a Stream</td>
</tr>
<tr class="row-even"><td><strong>Setting</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">set</span> <span class="pre">instances</span> <span class="pre">flowlet</span> <span class="pre">&lt;program-id&gt;</span> <span class="pre">&lt;num-instances&gt;</span></tt></td>
<td>Sets the instances of a Flowlet</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">set</span> <span class="pre">instances</span> <span class="pre">procedure</span> <span class="pre">&lt;program-id&gt;</span> <span class="pre">&lt;num-instances&gt;</span></tt></td>
<td>Sets the instances of a Procedure</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">set</span> <span class="pre">instances</span> <span class="pre">runnable</span> <span class="pre">&lt;program-id&gt;</span> <span class="pre">&lt;num-instances&gt;</span></tt></td>
<td>Sets the instances of a Service Handler/Worker</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">set</span> <span class="pre">stream</span> <span class="pre">ttl</span> <span class="pre">&lt;stream-id&gt;</span> <span class="pre">&lt;ttl-in-seconds&gt;</span></tt></td>
<td>Sets the Time-to-Live (TTL) of a Stream</td>
</tr>
<tr class="row-odd"><td><strong>Starting</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">start</span> <span class="pre">flow</span> <span class="pre">&lt;program-id&gt;</span></tt></td>
<td>Starts a Flow</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">start</span> <span class="pre">mapreduce</span> <span class="pre">&lt;program-id&gt;</span></tt></td>
<td>Starts a MapReduce job</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">start</span> <span class="pre">procedure</span> <span class="pre">&lt;program-id&gt;</span></tt></td>
<td>Starts a Procedure</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">start</span> <span class="pre">service</span> <span class="pre">&lt;program-id&gt;</span></tt></td>
<td>Starts a Service</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">start</span> <span class="pre">workflow</span> <span class="pre">&lt;program-id&gt;</span></tt></td>
<td>Starts a Workflow</td>
</tr>
<tr class="row-odd"><td><strong>Stopping</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">stop</span> <span class="pre">flow</span> <span class="pre">&lt;program-id&gt;</span></tt></td>
<td>Stops a Flow</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">stop</span> <span class="pre">mapreduce</span> <span class="pre">&lt;program-id&gt;</span></tt></td>
<td>Stops a MapReduce job</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">stop</span> <span class="pre">procedure</span> <span class="pre">&lt;program-id&gt;</span></tt></td>
<td>Stops a Procedure</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">stop</span> <span class="pre">service</span> <span class="pre">&lt;program-id&gt;</span></tt></td>
<td>Stops a Service</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">stop</span> <span class="pre">workflow</span> <span class="pre">&lt;program-id&gt;</span></tt></td>
<td>Stops a Workflow</td>
</tr>
<tr class="row-odd"><td><strong>Truncating</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">truncate</span> <span class="pre">dataset</span> <span class="pre">instance</span></tt></td>
<td>Truncates a Dataset</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">truncate</span> <span class="pre">stream</span></tt></td>
<td>Truncates a Stream</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="where-to-go-next">
<h3>Where to Go Next<a class="headerlink" href="#where-to-go-next" title="Permalink to this headline">¶</a></h3>
<p>Now that you&#8217;ve seen CDAP&#8217;s HTTP RESTful APIs and clients,
the last of our documentation is:</p>
<ul class="simple">
<li><a class="reference external" href="javadocs/index.html">Cask Data Application Platform Javadocs</a>,
a complete Javadoc of the CDAP Java APIs.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--
  Copyright © 2014 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->

<h3><a href="index.html">Table of Contents</a></h3>
<nav>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="getstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="case_study.html">Case Study</a></li>
<li class="toctree-l1"><a class="reference internal" href="arch.html">Concepts and Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="apps-packs.html">Apps and Packs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">APIs and Clients</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#http-restful-api">HTTP RESTful API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stream-http-api">Stream HTTP API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dataset-http-api">Dataset HTTP API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query-http-api">Query HTTP API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#procedure-http-api">Procedure HTTP API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#service-http-api">Service HTTP API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cdap-client-http-api">CDAP Client HTTP API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging-http-api">Logging HTTP API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metrics-http-api">Metrics HTTP API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#monitor-http-api">Monitor HTTP API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#java-client-api">Java Client API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#maven-dependency">Maven Dependency</a></li>
<li class="toctree-l3"><a class="reference internal" href="#components">Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sample-usage">Sample Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-interface">Command-Line Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id58">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#available-commands">Available Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#where-to-go-next">Where to Go Next</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="javadocs/index.html">Javadocs</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin.html">Administration and Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="licenses/index.html">Licenses and Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq/index.html">FAQ</a></li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="apps-packs.html"
                        title="Previous Chapter">Cask Data Application Platform Applications and Packs</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="javadocs/index.html"
                        title="Next Chapter">Javadocs</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >Index</a></li>
        <li class="right" >
          <a href="javadocs/index.html" title="Javadocs"
             >Next</a> |</li>
        <li class="right" >
          <a href="apps-packs.html" title="Cask Data Application Platform Applications and Packs"
             >Previous</a> |</li>
        <li><a href="index.html">Cask Data Application Platform 2.5.0 Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014 Cask Data, Inc.
    </div>
  </body>
</html>