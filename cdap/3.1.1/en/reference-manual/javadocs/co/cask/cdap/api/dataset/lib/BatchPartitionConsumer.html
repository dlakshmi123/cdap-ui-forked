<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
    <meta name="robots" content="noindex, nofollow">

<!-- Generated by javadoc (version 1.7.0_80) on Fri Aug 14 20:42:26 PDT 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>BatchPartitionConsumer (Cask Data Application Platform (CDAP) 3.1.1 API)</title>
<meta name="date" content="2015-08-14">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BatchPartitionConsumer (Cask Data Application Platform (CDAP) 3.1.1 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BatchPartitionConsumer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../co/cask/cdap/api/dataset/lib/AbstractDatasetDefinition.html" title="class in co.cask.cdap.api.dataset.lib"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../co/cask/cdap/api/dataset/lib/CloseableIterator.html" title="interface in co.cask.cdap.api.dataset.lib"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?co/cask/cdap/api/dataset/lib/BatchPartitionConsumer.html" target="_top">Frames</a></li>
<li><a href="BatchPartitionConsumer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">co.cask.cdap.api.dataset.lib</div>
<h2 title="Class BatchPartitionConsumer" class="title">Class BatchPartitionConsumer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>co.cask.cdap.api.dataset.lib.BatchPartitionConsumer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="../../../../../../co/cask/cdap/api/annotation/Beta.html" title="annotation in co.cask.cdap.api.annotation">@Beta</a>
public abstract class <span class="strong">BatchPartitionConsumer</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A utility class to assist an incremental consumer of <a href="../../../../../../co/cask/cdap/api/dataset/lib/Partition.html" title="interface in co.cask.cdap.api.dataset.lib"><code>Partition</code></a>s of a <a href="../../../../../../co/cask/cdap/api/dataset/lib/PartitionedFileSet.html" title="interface in co.cask.cdap.api.dataset.lib"><code>PartitionedFileSet</code></a>. The
 implementing class is required to handle persistence of the consumption state via the abstract readBytes and
 writeBytes methods.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../co/cask/cdap/api/dataset/lib/BatchPartitionConsumer.html#BatchPartitionConsumer()">BatchPartitionConsumer</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../co/cask/cdap/api/dataset/lib/PartitionedFileSet.html" title="interface in co.cask.cdap.api.dataset.lib">PartitionedFileSet</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../co/cask/cdap/api/dataset/lib/BatchPartitionConsumer.html#getConfiguredDataset(co.cask.cdap.api.data.DatasetContext,%20java.lang.String)">getConfiguredDataset</a></strong>(<a href="../../../../../../co/cask/cdap/api/data/DatasetContext.html" title="interface in co.cask.cdap.api.data">DatasetContext</a>&nbsp;datasetContext,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;partitionedFileSetName)</code>
<div class="block">Used from the beforeSubmit method of the implementing batch job to get a PartitionedFileSet that has specified
 a set of <a href="../../../../../../co/cask/cdap/api/dataset/lib/Partition.html" title="interface in co.cask.cdap.api.dataset.lib"><code>Partition</code></a>s of a <a href="../../../../../../co/cask/cdap/api/dataset/lib/PartitionedFileSet.html" title="interface in co.cask.cdap.api.dataset.lib"><code>PartitionedFileSet</code></a> to be processed by the run of the batch job.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../co/cask/cdap/api/dataset/lib/BatchPartitionConsumer.html#persist(co.cask.cdap.api.data.DatasetContext)">persist</a></strong>(<a href="../../../../../../co/cask/cdap/api/data/DatasetContext.html" title="interface in co.cask.cdap.api.data">DatasetContext</a>&nbsp;context)</code>
<div class="block">Used to persist the state of the PartitionConsumerState.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../co/cask/cdap/api/dataset/lib/BatchPartitionConsumer.html#readBytes(co.cask.cdap.api.data.DatasetContext)">readBytes</a></strong>(<a href="../../../../../../co/cask/cdap/api/data/DatasetContext.html" title="interface in co.cask.cdap.api.data">DatasetContext</a>&nbsp;datasetContext)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../co/cask/cdap/api/dataset/lib/BatchPartitionConsumer.html#writeBytes(co.cask.cdap.api.data.DatasetContext,%20byte[])">writeBytes</a></strong>(<a href="../../../../../../co/cask/cdap/api/data/DatasetContext.html" title="interface in co.cask.cdap.api.data">DatasetContext</a>&nbsp;datasetContext,
          byte[]&nbsp;stateBytes)</code>
<div class="block">Writes the serialized bytes of the state of the partition consuming batch process.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BatchPartitionConsumer()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BatchPartitionConsumer</h4>
<pre>public&nbsp;BatchPartitionConsumer()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="readBytes(co.cask.cdap.api.data.DatasetContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readBytes</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</a>
protected abstract&nbsp;byte[]&nbsp;readBytes(<a href="../../../../../../co/cask/cdap/api/data/DatasetContext.html" title="interface in co.cask.cdap.api.data">DatasetContext</a>&nbsp;datasetContext)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the serialized bytes of the state of the partition consuming batch process; return null to indicate a fresh
 state of consuming (defaults to starting from the beginning).</dd></dl>
</li>
</ul>
<a name="writeBytes(co.cask.cdap.api.data.DatasetContext, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeBytes</h4>
<pre>protected abstract&nbsp;void&nbsp;writeBytes(<a href="../../../../../../co/cask/cdap/api/data/DatasetContext.html" title="interface in co.cask.cdap.api.data">DatasetContext</a>&nbsp;datasetContext,
              byte[]&nbsp;stateBytes)</pre>
<div class="block">Writes the serialized bytes of the state of the partition consuming batch process. The bytes written in this method
 should be available in the following call to readBytes(DatasetContext).</div>
</li>
</ul>
<a name="getConfiguredDataset(co.cask.cdap.api.data.DatasetContext, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConfiguredDataset</h4>
<pre>public&nbsp;<a href="../../../../../../co/cask/cdap/api/dataset/lib/PartitionedFileSet.html" title="interface in co.cask.cdap.api.dataset.lib">PartitionedFileSet</a>&nbsp;getConfiguredDataset(<a href="../../../../../../co/cask/cdap/api/data/DatasetContext.html" title="interface in co.cask.cdap.api.data">DatasetContext</a>&nbsp;datasetContext,
                                      <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;partitionedFileSetName)</pre>
<div class="block">Used from the beforeSubmit method of the implementing batch job to get a PartitionedFileSet that has specified
 a set of <a href="../../../../../../co/cask/cdap/api/dataset/lib/Partition.html" title="interface in co.cask.cdap.api.dataset.lib"><code>Partition</code></a>s of a <a href="../../../../../../co/cask/cdap/api/dataset/lib/PartitionedFileSet.html" title="interface in co.cask.cdap.api.dataset.lib"><code>PartitionedFileSet</code></a> to be processed by the run of the batch job.
 It does this by reading back the previous state, determining the new partitions to read, and computing the new
 state (but the persistence of this new state does not happen until the call to <code>persist()</code>. It then returns
 the dataset instantiated with the discovered partitions as input.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>datasetContext</code> - dataset context used to access the PartitionedFileSet.</dd><dd><code>partitionedFileSetName</code> - the name of the PartitionedFileSet of which partitions will be processed.</dd>
<dt><span class="strong">Returns:</span></dt><dd>a PartitionedFileSet with arguments specified such that a call to its getInputFormatConfiguration method
 will return the paths of the Partitions that have yet to be consumed, according to the state deserialized from
 the implementing readBytes(DatasetContext) method.</dd></dl>
</li>
</ul>
<a name="persist(co.cask.cdap.api.data.DatasetContext)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>persist</h4>
<pre>public&nbsp;void&nbsp;persist(<a href="../../../../../../co/cask/cdap/api/data/DatasetContext.html" title="interface in co.cask.cdap.api.data">DatasetContext</a>&nbsp;context)</pre>
<div class="block">Used to persist the state of the PartitionConsumerState. Call this method at the end of processing the partitions.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BatchPartitionConsumer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../co/cask/cdap/api/dataset/lib/AbstractDatasetDefinition.html" title="class in co.cask.cdap.api.dataset.lib"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../co/cask/cdap/api/dataset/lib/CloseableIterator.html" title="interface in co.cask.cdap.api.dataset.lib"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?co/cask/cdap/api/dataset/lib/BatchPartitionConsumer.html" target="_top">Frames</a></li>
<li><a href="BatchPartitionConsumer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015 <a href="http://cask.co" target="_blank">Cask Data, Inc.</a> Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License, Version 2.0</a>.</small></p>
</body>
</html>
