<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="robots" content="noindex, nofollow">

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright © 2014 Cask Data, Inc." name="copyright" />
<script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Type Projection &mdash; Cask Data Application Platform 2.8.3 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.8.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 2.8.3 Documentation" href="../../index.html" />
    <link rel="up" title="Flows and Flowlets" href="index.html" />
    <link rel="next" title="Stream Event" href="stream-event.html" />
    <link rel="prev" title="Input Context" href="input-context.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="stream-event.html" title="Stream Event"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="input-context.html" title="Input Context"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/cdap/json-versions.js"/></script>
        <script>window.setVersion('2.8.3');</script>
       
        <li><a href="../../table-of-contents.html">CDAP Developers’ Manual</a> &raquo;</li>
          <li><a href="../index.html" >Building Blocks</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Flows and Flowlets</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="type-projection">
<h1>Type Projection<a class="headerlink" href="#type-projection" title="Permalink to this headline">¶</a></h1>
<p>Flowlets perform an implicit projection on the input objects if they do
not match exactly what the process method accepts as arguments. This
allows you to write a single process method that can accept multiple
<strong>compatible</strong> types. For example, if you have a process method:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@ProcessInput</span>
<span class="n">count</span><span class="o">(</span><span class="n">String</span> <span class="n">word</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>and you send data of type <code class="docutils literal"><span class="pre">Long</span></code> to this Flowlet, then that type does
not exactly match what the process method expects. You could now write
another process method for <code class="docutils literal"><span class="pre">Long</span></code> numbers:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@ProcessInput</span> <span class="n">count</span><span class="o">(</span><span class="n">Long</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">count</span><span class="o">(</span><span class="n">number</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>
</div>
<p>and you could do that for every type that you might possibly want to
count, but that would be rather tedious. Type projection does this for
you automatically. If no process method is found that matches the type
of an object exactly, it picks a method that is compatible with the
object.</p>
<p>In this case, because Long can be converted into a String, it is
compatible with the original process method. Other compatible
conversions are:</p>
<ul>
<li><p class="first">Every primitive type that can be converted to a <code class="docutils literal"><span class="pre">String</span></code> is compatible with
<code class="docutils literal"><span class="pre">String</span></code>.</p>
</li>
<li><p class="first">Any numeric type is compatible with numeric types that can represent it.
For example, <code class="docutils literal"><span class="pre">int</span></code> is compatible with <code class="docutils literal"><span class="pre">long</span></code>, <code class="docutils literal"><span class="pre">float</span></code> and <code class="docutils literal"><span class="pre">double</span></code>,
and <code class="docutils literal"><span class="pre">long</span></code> is compatible with <code class="docutils literal"><span class="pre">float</span></code> and <code class="docutils literal"><span class="pre">double</span></code>, but <code class="docutils literal"><span class="pre">long</span></code> is not
compatible with <code class="docutils literal"><span class="pre">int</span></code> because <code class="docutils literal"><span class="pre">int</span></code> cannot represent every <code class="docutils literal"><span class="pre">long</span></code> value.</p>
</li>
<li><p class="first">A byte array is compatible with a <code class="docutils literal"><span class="pre">ByteBuffer</span></code> and vice versa.</p>
</li>
<li><p class="first">A collection of type A is compatible with a collection of type B,
if type A is compatible with type B.
Here, a collection can be an array or any Java <code class="docutils literal"><span class="pre">Collection</span></code>.
Hence, a <code class="docutils literal"><span class="pre">List&lt;Integer&gt;</span></code> is compatible with a <code class="docutils literal"><span class="pre">String[]</span></code> array.</p>
</li>
<li><p class="first">Two maps are compatible if their underlying types are compatible.
For example, a <code class="docutils literal"><span class="pre">TreeMap&lt;Integer,</span> <span class="pre">Boolean&gt;</span></code> is compatible with a
<code class="docutils literal"><span class="pre">HashMap&lt;String,</span> <span class="pre">String&gt;</span></code>.</p>
</li>
<li><p class="first">Other Java objects can be compatible if their fields are compatible.
For example, in the following class <code class="docutils literal"><span class="pre">Point</span></code> is compatible with <code class="docutils literal"><span class="pre">Coordinate</span></code>,
because all common fields between the two classes are compatible.
When projecting from <code class="docutils literal"><span class="pre">Point</span></code> to <code class="docutils literal"><span class="pre">Coordinate</span></code>, the color field is dropped,
whereas the projection from <code class="docutils literal"><span class="pre">Coordinate</span></code> to <code class="docutils literal"><span class="pre">Point</span></code> will leave the <code class="docutils literal"><span class="pre">color</span></code> field
as <code class="docutils literal"><span class="pre">null</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Point</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">color</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Coordinates</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
  <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
</ul>
<p>Type projections help you keep your code generic and reusable. They also
interact well with inheritance. If a Flowlet can process a specific
object class, then it can also process any subclass of that class.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="manuals links">
    <h3><a href="../../table-of-contents/../../index.html"
        rel="nofollow">CDAP Documentation v2.8.3</a></h3>
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../../table-of-contents/../../index.html"
            rel="nofollow">Introduction</a></li>
            
      <li><div class=""></div><b><a href="../../table-of-contents/../../developers-manual/index.html"
            rel="nofollow">Developers’ Manual</a></b></li>
            
      <li><div class=""></div><a href="../../table-of-contents/../../admin-manual/index.html"
            rel="nofollow">Administration Manual</a></li>
            
      <li><div class=""></div><a href="../../table-of-contents/../../integrations/index.html"
            rel="nofollow">Integrations</a></li>
            
      <li><div class=""></div><a href="../../table-of-contents/../../examples-manual/index.html"
            rel="nofollow">Examples, Guides, and Tutorials</a></li>
            
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/index.html"
            rel="nofollow">Reference Manual</a></li>
            
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/release-notes.html"
            rel="nofollow">Release Notes</a></li>
            
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/glossary.html"
            rel="nofollow">Glossary</a></li>
            
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/faq.html"
            rel="nofollow">FAQ</a></li>
            
      <li><div class=""></div><a href="../../table-of-contents/../../search.html"
            rel="nofollow">Search</a></li>
    </ul>
   </div><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


    
<h3 class="pagenavtitle"><a href="../../table-of-contents.html">Developers’ Manual: Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html"> Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html"> Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html"> Building Blocks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core.html"> Core Abstractions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications.html"> Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../streams.html"> Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html"> Datasets</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html"> Flows and Flowlets</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="flowlets.html"> Flowlets</a></li>
<li class="toctree-l3"><a class="reference internal" href="input-context.html"> Input Context</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href=""> Type Projection</a></li>
<li class="toctree-l3"><a class="reference internal" href="stream-event.html"> Stream Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="tick-methods.html"> Tick Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="connecting-flowlets.html"> Connecting Flowlets</a></li>
<li class="toctree-l3"><a class="reference internal" href="batch-execution.html"> Batch Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="flowlets-instances.html"> Flowlets and Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="partitioning-strategies.html"> Partitioning Strategies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mapreduce-programs.html"> MapReduce Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflows.html"> Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schedules.html"> Schedules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark-programs.html"> Spark Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../procedures.html"> Procedures (Deprecated)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workers.html"> Workers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html"> Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../namespaces.html"> Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transaction-system.html"> Transaction System</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html"> Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/index.html"> Testing and Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ingesting-tools/index.html"> Ingesting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-exploration/index.html"> Data Exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/index.html"> Advanced Topics</a></li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="input-context.html"
                        title="Previous Chapter">Input Context</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="stream-event.html"
                        title="Next Chapter">Stream Event</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/2.8.3/cdap-docs-2.8.3-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
  
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Input Context" href="input-context.html" />Input Context</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        Copyright &copy; 2014-2016 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Stream Event" href="stream-event.html" />Stream Event</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>