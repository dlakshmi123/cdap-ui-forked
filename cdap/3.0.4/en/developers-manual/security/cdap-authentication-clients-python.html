<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="robots" content="noindex, nofollow">

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright © 2014-2015 Cask Data, Inc." name="copyright" />
<script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>CDAP Authentication Client for Python &mdash; Cask Data Application Platform 3.0.4 Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 3.0.4 Documentation" href="../index.html" />
    <link rel="up" title="Security" href="index.html" />
    <link rel="next" title="Custom Authentication" href="custom-authentication.html" />
    <link rel="prev" title="CDAP Authentication Client for Java" href="cdap-authentication-clients-java.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="custom-authentication.html" title="Custom Authentication"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="cdap-authentication-clients-java.html" title="CDAP Authentication Client for Java"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/cdap/json-versions.js"/></script>
        <script>window.setVersion('3.0.4');</script>
       
        <li><a href="../table-of-contents.html">CDAP Developers’ Manual</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Security</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cdap-authentication-client-for-python">
<h1>CDAP Authentication Client for Python<a class="headerlink" href="#cdap-authentication-client-for-python" title="Permalink to this headline">¶</a></h1>
<p>The Authentication Client Python API can be used for fetching the access token from the
CDAP authentication server to interact with a secure CDAP cluster.</p>
<div class="section" id="supported-actions">
<h2>Supported Actions<a class="headerlink" href="#supported-actions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Check that authentication is enabled in the CDAP cluster.</li>
<li>Fetch an access token from the authentication server with credentials supported by the
active authentication mechanism.</li>
</ul>
<p>The default implementation of the authentication
client—<code class="docutils literal"><span class="pre">BasicAuthenticationClient</span></code>—supports the default authentication mechanisms
supported by CDAP:</p>
<ul class="simple">
<li>Basic Authentication</li>
<li>LDAP</li>
<li>JASPI</li>
</ul>
</div>
<div class="section" id="custom-authentication-mechanism">
<h2>Custom Authentication Mechanism<a class="headerlink" href="#custom-authentication-mechanism" title="Permalink to this headline">¶</a></h2>
<p>If CDAP is configured to use a custom authentication mechanism, a custom authentication
client is needed to fetch the access token. Custom authentication clients must implement
the <code class="docutils literal"><span class="pre">AuthenticationClient</span></code> interface. The <code class="docutils literal"><span class="pre">AbstractAuthenticationClient</span></code> class
contains common functionality required by authentication clients, and can be extended by
the custom authentication client.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install the latest release version of CDAP Authentication Client, run:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> pip install cdap-auth-client
</pre></div>
</div>
<p>To install the development version, clone the repository:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> git clone https://github.com/caskdata/cdap-clients.git
<span class="gp">$</span> <span class="nb">cd </span>cdap-clients/cdap-authentication-clients/python/
<span class="gp">$</span> python setup.py install
</pre></div>
</div>
<p>Supported Python versions: 2.6 and 2.7</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>To use the Authentication Client Python API, include this import in your Python script:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">from cdap_auth_client import BasicAuthenticationClient</span>
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-a-basicauthenticationclient-instance">
<h3>Create a BasicAuthenticationClient instance<a class="headerlink" href="#create-a-basicauthenticationclient-instance" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><div class="highlight"><pre><span class="go">authentication_client = BasicAuthenticationClient()</span>
</pre></div>
</div>
</div>
<div class="section" id="set-the-cdap-connection-information">
<h3>Set the CDAP connection information<a class="headerlink" href="#set-the-cdap-connection-information" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>hostname</li>
<li>port</li>
<li>boolean flag, <code class="docutils literal"><span class="pre">True</span></code> if SSL is enabled</li>
</ul>
<p>Example:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">authentication_client.set_connection_info(&#39;localhost&#39;, 10000, False)</span>
</pre></div>
</div>
<p>This method should be called only once for each <code class="docutils literal"><span class="pre">AuthenticationClient</span></code> object.</p>
</div>
<div class="section" id="check-if-authentication-is-enabled-in-the-cdap-cluster">
<h3>Check if authentication is enabled in the CDAP cluster<a class="headerlink" href="#check-if-authentication-is-enabled-in-the-cdap-cluster" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><div class="highlight"><pre><span class="go">is_enabled = authentication_client.is_auth_enabled()</span>
</pre></div>
</div>
</div>
<div class="section" id="configure-authentication-client">
<h3>Configure Authentication Client<a class="headerlink" href="#configure-authentication-client" title="Permalink to this headline">¶</a></h3>
<p>Set the required fields in a dictionary:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">properties = {</span>
<span class="go">  &#39;security_auth_client_username&#39;: &#39;admin&#39;,</span>
<span class="go">  &#39;security_auth_client_password&#39;: &#39;secret&#39;,</span>
<span class="go">  &#39;security_ssl_cert_check&#39;: True</span>
<span class="go">}</span>
</pre></div>
</div>
<p>If authentication is enabled, configure the Authentication Client with user credentials
and other properties (this method should be called only once for every
<code class="docutils literal"><span class="pre">AuthenticationClient</span></code> object):</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">authentication_client.configure(properties)</span>
</pre></div>
</div>
<p><strong>Notes:</strong></p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">BasicAuthenticationClient</span></code> requires these user credentials:<ul>
<li><code class="docutils literal"><span class="pre">security_auth_client_username=username</span></code></li>
<li><code class="docutils literal"><span class="pre">security_auth_client_password=password</span></code></li>
</ul>
</li>
<li>When SSL is enabled, to suspend certificate checks and allow self-signed certificates,
set <code class="docutils literal"><span class="pre">security.security_ssl_cert_check=false</span></code>.</li>
<li>For non-interactive applications, user credentials will come from a configuration file.</li>
<li>For interactive applications, see the section <a class="reference external" href="#interactive-applications">Interactive
Applications</a> below on retrieving and using user credentials.</li>
</ul>
</div>
<div class="section" id="retrieve-and-use-the-access-token">
<h3>Retrieve and use the access token<a class="headerlink" href="#retrieve-and-use-the-access-token" title="Permalink to this headline">¶</a></h3>
<p>Retrieve and use the access token for the user from the authentication server:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">token = authentication_client.get_access_token()</span>

<span class="go">headers = { &#39;Authorization&#39;: token.token_type + &#39; &#39; + token.value }</span>
<span class="go">requests.request(method, url, headers=headers)</span>
</pre></div>
</div>
<p>If there is an error while fetching the access token, an <code class="docutils literal"><span class="pre">IOError</span></code> will be raised.</p>
</div>
</div>
<div class="section" id="interactive-applications">
<h2>Interactive Applications<a class="headerlink" href="#interactive-applications" title="Permalink to this headline">¶</a></h2>
<p>This example illustrates obtaining user credentials in an interactive application, and
then configuring the Authentication Client with the retrieved credentials:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">authentication_client.set_connection_info(&#39;localhost&#39;, 10000, False)</span>
<span class="go">properties = {}</span>

<span class="go">if authentication_client.is_auth_enabled():</span>
<span class="go">  for credential in authentication_client.get_required_credentials():</span>
<span class="go">     print(&#39;Please specify %s &gt; &#39; % credential.get_description())</span>
<span class="go">     if credential.is_secret():</span>
<span class="go">        credential_value = getpass.getpass()</span>
<span class="go">     else:</span>
<span class="go">        credential_value = raw_input()</span>
<span class="go">     properties[credential.get_name()] = credential_value</span>
<span class="go">  authentication_client.configure(properties)</span>
</pre></div>
</div>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<p>To run tests from a command line:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">python tests/basic_authentication_client_test.py</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="manuals links">
    <h3><a href="../table-of-contents/../../index.html"
        rel="nofollow">CDAP Documentation v3.0.4</a></h3>
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../table-of-contents/../../index.html"
            rel="nofollow">Overview</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../introduction/index.html"
            rel="nofollow">Introduction to CDAP</a></li>
            
      <li><div class=""></div><b><a href="../table-of-contents/../../developers-manual/index.html"
            rel="nofollow">Developers’ Manual</a></b></li>
            
      <li><div class="new-icon"></div><a href="../table-of-contents/../../application-templates/index.html"
            rel="nofollow">Application Templates</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../admin-manual/index.html"
            rel="nofollow">Administration Manual</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../integrations/index.html"
            rel="nofollow">Integrations</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../examples-manual/index.html"
            rel="nofollow">Examples, Guides, and Tutorials</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/index.html"
            rel="nofollow">Reference Manual</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/release-notes.html"
            rel="nofollow">Release Notes</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/glossary.html"
            rel="nofollow">Glossary</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/faq.html"
            rel="nofollow">FAQ</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../search.html"
            rel="nofollow">Search</a></li>
    </ul>
   </div><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


    
<h3 class="pagenavtitle"><a href="../table-of-contents.html">Developers’ Manual: Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html"> Getting Started Developing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html"> Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building-blocks/index.html"> Building Blocks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html"> Security</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="client-authentication.html">Client Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdap-authentication-clients-java.html">CDAP Authentication Client for Java</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">CDAP Authentication Client for Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-actions">Supported Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-authentication-mechanism">Custom Authentication Mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interactive-applications">Interactive Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tests">Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="custom-authentication.html">Custom Authentication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html"> Testing and Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ingesting-tools/index.html"> Ingesting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-exploration/index.html"> Data Exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html"> Advanced Topics</a></li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="cdap-authentication-clients-java.html"
                        title="Previous Chapter">CDAP Authentication Client for Java</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="custom-authentication.html"
                        title="Next Chapter">Custom Authentication</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/3.0.4/cdap-docs-3.0.4-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
  
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<div role="note" aria-label="other links">
    <h3><a href="http://docs.cask.co/" target="_blank">Documentation</a></h3>
    <ul class="this-page-menu">
        <li><a href="http://docs.cask.co/cdap/index.html" target="_blank">CDAP</a></li>
        <li><a href="http://docs.cask.co/coopr/index.html" target="_blank">Coopr</a></li>
        <li><a href="http://docs.cask.co/tephra/index.html" target="_blank">Tephra</em></a></li>
        <li><a href="http://docs.cask.co/tigon/index.html" target="_blank">Tigon</a></li>
    </ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="CDAP Authentication Client for Java" href="cdap-authentication-clients-java.html" />CDAP Authentication Client for Java</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        Copyright &copy; 2014-2015 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Custom Authentication" href="custom-authentication.html" />Custom Authentication</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>