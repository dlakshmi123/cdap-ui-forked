<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="robots" content="noindex, nofollow">

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright Â© 2014-2016 Cask Data, Inc." name="copyright" />

    
    
    <meta name="git_release" content="3.5.1">
    <meta name="git_hash" content="25145846df95c7078d2aeb402588f6bf6c5263d2">
    <meta name="git_timestamp" content="2016-09-14 21:31:53 -0700">
    <title>TimePartitioned FileSet &mdash; Cask Data Application Platform 3.5.1 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/annotator.min.css" type="text/css" />



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/copy-to-clipboard.js"></script>
    <script type="text/javascript" src="../../_static/tabbed-parsed-literal.js"></script>
    <!-- Annotator -->
<!-- 
    <script type="text/javascript" src="../../_static/cdap-annotator-full.js"></script>
    <!~~ annotator.min.css_t included in css files ~~>
    <script type="text/javascript" src="../../_static/cdap-annotator.js"></script>
 -->
    <!-- Annotator end -->
    <!-- Google Tag Manager start -->
    <script>dataLayer = [];</script>
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBZ3JL"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PBZ3JL');</script>
    <!-- Google Tag Manager end -->
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 3.5.1 Documentation" href="../../index.html" />
    <link rel="up" title="Datasets" href="index.html" />
    <link rel="next" title="System and Custom Datasets" href="system-custom.html" />
    <link rel="prev" title="Partitioned FileSet" href="partitioned-fileset.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="system-custom.html" title="System and Custom Datasets"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="partitioned-fileset.html" title="Partitioned FileSet"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/cdap/json-versions.js"/></script>
        <script>window.setVersion('3.5.1');</script>
       
        <li><a href="../../table-of-contents.html">Developersâ€™ Manual</a> &raquo;</li>
          <li><a href="../index.html" >Building Blocks</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Datasets</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div id="documentwrapper" class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="timepartitioned-fileset">
<span id="datasets-timepartitioned-fileset"></span><h1><a class="headerlink" href="#timepartitioned-fileset" title="Perma-link to this heading">ðŸ”—</a>TimePartitioned FileSet</h1>
<p>A <em>TimePartitionedFileSet</em> is a special case (and in fact, a subclass) of <code class="docutils literal"><span class="pre">PartitionedFileSet</span></code>, where
the partitioning is fixed to five integers representing the year, month, day of the month, hour of the day,
and minute of a partition's time. For convenience, it offers methods to address the partitions by
time instead of by partition key or filter. The time is interpreted as milliseconds since the Epoch.</p>
<p>These convenience methods provide access to partitions by time instead of by a partition key:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Nullable</span>
<span class="kd">public</span> <span class="n">TimePartition</span> <span class="nf">getPartitionByTime</span><span class="o">(</span><span class="kt">long</span> <span class="n">time</span><span class="o">);</span>

<span class="kd">public</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">TimePartition</span><span class="o">&gt;</span> <span class="nf">getPartitionsByTime</span><span class="o">(</span><span class="kt">long</span> <span class="n">startTime</span><span class="o">,</span> <span class="kt">long</span> <span class="n">endTime</span><span class="o">);</span>

<span class="nd">@Nullable</span>
<span class="kd">public</span> <span class="n">TimePartitionOutput</span> <span class="nf">getPartitionOutput</span><span class="o">(</span><span class="kt">long</span> <span class="n">time</span><span class="o">);</span>
</pre></div>
</div>
<p>Essentially, these methods behave the same as if you had converted the time arguments into partition
keys and then called the corresponding methods of <code class="docutils literal"><span class="pre">PartitionedFileSet</span></code> with the resulting partition keys.
Additionally:</p>
<ul class="simple">
<li>The returned partitions have an extra method to retrieve the partition time as a long.</li>
<li>The start and end times of <code class="docutils literal"><span class="pre">getPartitionsByTime()</span></code> do not correspond directly to a single partition filter,
but to a series of partition filters. For example, to retrieve the partitions between November 2014 and
March 2015, you need two partition filters: one for the months of November through December of 2014, and one
for January through March of 2015. This method converts a given time range into the corresponding set
of partition filters, retrieves the partitions for each filter, and returns the superset of all these
partitions.</li>
</ul>
<div class="section" id="using-timepartitionedfilesets-in-mapreduce">
<h2><a class="headerlink" href="#using-timepartitionedfilesets-in-mapreduce" title="Perma-link to this heading">ðŸ”—</a>Using TimePartitionedFileSets in MapReduce</h2>
<p>Using time-partitioned file sets in MapReduce is similar to partitioned file sets; however, instead of
setting an input partition filter and an output partition key, you configure an input time range and an
output partition time in the <code class="docutils literal"><span class="pre">initialize()</span></code> of the MapReduce:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">TimePartitionedFileSetArguments</span><span class="o">.</span><span class="na">setInputStartTime</span><span class="o">(</span><span class="n">inputArgs</span><span class="o">,</span> <span class="n">startTime</span><span class="o">);</span>
<span class="n">TimePartitionedFileSetArguments</span><span class="o">.</span><span class="na">setInputEndTime</span><span class="o">(</span><span class="n">inputArgs</span><span class="o">,</span> <span class="n">endTime</span><span class="o">);</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">TimePartitionedFileSetArguments</span><span class="o">.</span><span class="na">setOutputPartitionTime</span><span class="o">(</span><span class="n">outputArgs</span><span class="o">,</span> <span class="n">partitionTime</span><span class="o">);</span>
</pre></div>
</div>
<p>You can achieve the same result by specifying the input time range and the output partition time
explicitly in the MapReduce runtime arguments. For example, you could give these arguments when starting
the MapReduce through a RESTful call:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">{</span>
  <span class="s">&quot;dataset.myInput.input.start.time&quot;</span><span class="o">:</span> <span class="s">&quot;1420099200000&quot;</span><span class="o">,</span>
  <span class="s">&quot;dataset.myInput.input.end.time&quot;</span><span class="o">:</span> <span class="s">&quot; 1422777600000&quot;</span><span class="o">,</span>
  <span class="s">&quot;dataset.results.output.partition.time&quot;</span><span class="o">:</span> <span class="s">&quot; 1422777600000&quot;</span><span class="o">,</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note that the values for these times are milliseconds since the Epoch; the two times in this example represent
the midnight time of January 1st, 2015 and February 1st, 2015.</p>
</div>
<div class="section" id="exploring-timepartitionedfilesets">
<h2><a class="headerlink" href="#exploring-timepartitionedfilesets" title="Perma-link to this heading">ðŸ”—</a>Exploring TimePartitionedFileSets</h2>
<p>A time-partitioned file set can be explored with ad-hoc queries if you enable it at creation time,
similar to a FileSet, as described under <a class="reference internal" href="../../data-exploration/filesets.html#fileset-exploration"><span>FileSet Exploration</span></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

  <div role="note" aria-label="manuals links">
    <h3><a href="../../table-of-contents/../../index.html" rel="nofollow">CDAP Documentation v3.5.1</a></h3>
    
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../../table-of-contents/../../introduction/index.html" rel="nofollow">Introduction to CDAP</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../developers-manual/index.html" rel="nofollow">Developersâ€™ Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../admin-manual/index.html" rel="nofollow">Administration Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../integrations/index.html" rel="nofollow">Integrations</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../examples-manual/index.html" rel="nofollow">Examples, Guides, and Tutorials</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/index.html" rel="nofollow">Reference Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../faqs/index.html" rel="nofollow">FAQs</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/release-notes.html" rel="nofollow">Release Notes</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/glossary.html" rel="nofollow">Glossary</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../search.html" rel="nofollow">Search</a></li>
    </ul>
    <h3 class="cdap-extensions">CDAP Extensions</h3>
    
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../../table-of-contents/../../hydrator-manual/index.html" rel="nofollow">Cask Hydrator</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../tracker-manual/index.html" rel="nofollow">Cask Tracker</a></li>
    </ul>
  </div>
    
  <h3 class="pagenavtitle"><a href="../../table-of-contents.html">Developersâ€™ Manual: Table&nbsp;of&nbsp;Contents</a></h3>
    <nav class="pagenav">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html"> Getting Started Developing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html"> Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html"> Building Blocks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core.html"> Core Abstractions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications.html"> Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../streams.html"> Streams</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html"> Datasets</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="overview.html"> Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="table.html"> Table API</a></li>
<li class="toctree-l3"><a class="reference internal" href="fileset.html"> FileSets</a></li>
<li class="toctree-l3"><a class="reference internal" href="partitioned-fileset.html"> Partitioned FileSets</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href=""> TimePartitioned FileSets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-timepartitionedfilesets-in-mapreduce">Using TimePartitionedFileSets in MapReduce</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exploring-timepartitionedfilesets">Exploring TimePartitionedFileSets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="system-custom.html"> System and Custom Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="cube.html"> Cube Dataset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../views.html"> Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flows-flowlets/index.html"> Flows and Flowlets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mapreduce-programs.html"> MapReduce Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins.html"> Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schedules.html"> Schedules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../secure-keys.html"> Secure Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html"> Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark-programs.html"> Spark Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workers.html"> Workers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflows.html"> Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../artifacts.html"> Artifacts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata-lineage.html"> Metadata and Lineage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audit-logging.html"> Audit Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../namespaces.html"> Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transaction-system.html"> Transaction System</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html"> Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/index.html"> Testing and Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ingesting-tools/index.html"> Ingesting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-exploration/index.html"> Data Exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/index.html"> Advanced Topics</a></li>
</ul>
 
    </nav>
  
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/3.5.1/cdap-docs-3.5.1-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
<div role="note" aria-label="other links">
    <h3><a href="http://docs.cask.co/" target="_blank">Documentation</a></h3>
    <ul class="this-page-menu">
        <li><a href="http://docs.cask.co/cdap/index.html" target="_blank">CDAP</a></li>
        <li><a href="http://docs.cask.co/coopr/index.html" target="_blank">Coopr</a></li>
        <li><a href="http://docs.cask.co/tigon/index.html" target="_blank">Tigon</a></li>
    </ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>

  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Partitioned FileSet" href="partitioned-fileset.html" />Partitioned FileSet</a>&nbsp;&nbsp;
    </th>
    
    <th class="tg-s6z2">
        Copyright &copy; 2014-2016 Cask Data, Inc.
      &bull; Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="System and Custom Datasets" href="system-custom.html" />System and Custom Datasets</a>
    </th>

  </tr>
</table>

    </div>
  </body>
</html>