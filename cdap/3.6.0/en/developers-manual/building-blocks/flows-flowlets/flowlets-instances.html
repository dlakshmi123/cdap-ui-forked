<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright Â© 2014 Cask Data, Inc." name="copyright" />

    
    
    <meta name="git_release" content="3.6.0">
    <meta name="git_hash" content="03bd802f7bc5781fec707fd5e091333e84f24799">
    <meta name="git_timestamp" content="2016-10-06 16:55:20 -0700">
    <title>Flowlet Instances and Resources &mdash; Cask Data Application Platform 3.6.0 Documentation</title>

    <link rel="canonical" href="http://docs.cask.co/cdap/3.6.0/en/developers-manual/building-blocks/flows-flowlets/flowlets-instances.html">

    
    <link rel="stylesheet" href="../../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/annotator.min.css" type="text/css" />



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/copy-to-clipboard.js"></script>
    <script type="text/javascript" src="../../_static/tabbed-parsed-literal.js"></script>
    <!-- Annotator -->
<!-- 
    <script type="text/javascript" src="../../_static/cdap-annotator-full.js"></script>
    <!~~ annotator.min.css_t included in css files ~~>
    <script type="text/javascript" src="../../_static/cdap-annotator.js"></script>
 -->
    <!-- Annotator end -->
    <!-- Google Tag Manager start -->
    <script>dataLayer = [];</script>
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBZ3JL"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PBZ3JL');</script>
    <!-- Google Tag Manager end -->
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 3.6.0 Documentation" href="../../index.html" />
    <link rel="up" title="Flows and Flowlets" href="index.html" />
    <link rel="next" title="Partitioning Strategies" href="partitioning-strategies.html" />
    <link rel="prev" title="Batch Execution" href="batch-execution.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="partitioning-strategies.html" title="Partitioning Strategies"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="batch-execution.html" title="Batch Execution"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/cdap/json-versions.js"/></script>
        <script>window.setVersion('3.6.0');</script>
       
        <li><a href="../../table-of-contents.html">Developersâ€™ Manual</a> &raquo;</li>
          <li><a href="../index.html" >Building Blocks</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Flows and Flowlets</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div id="documentwrapper" class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="flowlet-instances-and-resources">
<span id="flows-flowlets-resources"></span><span id="flows-flowlets-instances"></span><h1><a class="headerlink" href="#flowlet-instances-and-resources" title="Perma-link to this heading">ðŸ”—</a>Flowlet Instances and Resources</h1>
<p>Both the number of instances and the resources it requires can be specified for a flowlet.</p>
<div class="section" id="instances">
<h2><a class="headerlink" href="#instances" title="Perma-link to this heading">ðŸ”—</a>Instances</h2>
<p>You can have one or more instances of any given flowlet, each consuming a disjoint
partition of each input. You can control the number of instances programmatically via the
<a class="reference external" href="../../source/../../reference-manual/http-restful-api/lifecycle.html#rest-scaling-flowlets" title="(in Cask Data Application Platform v3.6.0)"><span class="xref std std-ref">REST interfaces</span></a> or via the CDAP UI. This enables you
to scale your application to meet capacity at runtime.</p>
<p>In the stand-alone CDAP, multiple flowlet instances are run in threads, so in some cases
actual performance may not be improved. However, in the Distributed CDAP,
each flowlet instance runs in its own Java Virtual Machine (JVM) with independent compute
resources. Scaling the number of flowlets can improve performance and have a major impact
depending on your implementation.</p>
</div>
<div class="section" id="resources">
<h2><a class="headerlink" href="#resources" title="Perma-link to this heading">ðŸ”—</a>Resources</h2>
<p>When an application is configured, the YARN container for a flowlet can be sized, both in terms of
the amount of memory and the number of virtual cores assigned.</p>
<p>For instance, using the example of the <a class="reference internal" href="flowlets.html#flowlets-roundingflowlet"><span>RoundingFlowlet</span></a>, the size of
the YARN container (in megabytes) and the number of virtual cores can be set by using the Resources API
to create a Resource instance for the flowlet:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RoundingFlowlet</span> <span class="kd">extends</span> <span class="n">AbstractFlowlet</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">FlowletConfigurer</span> <span class="n">configurer</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="n">configurer</span><span class="o">);</span>
    <span class="n">setName</span><span class="o">(</span><span class="s">&quot;round&quot;</span><span class="o">);</span>
    <span class="n">setDescription</span><span class="o">(</span><span class="s">&quot;A rounding flowlet&quot;</span><span class="o">);</span>
    <span class="n">setResources</span><span class="o">(</span><span class="k">new</span> <span class="n">Resources</span><span class="o">(</span><span class="mi">1024</span><span class="o">,</span> <span class="mi">2</span><span class="o">));</span>
  <span class="o">}</span>
</pre></div>
</div>
<p>If only the memory requirement needs to be set, that can be done using:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">setResources</span><span class="o">(</span><span class="k">new</span> <span class="n">Resources</span><span class="o">(</span><span class="mi">1024</span><span class="o">));</span>
</pre></div>
</div>
<p>This is shown in the <a class="reference external" href="../../source/../../examples-manual/examples/purchase.html#examples-purchase" title="(in Cask Data Application Platform v3.6.0)"><span class="xref std std-ref">Purchase</span></a> example, in the configuration of
the <code class="docutils literal"><span class="pre">PurchaseStore</span></code> flowlet.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

  <div role="note" aria-label="manuals links">
    <h3><a href="../../table-of-contents/../../index.html" rel="nofollow">CDAP Documentation v3.6.0</a></h3>
    
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../../table-of-contents/../../introduction/index.html" rel="nofollow">Introduction to CDAP</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../developers-manual/index.html" rel="nofollow">Developersâ€™ Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../admin-manual/index.html" rel="nofollow">Administration Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../integrations/index.html" rel="nofollow">Integrations</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../examples-manual/index.html" rel="nofollow">Examples, Guides, and Tutorials</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/index.html" rel="nofollow">Reference Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../faqs/index.html" rel="nofollow">FAQs</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/release-notes.html" rel="nofollow">Release Notes</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/glossary.html" rel="nofollow">Glossary</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../search.html" rel="nofollow">Search</a></li>
    </ul>
    <h3 class="cdap-extensions">CDAP Extensions</h3>
    
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../../table-of-contents/../../hydrator-manual/index.html" rel="nofollow">Cask Hydrator</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../tracker-manual/index.html" rel="nofollow">Cask Tracker</a></li>
    </ul>
  </div>
    
  <h3 class="pagenavtitle"><a href="../../table-of-contents.html">Developersâ€™ Manual: Table&nbsp;of&nbsp;Contents</a></h3>
    <nav class="pagenav">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html"> Getting Started Developing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html"> Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html"> Building Blocks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core.html"> Core Abstractions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications.html"> Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../streams.html"> Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html"> Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../views.html"> Views</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html"> Flows and Flowlets</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="flowlets.html"> Flowlets</a></li>
<li class="toctree-l3"><a class="reference internal" href="input-context.html"> Input Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="type-projection.html"> Type Projection</a></li>
<li class="toctree-l3"><a class="reference internal" href="stream-event.html"> Stream Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="tick-methods.html"> Tick Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="connecting-flowlets.html"> Connecting Flowlets</a></li>
<li class="toctree-l3"><a class="reference internal" href="batch-execution.html"> Batch Execution</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href=""> Flowlets and Instances</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#instances">Instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="#resources">Resources</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="partitioning-strategies.html"> Partitioning Strategies</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#flow-and-flowlet-examples">Flow and Flowlet Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mapreduce-programs.html"> MapReduce Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins.html"> Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schedules.html"> Schedules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../secure-keys.html"> Secure Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html"> Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark-programs.html"> Spark Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workers.html"> Workers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflows.html"> Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../artifacts.html"> Artifacts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata-lineage.html"> Metadata and Lineage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audit-logging.html"> Audit Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../namespaces.html"> Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transaction-system.html"> Transaction System</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html"> Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/index.html"> Testing and Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ingesting-tools/index.html"> Ingesting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-exploration/index.html"> Data Exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/index.html"> Advanced Topics</a></li>
</ul>
 
    </nav>
  
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/3.6.0/cdap-docs-3.6.0-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
<div role="note" aria-label="other links">
    <h3><a href="http://docs.cask.co/" target="_blank">Documentation</a></h3>
    <ul class="this-page-menu">
        <li><a href="http://docs.cask.co/cdap/index.html" target="_blank">CDAP</a></li>
        <li><a href="http://docs.cask.co/coopr/index.html" target="_blank">Coopr</a></li>
        <li><a href="http://docs.cask.co/tigon/index.html" target="_blank">Tigon</a></li>
    </ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>

  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Batch Execution" href="batch-execution.html" />Batch Execution</a>&nbsp;&nbsp;
    </th>
    
    <th class="tg-s6z2">
        Copyright &copy; 2014-2016 Cask Data, Inc.
      &bull; Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Partitioning Strategies" href="partitioning-strategies.html" />Partitioning Strategies</a>
    </th>

  </tr>
</table>

    </div>
  </body>
</html>