<!doctype html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Continuuity</title>
  <link rel="shortcut icon" type="image/x-icon" href="http://www.continuuity.com/wp-content/themes/continuuity/images/favicon.ico">

  <meta name="description" content="">
  <meta name="author" content="Continuuity, Inc.">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">

  <script type="text/javascript" src="/core/lib/jquery-1.9.1.js"></script>
  <script type="text/javascript" src="/core/lib/bootstrap.js"></script>
  <script type="text/javascript" src="/core/lib/handlebars.js"></script>
  <script type="text/javascript" src="/core/lib/ember-1.0.0-rc.5.js"></script>
  <script type="text/javascript" src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="/core/lib/jquery.timeago.js"></script>
  <script type="text/javascript" src="/core/lib/jquery.jsPlumb-1.3.6-all.js"></script>
  <script type="text/javascript" src="/core/lib/d3.v3.js"></script>
  <script type="text/javascript" src="/core/lib/string.min.js"></script>
  <script type="text/javascript" src="/core/lib/require.js" data-main="main"></script>

  <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">

</head>
<body>
 <div id="nav">
    <a href="#" id="logo"></a>
    <a href="#" id="product-name"></a>
    <ul>
      <li class="overview"><a class="nav-link nav-dash" href="#">Overview</a></li>
      <li><a class="nav-link nav-streams" href="#/streams">Collect</a></li>
      <li><a class="nav-link nav-flows" href="#/flows">Process</a></li>
      <li><a class="nav-link nav-datasets" href="#/datasets">Store</a></li>
      <li><a class="nav-link nav-queries" href="#/procedures">Query</a></li>
    </ul>
  </div>

  <script type="text/x-handlebars" data-template-name="application">
    <div id="header">
      <div id="global">
      {{#if C.Env.authenticated}}
        <a href="https://accounts.continuuity.com/logout">Logout</a>
        <a href="https://accounts.continuuity.com/go-to-uservoice" target="_blank">Support</a>
        <a href="https://accounts.continuuity.com/profile" class="user-link" target="_blank">{{C.Env.user.name}}</a>
        <a href="#" class="cloud-link">{{C.Env.cluster.vpc_label}}</a>
      {{else}}
        <a href="http://support.continuuity.com/" target="_blank">Support</a>
        <a href="https://accounts.continuuity.com/" target="_blank" class="user-link">My Account</a>
      {{/if}}
      </div>
      {{view C.Embed.Breadcrumb}}
    </div>
    <div id="warning"><div>Experiencing connection issues.</div></div>
    <div id="content-body">
      {{outlet}}
    </div>
    <div id="footer" style="clear: both;">COPYRIGHT &copy; 2013 CONTINUUITY INC. ALL RIGHTS RESERVED.<br />

    <a href="http://www.continuuity.com/terms-and-privacy" target="blank">Terms and Privacy</a>
    <span>&nbsp;·&nbsp;</span>
    <a href="http://www.continuuity.com/contact-us" target="blank">Contact</a>
    <span>&nbsp;·&nbsp;</span>
    <a href="http://support.continuuity.com/" target="blank">Support</a>
    <span>&nbsp;·&nbsp;</span>
    <a style="text-decoration:underline;" href="#" onclick="return C.Util.reset();">Reset</a>
  </div>

  </script>

  <script type="text/x-handlebars" data-template-name="index">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1>Overview</h1>
    </div>
    <div id="panels">
      <div class="quarter">
        <div class="panel">
          <div class="quarter-title">Collecting</div>
          <div class="quarter-value"><strong>{{value.collect}}</strong> EPS</div>
          {{view C.Embed.DashChart kind="collect"}}
        </div>
      </div>
      <div class="quarter">
        <div class="panel">
          <div class="quarter-title">Processing</div>
          <div class="quarter-value"><strong>{{value.process}}</strong>%</div>
          {{view C.Embed.DashChart kind="process"}}
        </div>
      </div>
      <div class="quarter">
        <div class="panel">
          <div class="quarter-title">Storing</div>
          <div class="quarter-value"><strong>{{value.store.label}}</strong> {{value.store.unit}}/s</div>
          {{view C.Embed.DashChart kind="store"}}
        </div>
      </div>
      <div class="quarter">
        <div class="panel" style="margin-right: 0;">
          <div class="quarter-title">Querying</div>
          <div class="quarter-value"><strong>{{value.query}}</strong> QPS</div>
          {{view C.Embed.DashChart kind="query"}}
        </div>
      </div>

      <div class="panel" style="clear: both;">
        <div class="panel-head">
          {{view C.Embed.CreateButton entityType="Application"}}
          <div class="panel-title">Applications</div>
        </div>
        {{partial "apps-list"}}
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="App">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1>{{model.name}} <span>App</span></h1>
    </div>

    <div id="info">
      <div class="info-box" style="float: right; border: 0;padding: 0px 14px 0px 0px;">
        <div id="action-buttons" class="btn-group pull-right">
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>
              <button class="btn" style="width:64px;" {{action "promotePrompt"}} {{bindAttr flow-app="model.applicationId"}} {{bindAttr flow-id="model.meta.name"}} flow-action="Drain"><span class="btn-drain"></span><span>Push</span></button>
          <ul class="dropdown-menu">
            <li><a href="#" {{action "delete" on="click"}}>Delete This App</a></li>
          </ul>
        </div>
      </div>
      <div class="info-box" style="float: right;border: 0;padding-right: 0;">
        {{view C.Embed.DropZone uploadType="Update"}}
      </div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart metrics="/process/events/{id}" title="Processed"}}</div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart metrics="/process/busyness/{id}" unit="percent" title="Busyness"}}</div>
      <div class="info-box" style="padding: 0;text-align: center;">
        <div class="sparkline-box-title">Storage</div>
        <div class="sparkline-box-value" style="padding-left: 0;padding-top: 19px;width: 80px;">{{model.storageLabel}}<br /><span>{{model.storageUnits}}</span></div>
      </div>
    </div>

    <div id="panels">
      <div class="panel">
        <div class="panel-head"><div class="panel-title">Collect</div></div>
        {{partial "streams-list"}}
      </div>
      <div class="panel">

        <div class="panel-head">
          {{#if children.Flow.content.length}}
            <div class="btn-group pull-right" style="margin-top:2px;text-align:center;width:120px;">
              <button {{action startAllFlows on="click"}} class="btn">Start</button>
              <img style="display: none;margin-top: 3px;" src="/assets/img/start-all-load-white.gif" />
              <button {{action stopAllFlows on="click"}} class="btn">Stop</button>
            </div>
          {{/if}}
          <div class="panel-title">Process</div>
        </div>
        {{partial "flows-list"}}

      </div>
      <div class="panel">
        <div class="panel-head"><div class="panel-title">Store</div></div>
        {{partial "datasets-list"}}
      </div>
      <div class="panel">
        <div class="panel-head">
          {{#if children.Query.content.length}}
            <div class="btn-group pull-right" style="margin-top:2px;text-align:center;width:120px;">
              <button {{action startAllQueries on="click"}} class="btn">Start</button>
              <img style="display: none;margin-top: 3px;" src="/assets/img/start-all-load-white.gif" />
              <button {{action stopAllQueries on="click"}} class="btn">Stop</button>
            </div>
          {{/if}}
          <div class="panel-title">Query</div>
        </div>
        {{partial "procedures-list"}}
      </div>
    </div>

  </script>

  <script type="text/x-handlebars" data-template-name="List">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1>{{title}} <span>Data</span></h1>
    </div>
    <div id="panels">
    <div class="panel">
    {{view controller.viewType}}
    </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Stream">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1>{{model.name}} <span>Stream</span></h1>
    </div>
    <div id="info">
      <div class="info-box" style="float: right; border: 0;">
        <div id="action-buttons">
          <button class="btn dropdown-toggle" data-toggle="dropdown" style="padding-left:16px;">Actions
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li><a {{action "delete" on="click"}}>Delete This Stream</a></li>
          </ul>
        </div>
      </div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart title="Events In" metrics="/collect/events/streams/{id}"}}</div>
      <div class="info-box" style="padding: 0;text-align: center;">
        <div class="sparkline-box-title">Storage</div>
        <div class="sparkline-box-value" style="padding-left: 0;padding-top:19px;width: 80px;">{{model.storageLabel}}<br /><span>{{model.storageUnits}}</span></div>
      </div>
      <div class="info-box" style="padding: 0;text-align: center;">
        <div class="sparkline-box-title">Unconsumed</div>
        <div class="sparkline-box-value" style="padding-top:19px;padding-left:0;width:100px;">{{model.eventsLabel}} {{model.eventsUnits}}<br /><span>Events</span></div>
      </div>
    </div>
    <div id="panels">
      <div class="panel">
      <div class="panel-head"><div class="panel-title">Attached Flows</div></div>

        {{partial "flows-list"}}

      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Batch">

    <div id="title">
      {{view C.Embed.TimeSelector}}
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo BatchStatus model}}Status{{/linkTo}}</li>
        <li>{{#linkTo Batch.Log model}}Log{{/linkTo}}</li>
      </ul>
      <h1>{{model.name}} <span>MapReduce</span></h1>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="BatchStatus">
    <div id="info">
      <div class="info-box" style="float: right; border: 0;">
        <div id="action-buttons" class="btn-group pull-right">

          <button class="btn dropdown-toggle" data-toggle="dropdown">
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li><a {{action "delete"}} {{bindAttr state="model.currentState"}} {{bindAttr batchId="model.id"}} {{bindAttr applicationId="model.application"}}>Delete This Job</a></li>
          </ul>

          <button class="btn" {{bindAttr disabled="model.startPauseDisabled"}} style="width:64px;" {{action "exec"}} {{bindAttr batch-app="model.applicationId"}} {{bindAttr batch-id="model.name"}} {{bindAttr batch-action="model.defaultAction"}}><span {{bindAttr class="model.actionIcon"}}></span><span>{{model.defaultAction}}</span></button>

          <button style="border-right:0;" class="btn btn-icon" {{bindAttr disabled="model.startDisabled"}} {{action "config"}}><span class="btn-config"></span></button>

        </div>

        <div class="flow-state"><strong>{{model.currentState}}</strong></div>

      </div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart metrics="/process/completion/{parent}/mapreduce/{id}/reducers" title="Mapping" unit="percent"}}</div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart metrics="/process/completion/{parent}/mapreduce/{id}/reducers" title="Reducing" unit="percent"}}</div>

    </div>
    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="batchviz-container">
          <div id="batchviz" class="clearfix chart">
            <div class="batch-item">
              <div id="batch-map" class="batch-icon batch-map">
                <div class="info-window">
                  <div class="label">MAP</div>
                  <div class="mapper-icon"></div>
                  <div>{{model.metricData.mappersEntriesIn}} IN</div>
                  <div>{{model.metricData.mappersEntriesOut}} OUT</div>
                </div>
              </div>
              {{#if model.isRunning}}

              <progress {{bindAttr value="model.metricData.mappersCompletion" }} max="100"></progress>
              {{/if}}
            </div>
            <div class="batch-item">
              <div id="batch-reduce" class="batch-icon batch-reduce">
                <div class="info-window">
                  <div class="label">REDUCE</div>
                  <div class="reducer-icon"></div>
                  <div>{{model.metricData.reducersEntriesIn}} IN</div>
                  <div>{{model.metricData.reducersEntriesOut}} OUT</div>
                </div>
              </div>
              {{#if model.isRunning}}

              <progress {{bindAttr value="model.metricData.reducersCompletion" }} max="100"></progress>
              {{/if}}
            </div>
          </div>
        </div>
      </div>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="Flow">

    <div id="title">
      {{view C.Embed.TimeSelector}}
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo FlowStatus model}}Status{{/linkTo}}</li>
        <li>{{#linkTo Flow.Log model}}Log{{/linkTo}}</li>
        <li>{{#linkTo Flow.History model}}History{{/linkTo}}</li>
      </ul>
      <h1>{{model.meta.name}} <span>Flow</span></h1>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="FlowStatus">

    <div id="info">
      <div class="info-box" style="float: right; border: 0;padding-right: 14px;padding-left: 0px;">
        <div id="action-buttons" class="btn-group pull-right">
            <button class="btn dropdown-toggle" data-toggle="dropdown">
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li style="min-width:200px; padding:4px 16px 2px;">
              {{#each model.getMeta}}
                <div><strong>{{k}}</strong>: {{v}}
              {{/each}}
            </li>
            <li class="divider"></li>
            <li><a {{action "delete" on="click"}}>Delete This Flow</a></li>
          </ul>

          <button class="btn" {{bindAttr disabled="model.stopDisabled"}} style="width:64px;" {{action "exec"}} {{bindAttr flow-app="model.meta.app"}} {{bindAttr flow-id="model.meta.name"}} flow-action="Stop" ><span class="btn-stop"></span><span>Stop</span></button>

          <button class="btn" {{bindAttr disabled="model.startPauseDisabled"}} style="border-right:0;width:64px;" {{action "exec"}} {{bindAttr flow-app="model.meta.app"}} {{bindAttr flow-id="model.meta.name"}} {{bindAttr flow-action="model.defaultAction"}}><span {{bindAttr class="model.actionIcon"}}></span><span>{{model.defaultAction}}</span></button>

          <button class="btn btn-icon" {{bindAttr disabled="model.startDisabled"}} {{action "config"}}><span class="btn-config"></span></button>

        </div>
        <div class="flow-state"><strong>{{model.currentState}}</strong></div>
      </div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart metrics="/process/events/{parent}/flows/{id}" title="Processed"}}</div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart metrics="/process/busyness/{parent}/flows/{id}" title="Busyness" unit="percent"}}</div>
    </div>

    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="flowviz-container">

          <div class="btn-group" style="float: left;">
            <button class="btn dropdown-toggle" data-toggle="dropdown" style="padding-left:14px;float: right;">
              {{flowletLabelName}} <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
              <li><a {{action "setFlowletLabel" "rate"}}>Flowlet Rate</a></li>
              <li><a {{action "setFlowletLabel" "pending"}}>Flowlet Pending</a></li>
              <li><a {{action "setFlowletLabel" "aggregate"}}>Flowlet Processed</a></li>
            </ul>
          </div>

          {{view C.Embed.Visualizer viewName="visualizer"}}
        </div>
      </div>
    </div>

    {{outlet}}

  </script>

  <!-- Flowlet Status Template -->

  <script type="text/x-handlebars" data-template-name="FlowStatus/Flowlet">

    <div class="popup-modal">

      <div class="popup-container">
        <div class="popup-body">
          <div class="popup-close" {{action close on="click"}}>×</div>

          {{#if controllers.FlowStatus.model.isRunning}}
            <div class="btn-group pull-right" style="margin-top: 4px;">
              <button class="btn" {{action "addOneInstance" on="click"}}>+</button>
              <button class="btn" {{action "removeOneInstance" on="click"}}>-</button>
              <button disabled="disabled" class="btn" style="width: 160px;text-align:left;">{{model.instances}} instance{{model.plural}}</button>
            </div>
          {{/if}}

          <div class="popup-icon"></div>

          <h1 class="popup-title"> {{model.name}}</h1>
          <div id="flowlet-popup-tabs">
            <div id="flowlet-popup-inputs-tab" class="flowlet-popup-tab tab-selected"><a href="#" {{action select "inputs"}}>Inputs</a></div>
            <div id="flowlet-popup-processed-tab" class="flowlet-popup-tab"><a href="#" {{action select "processed"}}>Processed</a></div>
            <div id="flowlet-popup-outputs-tab" class="flowlet-popup-tab"><a href="#" {{action select "outputs"}}>Outputs</a></div>
            </div>
          <div id="flowlet-popup-tab-content">

            <div id="flowlet-popup-inputs" class="flowlet-popup-tab-content">

            {{#if model.inputs.length}}
              <table style="width:100%;">
                <tr>
                  <td style="height:214px;padding:0;">
                    <table style="width: 100%;">
                      <tbody>
                      {{#each model.inputs}}
                      <tr>
                        <td>
                          {{#each contrib}}
                            <div {{action navigate on="click"}} {{bindAttr flowlet-id="name"}} class="flowlet-popup-input-contrib">{{name}}</div>
                          {{/each}}
                        </td>
                        <td class="flowlet-popup-input">
                          {{id}}
                        </td>
                        <td class="flowlet-blue">
                          {{view C.Embed.Chart entityType="Queue" title="Inbound Tuples per Second" width="305" entityIdBinding=id metrics="/process/events/{app}/flows/{flow}/{flowlet}/ins/{id}" classNames="sparkline-flowlet-box"}}
                        </td>
                      </tr>
                      {{/each}}
                    </table>
                  </td>
                </tr>
              </table>
            {{else}}
              <div class="flowlet-popup-empty">
              There are no inputs on this flowlet.
              </div>
            {{/if}}

          </div>

          <div id="flowlet-popup-processed" class="flowlet-popup-tab-content">

            <table style="width: 100%">
              <tr>
                <td class="flowlet-blue">
                  {{view C.Embed.Chart entityType="Flowlet" width="305" metrics="/process/events/{app}/flows/{flow}/{id}" classNames="sparkline-flowlet-box" title="Processed"}}
                </td>
                <td class="flowlet-blue">
                  {{view C.Embed.Chart entityType="Flowlet" width="305" metrics="/store/ops/apps/{app}/flows/{flow}/{id}" classNames="sparkline-flowlet-box" title="Data Operations"}}
                </td>
              </tr>
              <tr>
                <td class="flowlet-blue">
                  {{view C.Embed.Chart entityType="Flowlet" width="305" unit="percent" metrics="/process/busyness/{app}/flows/{flow}/{id}" classNames="sparkline-flowlet-box" title="Busyness"}}
                </td>
                <td class="flowlet-blue">
                  {{view C.Embed.Chart entityType="Flowlet" width="305" metrics="/process/errors/{app}/flows/{flow}/{id}" classNames="sparkline-flowlet-box" title="Errors"}}
                </td>
              </tr>
            </table>

          </div>

          <div id="flowlet-popup-outputs" class="flowlet-popup-tab-content">
            {{#if model.outputs.length}}
            <table style="width:100%;">
              <tr>
                <td style="height:214px;padding:0;">
                  <table style="width:100%;">
                    <tbody>
                      {{#each model.outputs}}
                      <tr>
                      <td class="flowlet-blue">
                      {{view C.Embed.Chart entityType="Queue" title="Outbound Tuples per Second" width="305" entityIdBinding=id metrics="/process/events/{app}/flows/{flow}/{flowlet}/outs/{id}" classNames="sparkline-flowlet-box"}}
                      </td>
                      <td class="flowlet-popup-input">
                      {{id}}
                      </td>
                      <td>
                      {{#each contrib}}
                      <div {{action navigate on="click"}} {{bindAttr flowlet-id="name"}} class="flowlet-popup-input-contrib">{{name}}</div>
                      {{/each}}
                      </td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                </td>
              </tr>
            </table>
            {{else}}
              <div class="flowlet-popup-empty">
              There are no outputs on this flowlet.
              </div>
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  </div>

  </script>

  <!-- Stream Status Template -->

  <script type="text/x-handlebars" data-template-name="FlowStatus/Stream">

    <div class="popup-modal">
      <div class="popup-container">
        <div class="popup-body">
          <div class="popup-close" {{action close on="click"}}>×</div>

          <div class="popup-inject-wrapper" style="line-height: 10px;color: #CA6767;">
            {{view C.Embed.Injector placeholder="Sends to all attached processors"}}
            <button class="btn" {{action "inject" on="click"}}>Inject</button>
          </div>

          <div class="popup-icon-stream"></div>
          <h1 class="popup-title"><a {{bindAttr href="controller.model.href"}}>{{model.name}}</a></h1>

          <table class="table" class="popup-stream-table">
            <thead>
            <th style="width: 100px;text-align: center;">Storage</th>
            <th style="width: 100px;text-align: center;">Events</th>
            <th style="width: 295px;">Events per Second</th>
            </thead>
            <tbody>
            <tr>
            <td class="app-list-count">{{model.storageLabel}}<br /><span>{{model.storageUnits}}</span></td>
            <td class="app-list-count">{{model.unconsumed}}<br /><span>Events</span></td>
            <td>
            {{view C.Embed.Chart entityType="Stream" width="340" mode="singular" metrics="/collect/events/streams/{id}"}}
            </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </script>

  <script type="text/x-handlebars" data-template-name="Flow/Log">

    <div id="panels">
      <div class="panel" style="padding: 10px;">
        <pre id="logView" class="well query-response"></pre>
      </div>
    </div>

  </script>

  <script type="text/x-handlebars" data-template-name="Flow/History">

    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="object-list">
          {{#if runs.length}}
            <table class="table table-condensed">
            <thead>
              <tr><th style="width: 215px;">Started</th>
              <th>Ended</th>
              <th style="width:250px;">Result</th>
              </tr>
            </thead>
            <tbody>
            {{#each runs}}
              <tr class="run-list" {{action "loadRun" runId}}>
                <td>{{started}}</td>
                <td>{{ended}}</td>
                <td>{{detail}}</td>
              </tr>
            {{/each}}
            </tbody>
            </table>
          {{else}}
            <div class="object-list-empty">
            <div class="object-list-empty-content">
            <div>No History.</div>
            <span>This Flow has not completed a run yet.</span>
            </div>
            </div>
          {{/if}}
        </div>
      </div>
      <div class="panel">
        <div id="flowviz-container" class="flowviz-fade">
          {{view C.Embed.Visualizer viewName="visualizer"}}
        </div>
      </div>
    </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Dataset">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1>{{model.name}} <span>Dataset</span></h1>
    </div>
    <div id="info">
      <div class="info-box" style="float: right; border: 0;">
        <div id="action-buttons">
            <button class="btn dropdown-toggle" data-toggle="dropdown" style="padding-left:16px;">Actions
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li><a {{action "delete" on="click"}}>Delete This Dataset</a></li>
          </ul>
        </div>
      </div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart title="Write Rate" metrics="/store/writes/datasets/{id}"}}</div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart title="Read Rate (All)" metrics="/store/reads/datasets/{id}"}}</div>
       <div class="info-box" style="padding: 0;text-align: center;">
        <div class="sparkline-box-title">Storage</div>
        <div class="sparkline-box-value" style="padding-left: 0;padding-top:19px;width: 80px;">{{model.storageLabel}}<br /><span>{{model.storageUnits}}</span></div>
      </div>
    </div>
    <div id="panels">

      <div class="panel">
      <div class="panel-head"><div class="panel-title">Attached Flows</div></div>

        {{partial "flows-list"}}

      </div>
  </script>

<script type="text/x-handlebars" data-template-name="Procedure">

    <div id="title">
      {{view C.Embed.TimeSelector}}
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo ProcedureStatus model}}Status{{/linkTo}}</li>
        <li>{{#linkTo Procedure.Log model}}Log{{/linkTo}}</li>
      </ul>
      <h1>{{model.name}} <span>Procedure</span></h1>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="ProcedureStatus">

    <div id="info">
      <div class="info-box" style="float: right; border: 0;">
        <div id="action-buttons" class="btn-group pull-right">

          <button class="btn dropdown-toggle" data-toggle="dropdown">
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li><a {{action "delete"}} {{bindAttr state="model.currentState"}} {{bindAttr flowId="model.id"}} {{bindAttr applicationId="model.application"}}>Delete This Procedure</a></li>
          </ul>

          <button class="btn" {{bindAttr disabled="model.startPauseDisabled"}} style="width:64px;" {{action "exec"}} {{bindAttr flow-app="model.applicationId"}} {{bindAttr flow-id="model.name"}} {{bindAttr flow-action="model.defaultAction"}}><span {{bindAttr class="model.actionIcon"}}></span><span>{{model.defaultAction}}</span></button>

        </div>

        <div class="flow-state"><strong>{{model.currentState}}</strong></div>

      </div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart title="Successful Requests" metrics="/query/requests/{parent}/procedures/{id}"}}</div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart title="Failed Requests" metrics="/query/failures/{parent}/procedures/{id}"}}</div>
    </div>
    <div id="panels">

      <div class="panel">
      <div class="panel-head"><div class="panel-title">Make a Request</div></div>
        <table style="width: 100%">
          <thead>
          <tr>
            <th style="width: 140px;text-align: left;">
              Method
            </th>
            <th style="text-align: left;">
              Parameters
            </th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>
              {{view C.Embed.TextField valueBinding="requestMethod" }}
            </td>
            <td>
              {{view Ember.TextField valueBinding="requestParams" width="100%"}}
              {{#if model.isRunning}}
              <button {{action "submit"}} class="btn" style="margin:0px 16px;">Execute</button>
              {{else}}
              <button disabled="disabled" class="btn" style="margin: 0px 16px;">Click "Start" Above</button>
              {{/if}}
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <div class="panel" style="padding: 10px;">
        {{view Ember.TextArea valueBinding="responseBody" classNames="well query-response"}}
      </div>

    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="PageNotFound">

    <div id="panels">

      <div class="panel">

        <div class="panel-head">
          <div class="panel-title">Not Found</div>
        </div>
        <div class="object-list-empty">
          <div class="object-list-empty-content">
            <div>Page not found.</div>
            <span>Please double check the URL above.</span>
          </div>
        </div>

      </div>
    </div>

  </script>

  <!-- Shared -->

  <script type="text/x-handlebars" data-template-name="Runnable/Config">

    <div class="popup-modal config-modal">
      <div class="popup-container">
        <div class="popup-body">
          <div class="popup-close" {{action close on="click"}}>×</div>
          <h2>Runtime Configuration</h2>

          {{view C.Embed.KeyVal}}

        </div>
          <div class="modal-footer">
            <button {{action close}} class="btn">Cancel</button>
            <button {{action clear}} class="btn">Clear</button>
            <button {{action runOnce}} class="btn">Run Once</button>
            <button {{action saveAndRun}} class="btn" disabled="true">Save and Run</button>
          </div>
      </div>
    </div>

  </script>

  <script type="text/x-handlebars" data-template-name="Runnable/Log">

    <div id="panels">
      <div class="panel" style="padding: 10px;">
        <pre id="logView" class="well query-response"></pre>
      </div>
    </div>

  </script>

  <!-- Partials -->

  <script type="text/x-handlebars" data-template-name="_apps-list">
    {{#if elements.App.length}}
      <table class="table">
        <thead>
        <th>&nbsp;</th>
          <th style="text-align: center;width:64px;">Collect</th>
          <th style="text-align: center;width:64px;">Process</th>
          <th style="text-align: center;width:64px;">Store</th>
          <th style="text-align: center;width:64px;">Query</th>
        <th style="width: 364px;">Busyness</th>
        </thead>
        <tbody>
        {{#each elements.App }}
          <tr>
            <td class="app-list-name">
            <a {{bindAttr href="href"}}>{{name}}</a>
            </td>
            <td class="app-list-count">{{counts.Stream}}</strong></td>
            <td class="app-list-count">{{counts.Flow}}</strong></td>
            <td class="app-list-count">{{counts.Dataset}}</strong></td>
            <td class="app-list-count">{{counts.Procedure}}</strong></td>
            <td>{{view C.Embed.Chart entityIdBinding=id entityType="App" height="50" metrics="/process/busyness/{id}" unit="percent"}}</td>
          </tr>
        {{/each}}
        </tbody>
      </table>
    {{else}}
      <div class="object-list-empty">
      <div class="object-list-empty-content">
      <div>No Applications.</div>
      <span>Load an Application by clicking the button above.</span>
      </div>
      </div>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="list-page">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1>{{controller.title}} <span>Data</span></h1>
    </div>

    <div id="panels">
      <div class="panel">
        {{outlet}}
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="_streams-list">

    {{#if elements.Stream.length}}
      <table class="table">
      <thead>
        <th style="padding-left: 14px;">Streams</th>
        <th style="width: 100px;text-align: center;">Storage</th>
        <th style="width: 100px;padding: 3px 0px 0px;text-align: center;">Unconsumed</th>
        <th style="width: 444px;">Arrival Rate</th>
      </thead>
      <tbody>
        {{#each elements.Stream }}
          <tr>
            <td class="app-list-name">
            <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status">Consumers: {{types.StreamFlow.length}}</span>
            </td>
            <td class="app-list-count">{{storageLabel}}<br /><span>{{storageUnits}}</span></td>
            <td class="app-list-count">{{unconsumed}}<br /><span>Events</span></td>
            <td>{{view C.Embed.Chart entityIdBinding=id entityType="Stream" mode="singular" metrics="/collect/events/streams/{id}"}}</td>
          </tr>
        {{/each}}
      </tbody>
      </table>
    {{else}}
      <div class="object-list-empty">
        <div class="object-list-empty-content">
          <div>No Streams.</div>
            <span>Please create one in code or on the commandline.</span>
        </div>
      </div>
    {{/if}}

  </script>

  <script type="text/x-handlebars" data-template-name="_flows-list">
    {{#if elements.Flow.length}}
      <table class="table">
        <thead>
          <th style="padding-left: 14px;">Flows</th>
          <th style="width: 262px;">Processing Rate</th>
          <th style="width: 262px;">Busyness</th>
        </thead>
        <tbody>
        {{#each elements.Flow.content }}
          <tr>
            <td class="app-list-name">
            <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status">{{currentState}}</span>
            </td>
            <td>{{view C.Embed.Chart entityIdBinding=id entityType="Flow" metrics="/process/events/{parent}/flows/{id}"}}</td>
            <td>{{view C.Embed.Chart entityIdBinding=id entityType="Flow" metrics="/process/busyness/{parent}/flows/{id}" unit="percent"}}</td>
          </tr>
        {{/each}}
        </tbody>
      </table>
    {{else}}
      <div class="object-list-empty">
        <div class="object-list-empty-content">
          <div>No Flows.</div>
          <span>Add Flows by uploading an Application JAR.</span>
        </div>
      </div>
    {{/if}}
    {{#if elements.Batch.length}}
      <table class="table">
          <thead>
            <th style="padding-left: 14px;">MapReduce</th>
            <th style="width: 262px;">Mapping Status</th>
            <th style="width: 262px;">Reducing Status</th>
          </thead>
          <tbody>
          {{#each elements.Batch.content }}
            <tr>
              <td class="app-list-name">
              <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status">{{currentState}}</span>
              </td>
              <td>{{view C.Embed.Chart entityIdBinding=id entityType="Batch" metrics="/process/completion/{parent}/mapreduce/{id}/mappers" unit="percent"}}</td>
              <td>{{view C.Embed.Chart entityIdBinding=id entityType="Batch" metrics="/process/completion/{parent}/mapreduce/{id}/reducers" unit="percent"}}</td>
            </tr>
          {{/each}}
          </tbody>
        </table>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="_datasets-list">
    {{#if elements.Dataset.length}}
      <table class="table">
        <thead>
        <th style="padding-left: 14px;">Datasets</th>
        <th style="width: 100px;text-align: center;">Storage</th>
        <th style="width: 444px;">Write Rate</th>
        </thead>
        <tbody>
        {{#each elements.Dataset }}
          <tr>
            <td class="app-list-name">
            <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status">{{type}}</span>
            </td>
            <td class="app-list-count">{{storageLabel}}<br /><span>{{storageUnits}}</span></td>
            <td>{{view C.Embed.Chart entityIdBinding=id entityType="Dataset" mode="singular" metrics="/store/bytes/datasets/{id}"}}</td>
          </tr>
        {{/each}}
        </tbody>
      </table>
    {{else}}
    <div class="object-list-empty">
      <div class="object-list-empty-content">
        <div>No Datasets.</div>
          <span>Please create one in code or on the commandline.</span>
        </div>
    </div>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="_procedures-list">
    {{#if elements.Procedure.length}}
      <table class="table">
      <thead>
        <th style="padding-left: 14px;">Procedures</th>
        <th style="width: 100px;text-align: center;">Instances</th>
        <th style="width: 212px;">Request Rate</th>
        <th style="width: 212px;">Error Rate</th>
      </thead>
      <tbody>
        {{#each elements.Procedure}}
          <tr>
            <td class="app-list-name">
            <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status">{{currentState}}</span>
            </td>
            <td class="app-list-count">1</td>
            <td>{{view C.Embed.Chart entityIdBinding=id entityType="Procedure" metrics="/query/requests/{parent}/procedures/{id}"}}</td>
            <td>{{view C.Embed.Chart entityIdBinding=id entityType="Procedure" metrics="/query/failures/{parent}/procedures/{id}"}}</td>
          </tr>
        {{/each}}
      </tbody>
      </table>
    {{else}}
    <div class="object-list-empty">
    <div class="object-list-empty-content">
    <div>No Procedures.</div>
    <span>Add Procedures by uploading an Application JAR.</span>
    </div>
    </div>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="promote">
    <div class="popup-container" style="min-height: 246px;width: 430px;">
      <div class="popup-body" style="min-height: 240px;">

      {{#if finished}}
        <h2>Push {{finished}}</h2>
      {{else}}
        <h2>Push to Cloud</h2>
      {{/if}}
      <div class="modal-loading"></div>
        <div class="modal-push">

          {{#if pushing}}
          <div style="text-align: center; padding: 26px;height:182px;">
            <img style="width:116px;height:116px;" src="/assets/img/pushing.gif" />
          </div>
          {{else}}
            {{#if finished}}
              <div class="popup-description" style="padding:0;">
                {{finishedMessage}}
                {{#if finishedLink}}
                  <br /><a target="_blank" {{bindAttr href="finishedLink"}}>{{finishedLink}}</a>
                {{/if}}
              </div>
            {{else}}
              <div class="sparkline-box-title" style="padding-left:0;">API Key</div>
              <div>{{view C.Embed.TextField valueBinding="C.Env.credential" }}</div>
              {{#if C.Env.credential}}
                {{#if destinations.length}}
                  <div class="sparkline-box-title" style="padding-left:0;margin-top:8px;">Destination</div>
                  <div>{{view Ember.Select valueBinding="destination" contentBinding="destinations" optionLabelPath="content.name" optionValuePath="content.id"}}</div>
                {{else}}
                  {{#if loading}}
                    <div style="text-align: center; padding: 24px 0px 16px;">
                      <img src="/assets/img/chart-loading.gif" />
                    </div>
                  {{else}}
                    <div class="popup-description">
                    {{#if network}}
                      There was a problem connecting to Continuuity. Please check your internet connection.
                    {{else}}
                      There are no destinations available. Make sure your API Key is correct. If you have not configured any clouds, you can do so on your <a target="_blank" href="https://accounts.continuuity.com/">Account Home page</a>.
                    {{/if}}
                    </div>
                  {{/if}}
                {{/if}}
              {{else}}
                <div class="popup-description">Your API Key can be found on your <a target="_blank" href="http://accounts.continuuity.com/profile">Profile Page</a>.</div>
              {{/if}}

              <div class="alert" {{bindAttr style="showWarning"}}>{{warningMessage}}</div>
            {{/if}}
          {{/if}}
        </div>
      </div>
      {{#if finished}}
        <div class="modal-footer">
          <button {{action "destroy" target="view"}} class="btn">Done</button>
        </div>
      {{else}}
        {{#unless pushing}}
          <div class="modal-footer">
            <button {{action "destroy" target="view"}} class="btn">Cancel</button>
            {{#if destinations.length}}
              <button {{action "promoteSubmit"}} class="btn">Push</button>
            {{/if}}
          </div>
        {{/unless}}
      {{/if}}
    </div>
  </script>

</body>
</html>
